define("siteUtils/utils/mobileUtils",[],function(){"use strict";var a=12;var b={26:26,27:26,28:26,29:27,30:27,31:27,32:28,33:28,34:28,35:29,36:29,37:29,38:30,39:30,40:30,41:31,42:31,43:31,44:32,45:32,46:32,47:33,48:33,49:33,50:34,51:34,52:34,53:35,54:35,55:35,56:36,57:36,58:36,59:37,60:37,61:37,62:38,63:38,64:38,65:39,66:39,67:39,68:40,69:40,70:40,71:41,72:41,73:41,74:42,75:42,76:42,77:43,78:43,79:43,80:44,81:44,82:44,83:45,84:45,85:45,86:46,87:46,88:46,89:47,90:47,91:47,92:48,93:48,94:48,95:49,96:49,97:49,98:50,99:50,100:50};function c(c){var d;var e=a;var f=Math.round(c);if(f<e){d=e}else if(f<=14){d=f+1}else if(f<=25){d=f}else if(f<=100){d=b[f]}else{d=50}return d}function d(a,b){var c=this.getMobileFontSize(a);return b*c}function e(){return a}return{getMobileFontSize:c,convertFontSizeToMobile:d,getMinFontSize:e}});define("siteUtils/core/MobileDeviceAnalyzer",["lodash"],function(a){"use strict";var b=600;var c=1280;var d={MOBILE:"smartphone",TABLET:"tablet",DESKTOP:"desktop",OTHER:"other"};function e(a){switch(true){case/(GT-S5300B|GT-S5360|GT-S5367|GT-S5570I|GT-S6102B|LG-E400f|LG-E400g|LG-E405f|LG-L38C|LGL35G)/i.test(a):return{width:240,height:320};case/(Ls 670|GT-S5830|GT-S5839i|GT-S6500D|GT-S6802B|GT-S7500L|H866C|Huawei-U8665|LG-C800|LG-MS695|LG-VM696|LGL55C|M865|Prism|SCH-R720|SCH-R820|SCH-S720C|SPH-M820-BST|SPH-M930BST|U8667|X501_USA_Cricket|ZTE-Z990G)/i.test(a):return{width:320,height:480};case/(5860E|ADR6300|ADR6330VW|ADR8995|APA9292KT|C771|GT-I8160|GT-I9070|GT-I9100|HTC-A9192|myTouch4G|N860|PantechP9070|PC36100|pcdadr6350|SAMSUNG-SGH-I727|SAMSUNG-SGH-I777|SAMSUNG-SGH-I997|SC-03D|SCH-I405|SCH-I500|SCH-I510|SCH-R760|SGH-S959G|SGH-T679|SGH-T769|SGH-T959V|SGH-T989|SPH-D700)/i.test(a):return{width:480,height:800};case/(DROIDX|SonyEricssonSO-02C|SonyEricssonST25i)/i.test(a):return{width:480,height:854};case/(DROID3|MB855)/i.test(a):return{width:540,height:960};case/F-05D/i.test(a):return{width:720,height:1280};default:return null}}function f(a){var b=a.match(/applewebkit\/([\d\.]+)/i),c,d,e,f;if(b){c=b[1].split(".");d=+(c[0]||0);e=+(c[1]||0);f=+(c[2]||0);return d*1e4+e*100+f}return NaN}function g(a){this.requestModel=a}g.prototype={isMobileDevice:function(){var c=a.result(this,"requestModel.deviceType.toLowerCase")===d.MOBILE;if(this.isWindowUnavailable()){return c}var e=this.getScreenWidth();if(this.isLandscape()){e=this.getScreenHeight()}var f=e<b;var g=f&&(this.isTouchScreen()||this.isMSMobileDevice());return g},isTabletDevice:function(){if(this.isWindowUnavailable()){return!!(this.requestModel&&this.requestModel.deviceType&&this.requestModel.deviceType.toLowerCase()===d.TABLET)}var a=this.getScreenWidth();if(this.isPortrait()){a=this.getScreenHeight()}return!this.isMobileDevice()&&(a>=b&&a<=c)&&this.isTouchScreen()},getWindowScreenWidth:function(){return window.screen.width},getScreenWidth:function(){var a=this._getDeviceParamsByUserAgent();return a?a.width:NaN},getScreenHeight:function(){var a=this._getDeviceParamsByUserAgent();return a?a.height:NaN},isAppleMobileDevice:function(){return/iphone|ipod|ipad|Macintosh/i.test(this.requestModel.userAgent)},isMSMobileDevice:function(){return/iemobile/i.test(this.requestModel.userAgent)},isAndroidMobileDevice:function(){return/android/i.test(this.requestModel.userAgent)},cannotHideIframeWithinRoundedCorners:function(){return f(this.requestModel.userAgent)<537e4},isNewChromeOnAndroid:function(){if(this.isAndroidMobileDevice()){var a=this.requestModel.userAgent.toLowerCase();if(/chrome/i.test(a)){var b=a.split("chrome/");var c=b[1].split(" ")[0];var d=c.split(".")[0];var e=parseInt(d,10);if(e>=29){return true}}}return false},isTouchScreen:function(){if(this.isWindowUnavailable()){return this.isMobileDevice()||this.isTabletDevice()}return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)},isLandscape:function(){return!this.isPortrait()},isPortrait:function(){if(this.isWindowUnavailable()){return true}var a=window.orientation;return a===0||a===180||this.isPortraitByScreenSize()},isPortraitByScreenSize:function(){if(this.isWindowUnavailable()){return true}return window.innerHeight>window.innerWidth},isAndroidOldBrowser:function(){var a=this.isNewChromeOnAndroid();var b=/opr/i.test(this.requestModel.userAgent);return this.isAndroidMobileDevice()&&!a&&!b},getDevicePixelRatio:function(){if(this.isWindowUnavailable()){return 2}if(this.isMSMobileDevice()){return Math.round(window.screen.availWidth/(window.screen.width||document.documentElement.clientWidth))}return window.devicePixelRatio},getInitZoom:function(){return this.getScreenWidth()/document.body.offsetWidth},getZoom:function(){if(this.isWindowUnavailable()){return 1}var a=this.getScreenWidth();return a/this.getWindowInnerWidth()},getMobileZoomByScreenProperties:function(){if(this.isWindowUnavailable()){return 1}var a=1;var b=this.getScreenDimensions();var c=Math.max(b.width,b.height);var d=Math.min(b.width,b.height);if(this.isMobileDevice()&&!this.isPortraitByScreenSize()){a=d/c}return a},getSiteZoomRatio:function(){if(this.isWindowUnavailable()){return 1}var a=320/window.screen.width;return a},getInvertedZoomRatio:function(){if(this.isWindowUnavailable()){return 1}return 1/this.getZoom()},getOrientationZoomFixRation:function(){return this.getInitZoom()/this.getZoom()},getZoomRatioForNonOptimizedSites:function(){if(this.isWindowUnavailable()){return 1}return window.innerWidth/320},_getDeviceParamsByUserAgent:function(){if(this.isWindowUnavailable()){return null}var a=this.requestModel.userAgent.toLowerCase();var b=e(a);var c;var d;var f=this.getScreenDimensions();if(b){c=b.width;d=b.height}else if(this.isPortrait()){c=Math.min(f.width,f.height);d=Math.max(f.width,f.height)}else{c=Math.max(f.width,f.height);d=Math.min(f.width,f.height)}if(/iemobile/i.test(a)){c=f.width||document.documentElement.clientWidth;d=f.height||document.documentElement.clientHeight}return{width:c,height:d}},getScreenDimensions:function(){if(this.isWindowUnavailable()){return{width:0,height:0}}return{width:window.screen.width,height:window.screen.height}},isWindowUnavailable:function(){return typeof window==="undefined"},getWindowInnerWidth:function(){return window.innerWidth}};return g});define("siteUtils/core/browserDetection",[],function(){"use strict";function a(a){if(!a){return{}}var b={},c={},d=a.match(/Web[kK]it[\/]{0,1}([\d.]+)/),e=a.match(/(Android);?[\s\/]+([\d.]+)?/),f=!!a.match(/\(Macintosh\; Intel /),g=a.match(/(iPad).*OS\s([\d_]+)/),h=a.match(/(iPod)(.*OS\s([\d_]+))?/),i=!g&&a.match(/(iPhone\sOS)\s([\d_]+)/),j=a.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),k=a.match(/Windows Phone ([\d.]+)/),l=j&&a.match(/TouchPad/),m=a.match(/Kindle\/([\d.]+)/),n=a.match(/Silk\/([\d._]+)/),o=a.match(/(BlackBerry).*Version\/([\d.]+)/),p=a.match(/(BB10).*Version\/([\d.]+)/),q=a.match(/(RIM\sTablet\sOS)\s([\d.]+)/),r=a.match(/PlayBook/),s=a.match(/Chrome\/([\d.]+)/)||a.match(/CriOS\/([\d.]+)/),t=a.match(/Firefox\/([\d.]+)/),u=a.match(/MSIE\s([\d.]+)/)||a.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),v=!s&&a.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),w=v||a.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/),x=a.match(/Edge\/\d{2,}\.[\d\w]+$/);c.webkit=d&&!x;if(c.webkit){c.version=d[1]}if(e){b.android=true;b.version=e[2]}if(i&&!h){b.ios=b.iphone=true;b.version=i[2].replace(/_/g,".")}if(g){b.ios=b.ipad=true;b.version=g[2].replace(/_/g,".")}if(h){b.ios=b.ipod=true;b.version=h[3]?h[3].replace(/_/g,"."):null}if(k){b.wp=true;b.version=k[1]}if(j){b.webos=true;b.version=j[2]}if(l){b.touchpad=true}if(o){b.blackberry=true;b.version=o[2]}if(p){b.bb10=true;b.version=p[2]}if(q){b.rimtabletos=true;b.version=q[2]}if(r){c.playbook=true}if(m){b.kindle=true;b.version=m[1]}if(n){c.silk=true;c.version=n[1]}if(!n&&b.android&&a.match(/Kindle Fire/)){c.silk=true}if(s&&!x){c.chrome=true;c.version=s[1]}if(t&&!x){c.firefox=true;c.version=t[1]}if(u){c.ie=true;c.version=u[1]}if(w&&(f||b.ios)){c.safari=true;if(f){c.version=w[1]}}if(v){c.webview=true}if(x){c.edge=true}b.tablet=!!(g||r||e&&!a.match(/Mobile/)||t&&a.match(/Tablet/)||(u||x)&&!a.match(/Phone/)&&a.match(/Touch/));b.phone=!!(!b.tablet&&!b.ipod&&(e||i||j||o||p||s&&a.match(/Android/)||s&&a.match(/CriOS\/([\d.]+)/)||t&&a.match(/Mobile/)||u&&a.match(/Touch/)));b.mac=f;return{browser:c,os:b}}return a});define("siteUtils/core/linkRenderer",["lodash","wixUrlParser","coreUtils","experiment"],function(a,b,c,d){"use strict";var e="_self",f="_blank",g="https://users.wix.com/signin?",h="javascript:void()";var i={sendEmail:"sendMail",welcomeEmailTemplate:"mailTemplate",userColor:"userColor",loginCompName:"loginCompName",referralInfo:"loginCompName"};function j(a,b){if(d.isOpen("sv_dpages")){var e=x(b.url);if(!e&&!c.validationUtils.isValidUrl(b.url)){return{}}var g=e?a.publicBaseUrl+b.url:b.url;return{href:g,target:b.target||f,"data-content":g,"data-type":"external"}}if(!c.validationUtils.isValidUrl(b.url)){return{}}return{href:b.url,target:b.target||f,"data-content":b.url,"data-type":"external"}}function k(c,d,f){var g=d.pageId;if(!g){return{}}var i=f||{pageId:g.id,title:g.pageUriSEO};var j=b.getUrl(c,i);var k={href:j,target:e};if(t(c,g.id)){a.assign(k,{href:h,"data-no-physical-url":j})}return k}function l(a,c){if(!c.routerId||!c.innerRoute){return{}}var d={routerId:c.routerId,innerRoute:c.innerRoute};var f=b.getUrl(a,d);var g={href:f,target:e};if(c.anchorDataId){g["data-anchor"]=c.anchorDataId}return g}function m(a,b){return k(a,b)}function n(b,d,e){var f=d.pageId.id==="masterPage";var g=a.clone(d),h=a.has(d.anchorDataId,"id")?d.anchorDataId.id:d.anchorDataId,i=a.includes(c.siteConstants.SAME_PAGE_SCROLL_ANCHORS,h)||f,j=e.imageZoom,l=t(b,e.pageId),n;if(i){if(j||l){var o=b.pagesDataItemsMap[b.primaryPageId];n=k(b,{pageId:o})}else{n=k(b,g,e)}}else{n=m(b,g)}if(!l){n["data-keep-roots"]=true}n["data-anchor"]=h;return n}function o(a){return{href:"tel:"+a.phoneNumber,"data-content":a.phoneNumber,"data-type":"phone"}}function p(a){var b="mailto:"+(a.recipient&&a.recipient.trim()||""),c=[];if(a.subject){c.push("subject="+a.subject)}if(a.body){c.push("body="+a.body)}if(c.length>0){b+="?"+c.join("&")}return{href:b,target:e,"data-content":a.recipient,"data-type":"mail"}}function q(b,d){var e=d.docId;var g=/\.pdf$/i.test(e);var h=b.serviceTopology.staticDocsUrl;var i;if(a.includes(e,"ugd/")&&a.includes(h,"/ugd")){e=e.substr(e.indexOf("ugd")+4)}i=h+"/"+e;if(!g){i+="?"+c.urlUtils.toQueryString({dn:d.name})}return{href:i,target:f,"data-type":"document"}}function r(b,d){var f=d.postLoginUrl||"",h=d.postSignupUrl||"",j=d.dialog||"showLogin",k,l,m,n="";if(a.includes(h,"ifcontext")){m=c.urlUtils.parseUrl(h).query;a.forOwn(m,function(a,b){if(b.toLowerCase()==="ifcontext"){n=a.replace("#","");if(/^[a-zA-Z0-9]+$/.test(n)){h=h.replace("{ifcontext}",n)}else{h=h.replace("{ifcontext}","illegalContextValue")}}})}if(c.wixUserApi.isSessionValid(b.cookie)){l=f}else{if(j==="createUser"){j="sign-up"}k={originUrl:b.currentUrl.full,postLogin:f,postSignUp:h,view:j};a.forEach(i,function(b,c){var e=d[b];if(!a.isUndefined(e)&&e!==""){k[c]=e}});l=g+c.urlUtils.toQueryString(k)}return{href:l,target:e}}function s(a,b){return{href:a.currentUrl.full,target:"_self","data-mobile":b.dataMobile}}function t(a,b){var c=a.pagesDataItemsMap[b];return c&&c.isPopup}function u(a){return!!a&&a.indexOf("mailto")===0}function v(a,c){if(!c){return false}var d=b.utils.getResolvedSiteData(a);var e=!!b.parseUrl(d,c);var f=c.indexOf(d.serviceTopology.staticDocsUrl)===0;var g=c===h;return!(e||u(c)||f||g)}function w(a){return a.type==="PageLink"&&!a.pageId||a.type==="AnchorLink"&&!a.pageId||a.type==="AnchorLink"&&!a.anchorDataId||a.type==="DocumentLink"&&!a.docId||a.type==="DynamicPageLink"&&!a.routerId}function x(a){if(!a){return false}return a.charAt(0)==="/"}function y(a,b){var c=[];if(a){c.push("galleryId:"+a)}if(b){c.push("propertyQuery:"+b)}return c.join(" ")}return{renderLink:function(a,c,d){if(!a||w(a)||!d){return{}}var e=b.utils.getResolvedSiteData(c);switch(a.type){case"PageLink":return m(e,a);case"ExternalLink":return j(e,a);case"AnchorLink":return n(e,a,d);case"LoginToWixLink":return r(e,a);case"EmailLink":return p(a);case"PhoneLink":return o(a);case"DocumentLink":return q(e,a);case"SwitchMobileViewMode":return s(e,a);case"DynamicPageLink":return l(e,a);default:return{}}},renderImageZoomLink:function(a,d,f,g,i){var j;var k;if(c.nonPageItemZoom.shouldImageBeZoomedAsNonPageItem(f)){k={onClick:function(){c.nonPageItemZoom.zoom(f)}}}else{var l={pageId:d.pageId,pageItemId:f.id,title:f.title,imageZoom:true};var m=b.utils.getResolvedSiteData(a);j=b.getUrl(m,l);k={href:j,target:e};if(t(m,l.pageId)){k.href=h;k["data-no-physical-url"]=j}var n=y(g,i);if(n){k["data-page-item-context"]=n}}return k},renderPageLink:function(a,c){var d=b.utils.getResolvedSiteData(c);return m(d,{pageId:a})},isExternalLink:v,isRelativeUrl:x,isEmailLink:u,getLinkUrlFromLinkProps:function(a){return a.href===h?a["data-no-physical-url"]:a.href},CONSTS:{LOGIN_TO_WIX_URL:g}}});define("siteUtils/core/menuUtils",["lodash","siteUtils/core/linkRenderer","coreUtils","experiment","wixUrlParser"],function(a,b,c,d,e){"use strict";function f(d,e,f,g,h){if(!d){return d}if(a.isString(d)){return{}}var i=c.objectUtils.cloneDeep(d);if(f){i.render=b.renderLink(i,h||e,g)}return i}function g(a,c,d,e,f){var g={type:"PageLink",pageId:a};if(d){g.render=b.renderLink(g,f||c,e)}return g}function h(b,c){var d=b.getRouters();var e=false;a.forEach(d,function(b){if(a.includes(a.values(b.pages),c)){e=true}});return e}function i(b,c,e,g,j,k,l){return a.reduce(b,function(b,m){var n=f(m.link,c,g,j,l);if(n&&n.pageId&&d.isOpen("sv_dpages")){var o=a.isObject(n.pageId)?n.pageId.id:n.pageId;o=a.startsWith(o,"#")?o.substring(1):o;var p=n.type==="PageLink"?h(c,o):false;if(!k&&p){return b}}if(!e||e&&n&&n.type==="PageLink"){b.push({id:m.id,label:m.label,isVisible:m.isVisible,isVisibleMobile:m.isVisibleMobile,items:i(m.items,c,e,g,j,k,l),link:n})}return b},[],this)}function j(b,c,d,e,f){var h=[],i;a.forEach(b,function(a){i=c.getDataByQuery(a.refId);h.push({label:i.title,isVisible:!i.hidePage,isVisibleMobile:i.mobileHidePage!==undefined?!i.mobileHidePage:!i.hidePage,items:j(a.items,c,d,e,f),link:g(a.refId,c,d,e,f)})});return h}function k(b,c,d,f,g){var h=b.getDataByQuery("CUSTOM_MAIN_MENU");var k=b.getDataByQuery("MAIN_MENU");var l;if(!d){l=e.utils.getResolvedSiteData(b)}if(h&&(!k||a.isEmpty(k.items))){return i(h.items,b,c,!d,f,g,l)}return j(k.items,b,!d,f,l)}function l(a,b,c){return k(a,b,false,c)}function m(a,b,c){return k(a,b,true,{},c)}function n(b){return a.reduce(b,function(a,b){return a>b?a:b},-Infinity)}function o(b){return a.filter(b,function(a){return a!==0})}function p(b){return a.reduce(b,function(a,b){return a<b?a:b})}function q(b){var c=0;return a.reduce(m(b,null,false),function(a,b){if(b.isVisible){a.push(c.toString());c++}return a},[])}function r(b,c,d,e,f,g,h,i){b-=f*(h?e.length:e.length-1);b-=i.left+i.right;if(c){a.fill(e,g)}if(a.includes(e,0)){return null}var j=0;var k=a.reduce(e,function(a,b){return a+b},0);if(k>b){return null}if(c){if(d){var l=Math.floor(b/e.length);var m=a.times(e.length,a.constant(l));j=l*e.length;if(j<b){var n=Math.floor(b-j);a.forEach(e,function(a,b){if(b<=n-1){m[b]++}})}return m}return e}if(d){var o=Math.floor((b-k)/e.length);j=0;var p=a.map(e,function(a){j+=a+o;return a+o});if(j<b){var q=Math.floor(b-j);a.forEach(e,function(a,b){if(b<=q-1){p[b]++}})}return p}return e}function s(b,c,d){var e=d.getCurrentUrlPageId();var f=b.getSiteAspect("anchorChangeEvent").getActiveAnchor();if(!f){return null}var g=f.activeAnchorComp.id;var h=a(c).filter(function(b){return b.link&&a.isObject(b.link.anchorDataId)&&b.link.type==="AnchorLink"&&a.has(b.link.pageId,"id")&&b.link.pageId.id===e}).find({link:{anchorDataId:{id:g}}});return h?h.link.anchorDataId.id:null}function t(a){return a.browserFlags().highlightAnchorsInMenu}return{getDropDownWidthIfOk:r,getMaxWidth:n,getMinWidth:p,removeAllElementsWithWidthZero:o,nonHiddenPageIdsFromMainMenu:q,getSiteMenuWithRender:l,getSiteMenuWithoutRenderedLinks:m,getActiveAnchorInPage:s,shouldHighlightAnchorInPage:t}});define("siteUtils/core/dataRefs.json",[],function(){return{Data:{BackgroundMedia:{mediaRef:false,imageOverlay:false},WixVideo:{posterImageRef:false},Document:{mainPage:false,pages:false},Header:{image:false},Image:{link:false,originalImageDataRef:false},Bgimagestrip:{originalImageDataRef:false},StripContainer:{background:false},ImageList:{items:false},LinkList:{items:false},AnchorLink:{anchorDataId:true,pageId:false},PageLink:{pageId:false},MediaRichText:{linkList:false,componentDataList:false},MenuItem:{refId:false},Page:{pageBackgrounds:{desktop:{ref:false},mobile:{ref:false}}},RichTextImage:{text:false,image:false},Service:{image:false},ServiceList:{items:false},BasicMenuItem:{link:false,items:false},CustomMenu:{items:false},Menu:{items:false},CustomMenusCollection:{menus:false},MenuDataRef:{menuRef:false},ImageButton:{link:false,defaultImage:false,hoverImage:false,activeImage:false},SubscribeForm:{link:false},ContactForm:{link:false},FlashComponent:{placeHolderImage:false},LinkableFlashComponent:{link:false,placeHolderImage:false},LinkableButton:{link:false},MenuData:{menuButton:false,pages:false},PermaLink:{dataItemRef:false,correctPermaLinkRef:false},SelectableList:{options:false},RadioGroup:{options:false},StyledText:{linkList:false},StyledTextLinkHelper:{link:false},SvgShape:{link:false},Table:{items:false,header:false,footer:false},TPAWidget:{tpaData:false},TPA:{tpaData:false},TPASection:{tpaData:false},TPAMultiSection:{tpaData:false},RssButton:{image:false,link:false},AppPage:{pageBackgrounds:{desktop:{ref:false},mobile:{ref:false}}},StripContainerSlideShowSlide:{background:false},ImageButtonWithText:{icon:false}},Design:{MediaContainerDesignData:{background:false},BackgroundMedia:{mediaRef:false,imageOverlay:false},WixVideo:{posterImageRef:false},Image:{link:false,originalImageDataRef:false}},Properties:{ColumnProperties:{background:false}}}});define("siteUtils/customDataResolvers/imageDataResolver",["lodash"],function(a){"use strict";var b=["quality","unsharpMask"];function c(c,d){var e={};if(c.link){e.link=d(c.link)}if(c.originalImageDataRef){e.originalImageDataRef=d(c.originalImageDataRef)}var f=a.pick(d("IMAGE_QUALITY"),b);if(a.isEmpty(c.quality)&&!a.isEmpty(f)){e.quality=f}if(!a.isEmpty(e)){return a.defaults(e,c)}return c}return{resolve:c}});define("siteUtils/customDataResolvers/pageLinkDataResolver",["lodash"],function(a){"use strict";function b(b,c){return a.defaults({pageId:c(b.pageId,"masterPage")},b)}return{resolve:b}});define("siteUtils/customDataResolvers/connectionListDataResolver",["lodash"],function(a){"use strict";function b(b){var c=a.map(a.get(b,"items"),function(b){if(!a.has(b,"config")){return b}return a.assign({},b,{config:JSON.parse(b.config)})});return a.assign({},b,{items:c})}return{resolve:b}});define("siteUtils/customDataResolvers/appControllerDataResolver",["lodash"],function(a){"use strict";function b(b){if(!a.has(b,"settings")){return b}return a.assign({},b,{settings:JSON.parse(b.settings)})}return{resolve:b}});define("siteUtils/customDataResolvers/behaviorsListDataResolver",["lodash"],function(a){"use strict";function b(b){var c=a.get(b,"items");if(a.isString(c)){return a.assign({},b,{items:JSON.parse(c)})}return b}return{resolve:b}});define("siteUtils/customDataResolvers/customDataResolvers",["lodash","siteUtils/customDataResolvers/imageDataResolver","siteUtils/customDataResolvers/pageLinkDataResolver","siteUtils/customDataResolvers/connectionListDataResolver","siteUtils/customDataResolvers/appControllerDataResolver","siteUtils/customDataResolvers/behaviorsListDataResolver"],function(a,b,c,d,e,f){"use strict";return{Image:b,PageLink:c,ConnectionList:d,AppController:e,ObsoleteBehaviorsList:f}});define("siteUtils/core/dataResolver",["lodash","siteUtils/core/dataRefs.json","siteUtils/customDataResolvers/customDataResolvers"],function(a,b,c){"use strict";var d={component_properties:"Properties",document_data:"Data",design_data:"Design"};var e=["masterPage"];function f(b,d,f,h,i){var j=a.get(c,[b.type,"resolve"]);var k=this;function l(a,b){b=b||d;var c=b==="masterPage"?f:e;return g.call(k,h,f,c,b,i,a)}return j(b,l)}function g(e,h,i,j,k,l,m){var n=b[d[k]];var o=null;if(a.isPlainObject(l)){if(a.has(c,l.type)){o=f.call(this,l,j,h,e,k)}else{m=m||a.get(n,l.type,{});o=a.mapValues(m,function(a,b){var c=g.call(this,e,h,i,j,k,l[b],a);return!c&&a===true?l[b]:c},this)}return a.defaults(o,l)}if(a.isArray(l)){return a.map(l,function(a){return g.call(this,e,h,i,j,k,a)},this)}if(a.startsWith(l,"#")){l=l.slice(1)}var p=j;o=a.get(e,[j,"data",k,l]);if(!o){a.forEach(i,function(b){o=a.get(e,[b,"data",k,l]);return!o});if(!o){return null}}var q=this.readingFromCache&&a.get(this.cache,[p,k,l]);if(q){return q}if(a.has(c,o.type)){o=f.call(this,o,j,h,e,k)}else{m=m||a.get(n,o.type);if(!m){return o}o=a.assign({},o);a.forEach(m,function(b,c){if(!a.has(o,c)){return}var d=g.call(this,e,h,i,j,k,o[c],b);if(d||!b){o[c]=d}},this)}a.set(this.cache,[p,k,l],o);return o}function h(b,c,d,e,f){if(!a.has(b,[d,"data"])){return{}}var h=d==="masterPage"?c:["masterPage"];return g.call(this,b,c,h,d,e,f,null)}function i(){this.cache={};this.readingFromCache=true}i.prototype={getDataByQuery:h,clearCache:function(){this.cache={}},setReadingFromCache:function(a){this.readingFromCache=Boolean(a)}};return i});define("siteUtils/core/pagesUrlUtils",["lodash","coreUtils","experiment"],function(a,b,c){"use strict";function d(c){if(a.has(c,["publicModel","pageList"])){return a(c.publicModel.pageList.pages).indexBy(function d(e){return a.get(c,["urlFormatModel","pageIdToResolvedUriSEO",e.pageId,"curr"])||a.get(e,"pageUriSEO")||b.siteConstants.DEFAULT_PAGE_URI_SEO}).mapValues("pageId").value()}return{}}function e(b){return a.zipObject(b,a.times(b.length,a.constant(true)))}function f(a){var d=a.urlFormatModel||{};if(c.isOpen("urlFormat")){d.format=b.siteConstants.URL_FORMATS.SLASH}else{d.format=d.format||b.siteConstants.URL_FORMATS.HASH_BANG}d.forbiddenPageUriSEOs=e(d.forbiddenPageUriSEOs||[]);d.pageIdToResolvedUriSEO=d.pageIdToResolvedUriSEO||{};a.urlFormatModel=d}function g(b,c){return a.map(b.topology,function(a){return a.baseUrl+a.parts.replace("{filename}",c)})}function h(b,c){var d=a.find(b.pages,{pageId:c});if(d){return g(b,d.pageJsonFileName)}}function i(a){return g(a,a.masterPageJsonFileName)}return{ensureUrlFormatModel:f,getMapFromPageUriSeoToPageId:d,getPageURLs:h,getMasterPageURLs:i}});define("siteUtils/core/constants",[],function(){"use strict";return{VIEW_MODES:{DESKTOP:"DESKTOP",MOBILE:"MOBILE"},DATA_TYPES:{data:"data",prop:"props",design:"design",theme:"style",behaviors:"behaviors",connections:"connections"},COMP_DATA_QUERY_KEYS:{data:"dataQuery",prop:"propertyQuery",design:"designQuery",behaviors:"behaviorQuery",connections:"connectionQuery"},ACTION_TYPES:{CLICK:"click",DBL_CLICK:"dblclick",MOUSE_IN:"mouseenter",MOUSE_OUT:"mouseleave",CHANGE:"change",BLUR:"blur",FOCUS:"focus",IMAGE_CHANGED:"imageChanged",IMAGE_EXPANDED:"imageExpanded",ITEM_CLICKED:"itemClicked",CELL_SELECT:"cellSelect",CELL_EDIT:"cellEdit",ROW_SELECT:"rowSelect",AUTOPLAY_OFF:"autoplayOff",AUTOPLAY_ON:"autoplayOn",KEY_PRESS:"keyPress",SCREEN_IN:"screenIn",SCROLL:"scroll",VALIDATE:"validate"},BASE_PROPS_SCHEMA_TYPE:"DefaultProperties",COMP_IDS:{PAGE_GROUP:"SITE_PAGES",PAGES_CONTAINER:"PAGES_CONTAINER",HEADER:"SITE_HEADER",FOOTER:"SITE_FOOTER",BACKGROUND:"SITE_BACKGROUND"},POPUP:{POPUP_OVERLAY_CONTAINER:{STYLE_ID:"strc1",SKINPART_ID:"popupOverlayContainer",COMPONENT_TYPE:"wysiwyg.viewer.components.StripContainer",SKIN:"wysiwyg.viewer.skins.stripContainer.DefaultStripContainer",TYPE:"StripContainer"},POPUP_CONTAINER:{COMPONENT_TYPE:"wysiwyg.viewer.components.PopupContainer"}},ACTIVE_ANCHOR:{DELAY_TO_END_SCROLL:50},CURRENT_CONTEXT:"CURRENT_CONTEXT",ANCHORS:{LOCK_THRESHOLD:70,LOCK_CONDITION:{ALWAYS:"always",NEVER:"never",THRESHOLD:"threshold"}}}});define("siteUtils/core/browserFlags",[],function(){"use strict";return{create:function(a){var b=a.os;var c=a.browser;return{highlightAnchorsInMenu:!(b.ipad&&c.chrome),fixedSiteBackground:!b.tablet&&!b.phone||b.ipad&&c.safari||(c.ie||c.edge)&&b.tablet,animateRevealScrubAction:c.ie||c.edge||c.firefox,animateParallaxScrubAction:c.edge,animateTinyMenuIcon:!(c.safari&&b.mac),preserve3DParallaxScrubAction:!(c.safari&&c.version>=9||c.firefox),fixedBackgroundColorBalata:c.chrome,forceOverflowScroll:b.iphone,shouldDisableSmoothScrolling:c.chrome||c.edge}}}});define("siteUtils/core/SiteData",["lodash","dataFixer","coreUtils","siteUtils/core/MobileDeviceAnalyzer","siteUtils/core/menuUtils","siteUtils/core/browserDetection","wixUrlParser","siteUtils/core/dataResolver","siteUtils/core/pagesUrlUtils","siteUtils/core/constants","siteUtils/core/browserFlags","experiment"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m="masterPage";function n(b){return a.get(this,["publicModel","sessionInfo",b])}function o(b,c){if(this.publicModel){a.set(this.publicModel,["sessionInfo",b],c)}}function p(e){if(!e){return}if(e.wixData){b.deprecatedSiteModelMigrater(e)}i.ensureUrlFormatModel(e);this.currentUrl={};this._currentRootInfos={};this._currentPageIds={primaryPage:null,popupPage:null};this.customUrlMapping={};a.assign(this,e);this.siteId=this.siteId||this.rendererModel&&this.rendererModel.siteInfo.siteId;var g=this.requestModel&&this.requestModel.userAgent;var j=f(g);var k=a.assign({},this.requestModel,e.publicModel&&e.publicModel.deviceInfo);this._isMobileView=e.forceMobileView;this._isTabletDevice=undefined;this.pagesData=this.pagesData||{};this.editorData={generated:{},generatedVersion:{}};this.textRuntimeLayout={overallBorders:{}};this.mapFromPageUriSeoToPageId=i.getMapFromPageUriSeoToPageId(e);this.dockedRuntimeLayout={};this.deletedPagesMap={};this.dataResolver=new h;this.orphanPermanentDataNodes=[];this.mobile=new d(k);this.browser=j.browser;this.os=j.os;this.wixBiSession=e.wixBiSession||{};this.svgShapes=e.svgShapes||{};this.activeModes={};this.prefetchPages=[];if(l.isOpen("sv_dpages")){this.routersRendererIndex=0}this.reLayoutedCompsMap={};this.renderFlags=this.renderFlags||{};a.defaults(this.renderFlags,{isPlayingAllowed:true,isZoomAllowed:true,isSocialInteractionAllowed:true,siteTransformScale:1,isExternalNavigationAllowed:true,isBackToTopButtonAllowed:true,isWixAdsAllowed:true,isSlideShowGalleryClickAllowed:true,isTinyMenuOpenAllowed:true,renderFixedPositionContainers:true,isPageProtectionEnabled:this.isViewerMode(),isSiteMembersDialogsOpenAllowed:true,allowSiteOverflow:true,shouldResetGalleryToOriginalState:false,shouldResetComponent:true,extraSiteHeight:0,siteScale:1,shouldUpdateJsonFromMeasureMap:true,componentViewMode:"preview",allowShowingFixedComponents:true,componentPreviewStates:{},renderMobileActionMenu:!c.urlUtils.isQueryParamOn(this.currentUrl,"hideMobileActionBar"),initWixCode:this.isViewerMode()});this.failedRequests=[];this.renderRealtimeConfig={};this._svQueue=[];this.compStates={};this.widgetsStore={};this.imageCssCache={};this.onImageUnmount=this.onImageUnmount.bind(this);this.getMediaFullStaticUrl=this.getMediaFullStaticUrl.bind(this)}p.prototype={setStore:function(a){this.store=a;if(this.dataResolver){this.store.registerDataLoadedCallback(this.dataResolver.clearCache.bind(this.dataResolver))}},dataTypes:{PROPERTIES:"component_properties",DATA:"document_data",THEME:"theme_data",DESIGN:"design_data",BEHAVIORS:"behaviors_data",CONNECTIONS:"connections_data"},WIX_ADS_ID:"WIX_ADS",MASTER_PAGE_ID:m,setRootNavigationInfo:function(a,b){var c=a.pageId;var d=c!==this._currentPageIds.primaryPage&&c!==this._currentPageIds.popupPage;var e=this.isPopupPage(c);var f=!!a.routerDefinition;if(b){if(!e){this._currentPageIds.primaryPage=null}this._currentPageIds.popupPage=null}this._currentRootInfos[c]=a;if(l.isOpen("sv_dpages")&&f){this._currentRootInfos[c].routersRendererIndex=a.pageAdditionalData+this.routersRendererIndex;this.routersRendererIndex++}if(!e){this._currentRootInfos[m]=a;this._currentPageIds.primaryPage=a.pageId}else{this._currentPageIds.popupPage=a.pageId}if(d){this.dataResolver.clearCache()}},addPrefetchPages:function(b){this.prefetchPages=a.union(this.prefetchPages,b)},getPrefetchPages:function(){return this.prefetchPages},getExistingRootNavigationInfo:function(b){return this._currentRootInfos[b]?a.omit(this._currentRootInfos[b],"transition"):undefined},getExistingRootNavigationInfoWithTransitionInfo:function(a){return this._currentRootInfos[a]},getPrimaryPageId:function(){return this._currentPageIds.primaryPage},getCurrentUrlPageId:function(){return this.getPrimaryPageId()},getFocusedRootId:function(){return this._currentPageIds.popupPage||this._currentPageIds.primaryPage},getAllPossiblyRenderedRoots:function(){var a=[this.MASTER_PAGE_ID,this.getPrimaryPageId()];if(this.isPopupOpened()){a.push(this.getCurrentPopupId())}return a},getRenderedRootsUnderMasterPage:function(){return a.reject(this.getAllPossiblyRenderedRoots(),this.isPopupPage,this)},getDataForCopy:function(){var b=a.clone(this);delete b.store;return b},isMobileView:function(){if(a.isUndefined(this._isMobileView)&&this.getMasterPageData()){if(c.dataUtils.isMobileStructureExist(this.getMasterPageData())){var b=a(this.currentUrl.query).keys().find(function(a){return a.toLowerCase()==="showmobileview"});if(b){this._isMobileView=this.currentUrl.query[b]==="true"}else{this._isMobileView=this.mobile.isMobileDevice()&&(this.rendererModel.siteMetaData&&this.rendererModel.siteMetaData.adaptiveMobileOn)}}else{this._isMobileView=false}}return this._isMobileView},isMobileDevice:function(){if(a.isUndefined(this._isMobileDevice)){this._isMobileDevice=this.mobile.isMobileDevice()}return this._isMobileDevice},browserFlags:function(){if(!this._browserFlags){this._browserFlags=k.create(a.pick(this,["os","browser"]))}return this._browserFlags},forceLandingPage:function(a){return a.query&&a.query.forceLandingPage},isTabletDevice:function(){if(a.isUndefined(this._isTabletDevice)){this._isTabletDevice=this.os&&this.os.tablet&&!this.browser.ie||this.mobile.isTabletDevice()}return this._isTabletDevice},isTouchDevice:function(){return this.isTabletDevice()||this.isMobileDevice()},setMobileView:function(a){this._isMobileView=a},getAllTheme:function(){return this.getMasterPageData().data.theme_data},getGeneralTheme:function(){return this.getMasterPageData().data.theme_data.THEME_DATA},getFontsMap:function(){return this.getGeneralTheme().font},getFont:function(a){var b=a.split("_")[1];return this.getGeneralTheme().font[b]},getColor:function(a){var b=a.split("_")[1];return this.getGeneralTheme().color[b]||a},getColorsMap:function(){return this.getGeneralTheme().color},getMasterPageData:function(){return this.pagesData.masterPage},getPageData:function(a){return this.pagesData[a]},getServiceTopologyProperty:function(a){return this.serviceTopology[a]},getStaticMediaUrl:function(){return this.serviceTopology.staticMediaUrl},getStaticVideoUrl:function(){return this.serviceTopology.staticVideoUrl},getStaticVideoHeadRequestUrl:function(){return this.serviceTopology.staticVideoHeadRequestUrl},getMetaSiteId:function(){return this.rendererModel.metaSiteId},getMediaFullStaticUrl:function(a){return c.urlUtils.getMediaUrlByContext(a,this.getStaticMediaUrl(),this.serviceTopology.mediaRootUrl)},getStaticThemeUrlWeb:function(){var a=this.serviceTopology.scriptsLocationMap;return a&&a.skins&&a.skins+"/images/wysiwyg/core/themes"},isPremiumDomain:function(){return a.includes(this.rendererModel.premiumFeatures,"HasDomain")},isPremiumUser:function(){return!a.isEmpty(this.rendererModel.premiumFeatures)},isAdFreePremiumUser:function(){return a.includes(this.rendererModel.premiumFeatures||[],"AdsFree")},getClientSpecMap:function(){return this.rendererModel.clientSpecMap},getClientSpecMapEntry:function(a){return this.rendererModel.clientSpecMap[a]},getClientSpecMapEntriesByType:function(b){return a.where(this.rendererModel.clientSpecMap,{type:b})},getClientSpecMapEntryByAppDefinitionId:function(b){
return a.find(this.rendererModel.clientSpecMap,{appDefinitionId:b})},getSMToken:function(){var a=this.getClientSpecMapEntriesByType("sitemembers")[0]||{};return a.smtoken},getSvSession:function(){return n.call(this,"svSession")},getCTToken:function(){return n.call(this,"ctToken")},setCTToken:function(a){o.call(this,"ctToken",a)},subSvSession:function(a,b){var c=this.getSvSession();if(c||b){a(c)}else{this._svQueue.push(a)}},pubSvSession:function(a){o.call(this,"svSession",a);this._svQueue.forEach(function(b){b(a)});this._svQueue.length=0},getUserId:function(){return this.siteHeader.userId},getSiteMetaData:function(){return this.rendererModel.siteMetaData},getSiteStructure:function(){return this.getDataByQuery(this.getStructureCompId())},getLanguageCode:function(){return this.rendererModel.languageCode},isPageLandingPage:function(a){var b=this.getDataByQuery(a);if(this.forceLandingPage(this.currentUrl)){return true}return b&&b.isLandingPage},getStructureCompId:function(){return"masterPage"},getBodyClientWidth:function(){return document.body.clientWidth},getBodyClientHeight:function(){return document.body.clientHeight},getScreenWidth:function(){if(!this.screenSize){this.updateScreenSize()}return this.screenSize.width},getScreenHeight:function(){if(!this.screenSize){this.updateScreenSize()}return this.screenSize.height},getScreenSize:function(){if(!this.screenSize){this.updateScreenSize()}return this.screenSize},updateScreenSize:function(a){this.screenSize=a||{width:this.isMobileView()?320:this.getBodyClientWidth(),height:this.getBodyClientHeight()}},getSiteX:function(){if(this.isMobileView()||this.isMobileDevice()){return 0}return Math.min(parseInt(Math.floor((this.getSiteWidth()-this.getScreenWidth())/2),10),0)},getSiteWidth:function(){if(this.isMobileView()){return 320}else if(this.isFacebookSite()){return 520}var b=this.getSiteStructure();return a.get(b,"renderModifiers.siteWidth",980)},isFacebookSite:function(){return this.rendererModel.siteInfo.applicationType==="HtmlFacebook"},clearCache:function(){this.dataResolver.clearCache()},onImageUnmount:function(a){if(this.imageResizeHandlers){delete this.imageResizeHandlers[a]}if(this.imageCssCache){delete this.imageCssCache[a]}},getDataByQuery:function(a,b,c){b=b||"masterPage";c=c||this.dataTypes.DATA;var d=[this.getPrimaryPageId()];if(this.isPopupOpened()){d.push(this.getCurrentPopupId())}return this.dataResolver.getDataByQuery(this.pagesData,d,b,c,a)},isRootIgnoreBottomBottom:function(b){return b&&a.get(this.pagesData,["masterPage","data","document_data",b,"ignoreBottomBottomAnchors"])},resolveData:function(a,b,c){return this.getDataByQuery(a,b,c)},findDataOnMasterPageByPredicate:function(b){return a.find(this.getMasterPageData().data.document_data,b)},getPageMinHeight:function(){return this.isMobileView()?200:500},getDynamicPageTitle:function(b){return a.chain(this.pageResponseForUrl).find({pageId:b}).get("title").value()},getCurrentUrlPageTitle:function(){var a=this.rendererModel.siteInfo.siteTitleSEO||"";var b=this.getCurrentUrlPageId();var c=this.getDataByQuery(b);var d=c.title||"";var e=c.pageTitleSEO||"";var f=this.isHomePage(b);var g=this.getDynamicPageTitle(b);if(g){a=g}else if(e){a=e}else if(!f){a=a+" | "+d}return a},isHomePage:function(a){return a&&a===this.getMainPageId()},getPagesDataItems:function(){var b=this.getAllPageIds();var c=a.map(b,function(a){return this.getDataByQuery(a)},this);return c},isDebugMode:function(){return a.get(this,["currentUrl","query","debug"])==="all"},getFavicon:function(){return this.publicModel&&this.publicModel.favicon},getDocumentLocation:function(){return document.location},getExternalBaseUrl:function(){var a=this;this.getExternalBaseUrl=this.isViewerMode()?function(){return this.publicModel.externalBaseUrl}:function(){var b=7;var d=c.urlUtils.getBaseUrlWithPath(a.getDocumentLocation(),b);return function(){return d}}();return this.getExternalBaseUrl()},getUnicodeExternalBaseUrl:function(){return this.publicModel&&this.publicModel.unicodeExternalBaseUrl},getMainPageId:function(){if(this.publicModel){return this.publicModel.pageList.mainPageId}var a=this.getDataByQuery("masterPage","masterPage");return a.mainPage.id||a.mainPageId||"mainPage"},getAllPageIds:function(){if(this.publicModel){return a.map(this.publicModel.pageList.pages,"pageId")}return a.keys(a.omit(this.pagesData,["masterPage"]))},getPageTitle:function(b){if(this.publicModel){var c=a.get(this.publicModel,["pageList","pages"]);return a.get(a.find(c,{pageId:b}),"title")}return a.get(this.getDataByQuery(b),"title")},getPageSEOMetaData:function(b){var c={};b=this.getCurrentUrlPageId()||b;if(!b||b==="masterPage"){b=this.getMainPageId()}var d=this.getDataByQuery(b);if(d){c.description=d.descriptionSEO;c.keywords=d.metaKeywordsSEO;c.ogTags=d.metaOgTags;if(l.isOpen("sv_addRobotsIndexingMetaTag")){var e=a.get(d,"indexable",true);c.robotIndex=e?"index":"noindex"}}return c},getBrowser:function(){return this.browser},getOs:function(){return this.os},getHubSecurityToken:function(){return n.call(this,"hs")||"NO_HS"},setHubSecurityToken:function(a){o.call(this,"hs",a)},getPageUsedFonts:function(a){var b=this.getDataByQuery(a);return b.usedFonts},setPageUsedFonts:function(a,b){var c=this.getDataByQuery(a);c.usedFonts=b},getPremiumFeatures:function(){return this.rendererModel.premiumFeatures},isViewerMode:function(){return!a.isUndefined(this.publicModel)},isTemplate:function(){return this.rendererModel.siteInfo.documentType==="Template"},shouldShowWixAds:function(){var b=this.rendererModel.siteInfo.documentType;var c=b==="Template"&&!this.rendererModel.previewMode;var d=a.includes(this.rendererModel.premiumFeatures,"NoAdsInSocialSites");return this.renderFlags.isWixAdsAllowed&&!this.isAdFreePremiumUser()&&b!=="WixSite"&&!c&&(!this.isFacebookSite()||!d)},getMobileWixAdsHeight:function(){if(this.isMobileView()&&this.shouldShowWixAds()){return 30}return 0},getPageBottomMargin:function(){return this.isMobileView()||!this.shouldShowWixAds()?0:40},isWixSite:function(){return this.rendererModel.siteInfo.documentType==="WixSite"},isUsingUrlFormat:function(a){return this.getUrlFormat()===a},getUrlFormat:function(){if(this.urlFormatModel&&this.urlFormatModel.format){return this.urlFormatModel.format}return c.siteConstants.URL_FORMATS.HASH_BANG},isImageZoom:function(a){return a.imageZoom},getPageUrl:function(b,d,e,f,h){var i=this.isUsingUrlFormat(c.siteConstants.URL_FORMATS.HASH_BANG)?c.siteConstants.URL_FORMATS.HASH_BANG:d;return g.getUrl(this,a.assign({},b,{format:i}),false,a.isUndefined(f)?true:f,e,h)},getCurrentUrl:function(a,b,c){var d=this.getExistingRootNavigationInfo(this.getCurrentUrlPageId());return this.getPageUrl(d,a,b,undefined,c?this.customUrlMapping:undefined)},getMainPageUrl:function(a,b){return this.getPageUrl({pageId:this.getMainPageId()},a,b)},getMainPagePath:function(){var a=this.getMainPageUrl(this.getUrlFormat());var b=this.currentUrl.protocol+"//"+this.currentUrl.host;return a.replace(b,"")},getForbiddenPageUriSEOs:function(){if(this.urlFormatModel&&this.urlFormatModel.forbiddenPageUriSEOs){return this.urlFormatModel.forbiddenPageUriSEOs}return{}},getPageIdFromPageUriSeo:function(b){return a.get(this.mapFromPageUriSeoToPageId,b)},getGlobalImageQuality:function(){return a.pick(this.getDataByQuery(c.siteConstants.GLOBAL_IMAGE_QUALITY),c.siteConstants.GLOBAL_IMAGE_QUALITY_PROPERTIES)},getCurrentPopupId:function(){return this._currentPageIds.popupPage},getRootNavigationInfo:function(){var a=this.getPrimaryPageId();return this.getExistingRootNavigationInfo(a)},isPopupPage:function(a){var b;if(a==="masterPage"){return false}b=this.getDataByQuery(a);return Boolean(b&&b.isPopup)},isPopupOpened:function(){return Boolean(this.getCurrentPopupId())},getViewMode:function(){return this.isMobileView()?j.VIEW_MODES.MOBILE:j.VIEW_MODES.DESKTOP},isFeedbackEndpoint:function(){return!this.isViewerMode()&&a.startsWith(this.currentUrl.path,"/html/editor/review")},getPublicBaseUrl:function(){var a=!!this.documentServicesModel;var b=a?this.documentServicesModel.isPublished:true;if(a){return b?this.documentServicesModel.publicUrl:""}return this.getExternalBaseUrl()},getPagesDataForRmi:function(){var b=!!this.documentServicesModel;var c=b?this.documentServicesModel.isPublished:true;var d=function(a,b){return{title:a.label||"",fullUrl:c?this.getPageUrl({pageId:a.link.pageId.id,title:a.label},null,b,false):"",url:"/"+a.link.pageId.pageUriSEO,visible:a.isVisible,id:a.link.pageId.id}};var f={pagesData:{},currentPageId:this.getPrimaryPageId(),baseUrl:""};f.baseUrl=this.getPublicBaseUrl();var g=e.getSiteMenuWithoutRenderedLinks(this,true);f.pagesData=a.map(g,function(b){var c=d.call(this,b,f.baseUrl);var e=b.items;a.forEach(e,function(a){var b=d.call(this,a,f.baseUrl);if(!c.childPages){c.childPages=[]}c.childPages.push(b)},this);return c},this);return f},setCustomUrlMapping:function(a,b){this.customUrlMapping[a]=b},addDynamicPageData:function(a,b,c){if(!this.dynamicPageData){this.dynamicPageData={}}if(!this.dynamicPageData[a]){this.dynamicPageData[a]={}}this.dynamicPageData[a]={routerData:b,routerDefinition:c}},getDynamicPageData:function(a){if(this.dynamicPageData){return this.dynamicPageData[a||this.getPrimaryPageId()]}return null},addDynamicResponseForUrl:function(b,c){a.set(this,"pageResponseForUrl["+b+"]",c)},getDynamicResponseForUrl:function(b){return a.get(this,"pageResponseForUrl["+b+"]")},getRouters:function(){return a.get(this,"rendererModel.routers.configMap")},isQaMode:function(){return c.urlUtils.isQueryParamOn(this.currentUrl,"isqa")}};return p});define("siteUtils/core/pageRequests",["lodash","coreUtils","loggingUtils","dataFixer","siteUtils/core/pagesUrlUtils","experiment"],function(a,b,c,d,e,f){"use strict";var g="masterPage";function h(b,c){return a.some(b.failedRequests,function(b){var d=b.destination;return a.size(d)===2&&d[0]==="pagesData"&&d[1]===c})}function i(a,b){c.logger.reportBI(a,c.bi.errors.ALL_PAGE_RETRIEVAL_ATTEMPTS_FAILED,{pageId:b})}function j(a,b){var c=e.getMasterPageURLs(b);return p(a,c,g,b)}function k(b,c){return function(e){return d.fix(e,a.pluck(c.pages,"pageId"),b.requestModel,b.currentUrl,b.urlFormatModel,b.isViewerMode())}}function l(a,b,c){if(a.currentUrl&&a.currentUrl.query.fakePage){var d=a.currentUrl.query.fakePage;return{urls:[a.santaBase+"/static/fakePages/"+d+".json"],destination:["pagesData",c],transformFunc:k(a,b)}}var f=e.getPageURLs(b,c);if(!f){c=b.mainPageId;f=e.getPageURLs(b,b.mainPageId)}return p(a,f,c,b)}var m=typeof document!=="undefined"&&document.location.protocol==="https:";var n=/http:\/\/[a-z]+\.[a-z]+\.com\//;var o="//static.wixstatic.com/";function p(d,e,g,h){if(m){e[0]=e[0].replace(n,o)}var i={urls:e,destination:["pagesData",g],isValidResponse:function(b){return a.isObject(b)},transformFunc:k(d,h),error:function(){d.failedRequests.push(this)},onUrlRequestFailure:function(a,e){var f=b.urlUtils.parseUrl(a);c.logger.reportBI(d,c.bi.errors.SINGLE_PAGE_RETRIEVAL_ATTEMPT_FAILED,{pageId:g,hostname:f.hostname,url:a,responseStatusCode:e})}};if(f.isOpen("pageRequestTimeout")){a.merge(i,{maxTimeouts:1,requestTimeout:2e3,ontimeout:function(){c.logger.reportBeatEvent(d,"reset",g)}})}return i}function q(c,d,e){if(!c.publicModel){return[]}var k=[];var m=c.publicModel.pageList;if(h(c,g)){i(c,g)}else if(!d.pagesData[g]){k.push(j(c,m))}var n=a.isArray(e)?e:[e];a.forEach(n,function(a){if(a.pageId){if(f.isOpen("sv_dpages")&&b.errorPages.isErrorPage(a.pageId)){k.push(p(c,b.errorPages.getJSONS(a.pageId),a.pageId,m))}else if(h(c,a.pageId)){i(c,a.pageId)}else if(s(c,a)){k.push(p(c,a.jsonUrls,a.pageId,m))}else if(!r(c,a)&&!d.pagesData[a.pageId]){k.push(l(c,m,a.pageId))}}});return k}function r(b,c){var d=a.get(b,"rendererModel.passwordProtectedPages",[]);return a.includes(d,c.pageId)}function s(b,c){var d=a.find(b.publicModel.pageList.pages,{pageId:c.pageId});return!a.isEmpty(c.jsonUrls)&&a.isEmpty(a.get(d,"urls"))}return q});define("siteUtils/core/componentsAnchorsMetaData",["siteUtils/core/constants","experiment"],function(a,b){"use strict";return{default:{to:{allow:true},from:{allow:true,lock:a.ANCHORS.LOCK_CONDITION.THRESHOLD}},"wysiwyg.viewer.components.Column":{to:{allow:true},from:{allow:false,lock:a.ANCHORS.LOCK_CONDITION.NEVER}},"wysiwyg.viewer.components.PageGroup":{to:{allow:true},from:{allow:true,lock:a.ANCHORS.LOCK_CONDITION.ALWAYS}},"mobile.core.components.Page":{to:{allow:true},from:{allow:false,lock:a.ANCHORS.LOCK_CONDITION.NEVER}},"wysiwyg.viewer.components.PagesContainer":{to:{allow:true},from:{allow:true,lock:b.isOpen("viewerGeneratedAnchors")?a.ANCHORS.LOCK_CONDITION.THRESHOLD:a.ANCHORS.LOCK_CONDITION.ALWAYS}},"wysiwyg.viewer.components.PopupContainer":{to:{allow:true},from:{allow:false}},"wysiwyg.viewer.components.SiteSegmentContainer":{to:{allow:true},from:{allow:true,lock:a.ANCHORS.LOCK_CONDITION.ALWAYS}},"wysiwyg.viewer.components.WSiteStructure":{to:{allow:true,distance:0},from:{allow:false,lock:a.ANCHORS.LOCK_CONDITION.NEVER}},"wysiwyg.viewer.components.tpapps.TPASection":{to:{allow:true},from:{allow:true,lock:a.ANCHORS.LOCK_CONDITION.NEVER}},"wysiwyg.viewer.components.tpapps.TPAMultiSection":{to:{allow:true},from:{allow:true,lock:a.ANCHORS.LOCK_CONDITION.NEVER}},"wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton":{from:{allow:false}},"wysiwyg.viewer.components.tpapps.TPAGluedWidget":{from:{allow:false}},"wixapps.integration.components.AppPage":{from:{allow:false}},"platform.components.AppController":{to:{allow:false},from:{allow:false}}}});define("siteUtils/core/layoutUtils",["lodash","coreUtils"],function(a,b){"use strict";function c(a){return a&&a.docked&&(a.docked.vCenter||a.docked.bottom||a.docked.top)}function d(a){return a&&a.docked&&(a.docked.hCenter||a.docked.left||a.docked.right)}function e(a,b){return parseFloat((b/a).toFixed(5))}function f(b){return!a.isUndefined(b.aspectRatio)}function g(a,b){return Boolean(a&&a.docked&&a.docked[b])}function h(a,b){return a&&a.docked&&a.docked[b]}function i(a){return h(a,"vCenter")}function j(a){return h(a,"top")}function k(a){return h(a,"bottom")}function l(a){return Boolean(a&&a.docked&&(a.docked.bottom&&a.docked.top))}function m(b){return a.has(b,["docked","vCenter"])}function n(b){return a.has(b,["docked","bottom","vh"])&&a.has(b,["docked","top","vh"])}function o(b){return a.has(b,["docked","left","vw"])&&a.has(b,["docked","right","vw"])}function p(a){return n(a)||o(a)}function q(a){return a&&a.docked&&(a.docked.left&&a.docked.right)}function r(a,b,c){return a&&Math.max(b,Math.min(c,a))}function s(){return{top:"",bottom:"",left:"",right:"",width:"",height:"",position:""}}function t(a,e,f,g,h,i){var j=s();j.position=a&&a.position||"absolute";if(a){if(!d(a)){j.left=a.x}if(!c(a)){j.top=a.y}if(!l(a)){j.height=r(a.height,b.siteConstants.COMP_SIZE.MIN_HEIGHT,b.siteConstants.COMP_SIZE.MAX_HEIGHT)}if(!q(a)){j.width=r(a.width,b.siteConstants.COMP_SIZE.MIN_WIDTH,b.siteConstants.COMP_SIZE.MAX_WIDTH)}if(a.fixedPosition){j.position="fixed"}if(a.rotationInDegrees){var k=b.style.getPrefixedTransform();j[k]="rotate("+a.rotationInDegrees+"deg) translateZ(0)"}if(a.docked){b.dockUtils.applyDockedStyle(a,j,e,f,g,h,i)}}return j}function u(a,c,d){var e=c[d.id];return b.boundingLayout.getBoundingLayout({x:e.offsetLeft,y:e.offsetTop,width:y(a.width[d.id],e.offsetWidth),height:y(a.height[d.id],e.offsetHeight),rotationInDegrees:d.layout.rotationInDegrees})}function v(b,c,d,e,f){return a(d).reject({layout:{fixedPosition:true}}).filter(function(a){return!!c[a.id]}).reduce(function(a,d){var g=u(b,c,d);var h=f+g.y;var i=h+g.height;var j=e?v(b,c,d.components,e,h):i;return Math.max(a,i,j)},0)}function w(a,b){return a.isMobileView()?b.structure.mobileComponents:b.structure.components}function x(a,b,c,d){return v(a,b,w(c,d),false,0)}function y(b,c){return a.isNumber(b)?b:c}function z(a,b,c){return y(a.width["ROOT_"+b],c)}function A(a,b,c){return y(a.left["ROOT_"+b],-c)}function B(a,b){var c=a-b;return{left:Math.floor(Math.min(0,.5*c)),width:Math.floor(Math.max(a,b))}}return{isDockToScreen:p,isVerticallyDocked:c,isDockedToDirection:g,getDockToDirection:h,getTopDockData:j,getBottomDockData:k,getVerticallyCenteredDockData:i,isVerticallyStretched:l,isVerticallyCentered:m,isVerticallyStretchedToScreen:n,isHorizontallyDocked:d,isHorizontallyStretched:q,isAspectRatioOn:f,calcAspectRatio:e,getStyle:t,getRootLeft:A,getRootWidth:z,getPageBottomChildEnd:x,stretchInCenteredContainer:B}});define("siteUtils/core/skinAnchorsMetaData",["lodash"],function(a){"use strict";var b={"wysiwyg.viewer.skins.area.BubbleArea":30,"wysiwyg.viewer.skins.area.BubbleLeftArea":30,"wysiwyg.viewer.skins.area.RibbonAreaSkin":function(b){var c=a.get(b,"style.properties");var d=10;if(c){d+=parseInt(c.els,10)||0}return d},"wysiwyg.viewer.skins.area.SloopyArea":6,"wysiwyg.viewer.skins.area.BubbleAreaLeft":10,"wysiwyg.viewer.skins.area.LeftTriangleArea":5,"wysiwyg.viewer.skins.area.RightTriangleArea":5,"wysiwyg.viewer.skins.area.BubbleAreaRight":10,"wysiwyg.viewer.skins.page.SloopyPageSkin":3,"wysiwyg.viewer.skins.page.BasicPageSkin":20,"wysiwyg.viewer.skins.page.LiftedBottomPageSkin":20,"wysiwyg.viewer.skins.page.LiftedTopPageSkin":20,"wysiwyg.viewer.skins.page.BorderPageSkin":20,"wysiwyg.viewer.skins.page.LiftedShadowPageSkin":20,"wysiwyg.viewer.skins.page.ShinyIPageSkin":20};function c(c,d){if(a.isFunction(b[c])){return b[c](d)}return b[c]||0}return{getNonAnchorableHeightForSkin:c}});define("siteUtils/core/anchorsGenerator",["lodash","experiment","siteUtils/core/constants","coreUtils","siteUtils/core/layoutUtils","siteUtils/core/skinAnchorsMetaData","siteUtils/core/componentsAnchorsMetaData"],function(a,b,c,d,e,f,g){"use strict";var h=["BACK_TO_TOP_BUTTON"];var i=["PAGES_CONTAINER"];var j=["SITE_HEADER","SITE_FOOTER","PAGES_CONTAINER"];var k=["Page","Document"];var l=["wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StripContainerSlideShow"];var m,n;var o={bottomTop:"BOTTOM_TOP",bottomParent:"BOTTOM_PARENT",topTop:"TOP_TOP"};var p="parentNode";function q(a,b){var c=d.boundingLayout.getBoundingY(b);var e=c+d.boundingLayout.getBoundingHeight(b);var f=d.boundingLayout.getBoundingY(a);var g=d.boundingLayout.getBoundingHeight(a);var h=f+g;var i=f+g/2;return e>h&&c>i}function r(a,b,c){var e=a.layout;var f=b.layout;var g=d.boundingLayout.getBoundingY(f);var h=g-d.boundingLayout.getBoundingY(e)-d.boundingLayout.getBoundingHeight(e);var i=c?0:g;v(o.bottomTop,a.componentType,a.id,b.id,h,i)}function s(a,b){var c=a.layout;var e=b.layout;var f=d.boundingLayout.getBoundingY(e)-d.boundingLayout.getBoundingY(c);v(o.topTop,a.componentType,a.id,b.id,f,d.boundingLayout.getBoundingY(e))}function t(b,e){if(e.id==="masterPage"||e.id===c.COMP_IDS.PAGES_CONTAINER){return v(o.bottomParent,b.componentType,b.id,e.id,0,0)}var g;var h=e.layout;var i=e.styleId&&e.styleId.replace("#","");var j=n[i];var m=j&&j.skin||e.skin;var p=b.layout;var q=d.boundingLayout.getBoundingY(p);var r=d.boundingLayout.getBoundingHeight(p);var s=h.height-f.getNonAnchorableHeightForSkin(m,j);var t=a.includes(k,e.type)||a.includes(l,e.componentType);var u=s;g=t?0:s-(q+r);return v(o.bottomParent,b.componentType,b.id,e.id,g,u)}function u(a,b,c,d){return{distance:0,locked:true,originalValue:d,fromComp:b,targetComponent:c,type:a}}function v(a,b,c,d,e,f){var g=u(a,c,d,f);g.distance=e;g.locked=w(a,b,e);var h=m[c];h.push(g)}function w(a,b,d){if(a===o.topTop){return true}var e=g[b]||g.default;if(e.from.lock===c.ANCHORS.LOCK_CONDITION.NEVER){return false}if(e.from.lock===c.ANCHORS.LOCK_CONDITION.ALWAYS){return true}return d<=c.ANCHORS.LOCK_THRESHOLD}function x(c){if(b.isOpen("layout_verbs_with_anchors")){return a.includes(j,c.id)||!(a.includes(h,c.id)||c.layout.fixedPosition||e.isVerticallyCentered(c.layout)||e.isVerticallyStretched(c.layout)&&!e.isVerticallyStretchedToScreen(c.layout))}return a.includes(j,c.id)||!(a.includes(h,c.id)||c.layout.fixedPosition||e.isVerticallyDocked(c.layout))}function y(b,c){return a(b).map(function(b){return a.map(c[b],"target")}).flatten().value()}function z(b){var c=y(i,b);var d={};while(c.length){var e=c.shift();d[e]=true;var f=a(b[e]).map("target").reject(function(b){return a.has(d,b)}).value();c=c.concat(f)}return d}function A(b,c,d){var e=z(b);a.forEach(b,function(b,f){if(!b.length){return}var g=c[f];a.forEach(b,function(a){if(a.target===p){t(g,d);return}var b=c[a.target];if(a.type===o.bottomTop){r(g,b,e[b.id])}else{s(g,b)}})})}function B(b,c){m={};var e={};var f=d.dataUtils.getChildrenData(b,c);if(a.isEmpty(f)){return m}if(C(f)){f=E(b,f,c)}a.forEach(f,function(a){e[a.id]=a;m[a.id]=[]});var g=a.filter(f,x);var h=M(g,e);A(h,e,b);return m}function C(b){var c=a.find(b,{id:"SITE_HEADER"});if(!c){return false}var d=a.find(b,{id:"PAGES_CONTAINER"});return d.layout.y<c.layout.y+c.layout.height}function D(b){return a.find(b.layout.anchors,{targetComponent:"PAGES_CONTAINER",type:o.bottomTop})}function E(a,b,c){if(a.layout.anchors){return F(a,b,c)}return G(b)}function F(b,c,e){var f=a.clone(c);var g=a.find(c,{id:"SITE_HEADER"});var h=a.find(c,{id:"SITE_FOOTER"});var i=H(b,e);var j=i+d.boundingLayout.getBoundingY(g.layout)+d.boundingLayout.getBoundingHeight(g.layout);var k=a.findIndex(c,{id:"PAGES_CONTAINER"});var l=c[k];var m=a.assign({},l.layout,{y:j,height:h.layout.y-j});f[k]=a.assign({},l,{layout:m});return f}function G(b){var c=a.clone(b);var e=a.find(b,{id:"SITE_FOOTER"});var f=a.max(b,function(a){if(D(a)){return d.boundingLayout.getBoundingY(a.layout)+d.boundingLayout.getBoundingHeight(a.layout)}return-1e4});if(!f||!D(f)){return c}var g=a.find(f.layout.anchors,{targetComponent:"PAGES_CONTAINER",type:o.bottomTop});var h=d.boundingLayout.getBoundingY(f.layout)+d.boundingLayout.getBoundingHeight(f.layout);var i=g.distance+h;var j=a.findIndex(b,{id:"PAGES_CONTAINER"});var k=b[j];var l=a.assign({},k.layout,{y:i,height:e.layout.y-i});c[j]=a.assign({},k,{layout:l});return c}function H(b,c){return c?0:a.get(b,"layout.anchors.0.distance")}function I(b,c){var d=[];a.forEach(b,function(b,e){var f=a(c[e]).filter({type:o.bottomTop}).map("source").value();d=d.concat(f)});a.forEach(d,function(a){delete b[a]})}function J(b,c){return a.omit(b,function(b,d){return a.some(c[d],{type:o.bottomTop})})}function K(c){if(c.componentType){var d=a.get(g,[c.componentType,"to","allow"]);if(d===false){return false}}if(b.isOpen("layout_verbs_with_anchors")){return!e.isDockedToDirection(c.layout,"top")||e.isVerticallyStretchedToScreen(c.layout)}return true}function L(c){if(c.componentType){var d=a.get(g,[c.componentType,"from","allow"]);if(d===false){return false}}if(b.isOpen("layout_verbs_with_anchors")){return!e.isDockedToDirection(c.layout,"bottom")||e.isVerticallyStretchedToScreen(c.layout)}return true}function M(b,c){var d={};var e={};var f=a.sortBy(b,"layout.y");var g={left:-1e5,right:Infinity,ids:["root"]};f=N(f);d.root=[];var h=[g];var i,j,k,l;function m(b,c){if(a.isEmpty(c)){return}if(b.id===p){c=J(c,d)}else{I(c,e)}a.forEach(c,function(a,c){d[c].push({target:b.id,type:a});e[b.id].push({source:c,type:a})})}a.forEach(f,function(b){d[b.id]=[];e[b.id]=[];i=b.layout.x;j=i+b.layout.width;k=null;l=0;var f=K(b);var g=L(b);var n=h.length;var p=[];var q={};var r=[];var s,t,u;function v(a){if(a==="root"){q[a]=o.bottomTop}else{q[a]=O(c[a],b)}}for(u=0;u<n;u++){var w=h[u];if(w.right<=i){p.push(w);continue}if(k===null){k=u;s=true}else{s=false}if(h.length-1===u||h[u+1].left>j){l=u;t=true}if(f){a.forEach(w.ids,v)}if(g){r=Q(b.id,r,w,q,s,t,i,j,f)}if(t){break}}delete q.root;m(b,q);if(g){var x=a.takeRight(h,n-l-1);h=a.compact(p).concat(r,x)}});delete d.root;return d}function N(a){var b={layout:{x:-1e5,y:Infinity,height:10,width:Infinity},id:p};return a.concat(b)}function O(a,b){var c=q(a.layout,b.layout);return c?o.bottomTop:o.topTop}function P(a,c){if(!b.isOpen("layout_verbs_with_anchors")){return a===o.topTop}return!c||a===o.topTop}function Q(b,c,d,e,f,g,h,i,j){var k=a.clone(c);if(f){k.push({ids:d.ids,left:d.left,right:h-1})}var l={ids:[b],left:Math.max(h,d.left),right:Math.min(i,d.right)};a.forEach(d.ids,function(a){if(P(e[a],j)){l.ids.push(a)}});var m=a.last(k);if(m&&!a.isEqual(m.ids,l.ids)){k.push(l)}else if(m){m.right=l.right}if(g){k.push({ids:d.ids,left:i+1,right:d.right})}return k}function R(b,c,e){var f=[b];var g,h,i;var j={};while(f.length){g=f.pop();i=S(g,c,e);a.assign(j,i);h=d.dataUtils.getChildrenData(g,e);Array.prototype.push.apply(f,h)}return j}function S(a,b,c){n=b;return B(a,c)}function T(b,c,d,e,f){var g=false;var h=e-d;if(h<0){return false}a.forEach(b,function(b){if(b.locked&&(b.type===o.bottomTop||b.type===o.bottomParent)){var d=a.get(f,[b.type,b.targetComponent]);var e=d+h;if(a.isNaN(e)){g=true;return}if(b.distance!==e){g=true;b.distance=e;b.originalValue=c+e;b.locked=w(b.type,null,e)}}});return g}return{createPageAnchors:R,createChildrenAnchors:S,packTextAnchors:T}});define("siteUtils/core/layoutAnchorsUtils",["lodash","experiment","siteUtils/core/anchorsGenerator","siteUtils/core/skinAnchorsMetaData"],function(a,b,c,d){"use strict";function e(b,c){var d;var e=b.type==="Document";if(e){d=c?"mobileComponents":"children"}else{d=c?"mobileComponents":"components"}return a.first(b[d])}function f(c,d,f){var g=f&&(!d&&c.isPagePackedDesktop||d&&c.isPagePackedMobile);var h=e(c,d);var i=!h||!a.get(h,"layout.anchors");if(b.isOpen("viewerGeneratedAnchors")){if(window.publicModel){return g||i}return i}return false}return{createPageAnchors:c.createPageAnchors,createChildrenAnchors:c.createChildrenAnchors,packTextAnchors:c.packTextAnchors,shouldCreateAnchorsForPage:f,getNonAnchorableHeightForSkin:d.getNonAnchorableHeightForSkin}});define("siteUtils/core/originalValuesMapGenerator",["lodash","coreUtils","siteUtils/core/skinAnchorsMetaData"],function(a,b,c){"use strict";function d(d,e,f){var g={};function h(d){var i=b.dataUtils.getChildrenData(d,f);var j={};if(d.layout){j.top=b.boundingLayout.getBoundingY(d.layout)}if(!a.isEmpty(i)){if(d.layout){var k=d.styleId&&d.styleId.replace("#","");var l=e[k];var m=l&&l.skin||d.skin;j.height=d.layout.height-c.getNonAnchorableHeightForSkin(m,l)}a.forEach(i,h)}g[d.id]=j}h(d);return g}return{createOriginalValuesMap:d}});define("siteUtils/core/modesUtils",["lodash","coreUtils"],function(a,b){"use strict";return{getActiveComponentModeIds:function(c,d){var e=a.pluck(d,"modeId");var f=a.pick(c,e);var g=f;var h=a.find(d,{type:b.siteConstants.COMP_MODES_TYPES.DEFAULT});if(a.isEmpty(f)&&h){g[h.modeId]=true}return g},getModeChanges:function(b,c){b=b||{};c=c||{};var d=a({}).assign(b,c).keys().value();return a.transform(d,function(a,d){var e=b[d];var f=c[d];if(e&&!f){a[d]=false}else if(!e&&f){a[d]=true}},{})}}});define("siteUtils/core/fullToDisplayedJson",["lodash","coreUtils","siteUtils/core/modesUtils"],function(a,b,c){"use strict";function d(b,c){var d=true;if(b){var e=!b.isHiddenByModes;var f=c&&!a.isUndefined(c.isHiddenByModes);d=f?!c.isHiddenByModes:e}return d}function e(b,c){b=b||{};return a.omit(b[c],function(a){return!a})}function f(b,c){return!a.isEmpty(c)&&a.every(b.modeIds,function(a){return c[a]})}function g(b,c){var d=a.transform(b,function(b,d){if(f(d,c)){a.assign(b,d)}},{});delete d.modeIds;return d}function h(a,b){var c=b&&a.mobileComponents?"mobileComponents":"children";return a[c]?c:"components"}function i(c,e,f){var j=h(e,f);var k=e.modes;var l=a.get(e,["modes","overrides"]);var m=g(l||[],c,e);if(!d(k,m)){return undefined}var n=b.objectUtils.cloneDeep(a.omit(e,["modes",j]));if(k){if(k.overrides){m=a.omit(m,"isHiddenByModes");a.assign(n,m)}if(k.definitions){a.set(n,["modes","definitions"],k.definitions)}}if(!a.isUndefined(e[j])){n[j]=a(e[j]).map(function(a){return i(c,a,f)}).compact().value()}return n}function j(c,d,e){var f=o(c,e,d);var g=b.objectUtils.cloneDeep(a.omit(c,"structure","data"));g.structure=i(f,c.structure,e);g.data=b.objectUtils.cloneDeep(c.data);return g}function k(b,c,d){c=c||{};var e={};a.forEach(b,function(a,b){e[b]=j(a,c,d)});return e}function l(b){return!a.isUndefined(b.structure)}function m(b){return a.get(b,"type")==="Document"}function n(b){return!a.isUndefined(b.componentType)}function o(b,c,d){var f=b.structure.id;var g=e(d,f);if(!b){return{}}return a.assign({},g,p(c,g,b.structure))}function p(d,e,f){var g=a.get(f,"modes.definitions");var h=c.getActiveComponentModeIds(e,g);var i=b.dataUtils.getChildrenData(f,d);return a.transform(i,function(b,c){a.assign(b,p(d,e,c))},h)}return{getDisplayedJson:function(a,c,d,e){var f={};if(a){if(n(a)||m(a)){if(!d){throw new Error("Full page is needed to create displayed json for non page component - for default modes collection")}var g=o(d,e,c);f.structure=i(g,a,e);f.data=b.objectUtils.cloneDeep(d.data)}else if(l(a)){f=j(a,c,e)}else{f=k(a,c,e)}}return f},applyModesOnSerializedStructure:function(a,b,c){b=b||{};return i(b,a,c)}}});define("siteUtils/core/positionAndSizeUtils",["lodash","coreUtils","siteUtils/core/layoutUtils"],function(a,b,c){"use strict";function d(d){function e(a,c,d,e){if(a.fixedPosition){return d.width}if(b.dockUtils.isHorizontalDockToScreen(a)){return Math.max(d.width,e)}return c.width}function f(a,c,d){if(a.fixedPosition||b.dockUtils.isVerticallyDockToScreen(a)){return d.height}return c.height}function g(a,b,c){var e=a&&a.pct&&a.pct/100*b||0;var f=a&&a.px||0;var g=a&&a.vw&&a.vw/100*c||0;var h=e+f+g;return d?Math.ceil(h):h}function h(a,b,c){var e=a.pct&&a.pct/100*b||0;var f=a.px||0;var g=a.vh&&a.vh/100*c||0;var h=e+f+g;return d?Math.ceil(h):h}function i(a,b,d,f){if(c.isHorizontallyStretched(a)){var h=e(a,b,d,f);var i=a.docked;var j=g(i.left,h,d.width);var k=g(i.right,h,d.width);return h-(j+k)}return a.width}function j(a,b,d,e){if(c.isAspectRatioOn(a)){e=e||i(a,b,d);return e*a.aspectRatio}if(c.isVerticallyStretched(a)){var g=f(a,b,d);var j=a.docked;var k=h(j.top,g,d.height);var l=h(j.bottom,g,d.height);return g-(k+l)}return a.height}function k(a,b){return Math.max((a-b)/2,0)}function l(c,d,f,h,j,l){var m=c.docked;if(m){var n=e(c,d,f,j);if(m.left){var o=g(m.left,n,f.width);if(b.dockUtils.isHorizontalDockToScreen(c)){var p=a.isUndefined(l)?k(f.width,j):l;o-=p}return o}h=h||i(c,d,f);if(m.right){var q=g(m.right,n,f.width);return n-(h+q)}if(m.hCenter){var r=g(m.hCenter,n,f.width);return(n-h)/2+r}}return c.x}function m(a,b,d,e){var g=a.docked;if(g){var i=f(a,b,d);if(c.isVerticallyStretchedToScreen(a)){return a.y}if(g.top){return h(g.top,i,d.height)}e=e||j(a,b,d);if(g.bottom){var k=h(g.bottom,i,d.height);return i-(e+k)}if(g.vCenter){var l=h(g.vCenter,i,d.height);return(i-e)/2+l}}return a.y}function n(b,c,d,e,f){if(!b.docked&&!b.aspectRatio){return a.pick(b,["x","y","width","height"])}var g=i(b,c,d,e);var h=j(b,c,d,g);return{x:l(b,c,d,g,e,f),y:m(b,c,d,h),width:g,height:h}}return{getYInPixels:m,getHeightInPixels:j,getPositionAndSize:n}}var e=d(false);var f=d(true);return{getYInPixelsRounded:f.getYInPixels,getHeightInPixelsRounded:f.getHeightInPixels,getPositionAndSizeRounded:f.getPositionAndSize,getYInPixels:e.getYInPixels,getHeightInPixels:e.getHeightInPixels,getPositionAndSize:e.getPositionAndSize}});define("siteUtils/core/structureDimensions",["lodash","siteUtils/core/positionAndSizeUtils"],function(a,b){"use strict";function c(b){var c={};c[b.id]=a.pick(b.layout,["x","y","width","height"]);return c}function d(c,e,f,g,h){var i=e[g];var j=c.components||c.children;a.forEach(j,function(a){e[a.id]=b.getPositionAndSize(a.layout,i,f,h);d(a,e,f,c.id,h)})}function e(a,b,e){var f=c(a);d(a,f,b,a.id,e);return f}function f(e,f,g){var h=c(e);var i=h[e.id];a.forEach(e.mobileComponents,function(a){h[a.id]=b.getPositionAndSize(a.layout,i,f,g);d(a,h,f,a.id,g)});return h}function g(a,b,c,d){return d?f(a,b,c):e(a,b,c)}return{createDimensionsMap:g}});define("siteUtils/core/socialCounterDatabaseAPI",["lodash","coreUtils"],function(a,b){"use strict";var c="likedBlogPosts";var d="http://blog-social-counters.wix.com/_api/blog-social-counters/";var e={defaultQuerySuccessCallback:function(){},defaultQueryCollectFailureCallback:function(){},getLikesForPostsList:function(a,c,e){var f={postsList:a};var g=d+"query-feed/";b.ajaxLibrary.ajax({type:"GET",url:g,crossDomain:true,
data:f,contentType:"application/json",dataType:"json",success:c||this.defaultQuerySuccessCallback,error:e||this.defaultQueryCollectFailureCallback})},getAllCountersForPost:function(a,c,e,f){var g={storeId:a,postId:c};var h=d+"query-post/";b.ajaxLibrary.ajax({type:"GET",url:h,crossDomain:true,data:g,contentType:"application/json",dataType:"json",success:e||this.defaultQuerySuccessCallback,error:f||this.defaultQueryCollectFailureCallback})},updateCounter:function(a,c,e,f,g,h){if(a==="like"||a==="unlike"){this.toggleUserLike(f)}var i={storeId:e.datastoreId,postId:f,counterType:a,counterName:c};var j=d+"collector/";b.ajaxLibrary.ajax({url:j,crossDomain:true,data:i,dataType:"json",contentType:"application/json",success:g||this.defaultQuerySuccessCallback,error:h||this.defaultQueryCollectFailureCallback})},updateCategoryTagSearchesCounter:function(a,b,c){this.updateCounter(a,b,c)},toggleUserLike:function(b){var d=JSON.parse(window.localStorage.getItem(c))||{};if(d[b]===false||!a.has(d,b)){d[b]=true}else{d[b]=false}window.localStorage.setItem(c,JSON.stringify(d))}};return{getAllCountersForPost:e.getAllCountersForPost,updateCounter:e.updateCounter,toggleUserLike:e.toggleUserLike,updateCategoryTagSearchesCounter:e.updateCategoryTagSearchesCounter}});define("siteUtils/core/socialShareHandler",["lodash","coreUtils","siteUtils/core/socialCounterDatabaseAPI"],function(a,b,c){"use strict";var d="https://plus.google.com/share?url=";var e="http://www.fancy.com/fancyit/fancy?ItemURL=";var f="http://pinterest.com/pin/create/button/?url=";var g="https://twitter.com/intent/tweet?url=";var h="http://www.facebook.com/sharer.php?u=";var i="whatsapp://send?text=";var j="https://www.googleapis.com/urlshortener/v1/url?key=AIzaSyDjvIfgLnQJsOxcV01kJae48WSynmXmZ2I";var k="https://www.linkedin.com/shareArticle?mini=true&url=";function l(b,c){var d=b.split("#");var e=a.includes(b,"?")?"&":"?";d[0]+=e+c;return d.join("#")}function m(a,b){var c=a;var d=c.split("#!");if(d.length>1){d[1]=decodeURIComponent(d[1]);c=d.join("#!")}if(b){c=c.replace("#!","/#!")}return encodeURIComponent(c)}function n(b){if(b){return encodeURIComponent(a.unescape(b))}return""}function o(b){if(b){return encodeURIComponent(a.unescape(b))}return""}function p(a){if(a){a=a.replace(/#/g,encodeURIComponent("#"));return" "+a}return""}function q(a,c){var d=a||"";if(a&&!b.urlUtils.isExternalUrl(a)){d=c.getMediaFullStaticUrl(a)}d=encodeURIComponent(d);return d}function r(a){var b=d;b+=m(a.url);return b}function s(a,b){var c=e;c+=m(a.url);c+="&Title="+n(a.title);c+="&ImageURL="+q(a.imageUrl,b);return c}function t(a,b){var c=f;c+=m(a.url);c+="&media="+q(a.imageUrl,b);c+="&description="+n(a.title);return c}function u(a){var b=g;b+=m(a.url);b+="&text="+n(a.title)+p(a.hashTags)+encodeURIComponent("\n");return b}function v(a){var b=h;b+=m(a.url);b+="&title="+n(a.title);b+="&description="+o(a.description);return b}function w(a){var b=i;b+=n(a.title);b+=" - "+m(a.url);return b}function x(a){var b=k;b+=m(a.url);b+="&title="+n(a.title);return b}function y(a){var b="mailto:?";b+="&subject="+n(a.title);b+="&body="+o(a.description);return b}function z(a,b){var c={google:r,fancy:s,pinterest:t,twitter:u,facebook:v,whatsapp:w,email:y,linkedin:x};return c[a.service](a,b)||""}function A(a,b,d){var e=z(a,b.getSiteData());if(a.addDeepLinkParam){e=l(e,"deeplink_referrer=socialB_"+a.service)}if(a.service==="email"){window.location.href=e;return}if(!d){c.updateCounter("shares",a.service,a.storeId,a.postId)}b.openPopup(e,"wixapps_share","width=635,height=346,scrollbars=no,status=no,toolbar=no,menubar=no,location=no")}function B(a,c,d,e){b.ajaxLibrary.ajax({url:j,type:"POST",contentType:"application/json",data:'{"longUrl": "'+a+'"}',timeout:c||0,async:false,success:function(a){d(a.id)},error:e})}return{handleShareRequest:A,shortenURL:B}});define("siteUtils/core/componentVisibility",["lodash"],function(a){"use strict";var b=[];function c(a){b.push(a)}function d(c){return a.every(b,function(a){return a(c)})}return{isComponentVisible:d,registerPlugin:c}});define("siteUtils/core/compAlignmentUtils",[],function(){"use strict";var a={LEFT:"left",CENTER:"center",RIGHT:"right"};var b={TOP:"top",CENTER:"center",BOTTOM:"bottom"};return{getLeft:function(b,c,d,e){var f;var g=Math.min(e,d);var h=(d-e)/2;switch(b.horizontalAlignment){case a.LEFT:f=-Math.max(0,h);f+=b.horizontalOffset;break;case a.RIGHT:f=g-c+Math.max(0,h);f-=b.horizontalOffset;break;case a.CENTER:f=(g-c)/2;f+=b.horizontalOffset;break}return f},getTop:function(a,c,d){var e;var f=d-c;switch(a.verticalAlignment){case b.TOP:e=a.verticalOffset;break;case b.BOTTOM:e=Math.max(f-a.verticalOffset,0);break;case b.CENTER:e=Math.max(f/2,0);e+=a.verticalOffset;break}return e}}});define("siteUtils",["siteUtils/utils/mobileUtils","siteUtils/core/MobileDeviceAnalyzer","siteUtils/core/browserDetection","siteUtils/core/SiteData","siteUtils/core/pageRequests","siteUtils/core/componentsAnchorsMetaData","siteUtils/core/layoutAnchorsUtils","siteUtils/core/originalValuesMapGenerator","siteUtils/core/constants","siteUtils/core/fullToDisplayedJson","siteUtils/core/modesUtils","siteUtils/core/linkRenderer","siteUtils/core/menuUtils","siteUtils/core/layoutUtils","siteUtils/core/positionAndSizeUtils","siteUtils/core/structureDimensions","siteUtils/core/socialShareHandler","siteUtils/core/socialCounterDatabaseAPI","siteUtils/core/componentVisibility","siteUtils/core/compAlignmentUtils"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){"use strict";var u={mobileUtils:a,MobileDeviceAnalyzer:b,browserDetection:c,SiteData:d,pageRequests:e,componentsAnchorsMetaData:f,layoutAnchors:g,originalValuesMapGenerator:h,constants:i,fullToDisplayedJson:j,modes:k,linkRenderer:l,menuUtils:m,layout:n,positionAndSize:o,structureDimensions:p,socialShareHandler:q,socialCounterDatabaseAPI:r,componentVisibility:{isComponentVisible:s.isComponentVisible,registerPlugin:s.registerPlugin},compAlignmentUtils:t};return u});