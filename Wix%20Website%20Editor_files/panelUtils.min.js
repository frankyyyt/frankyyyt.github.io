define("panelUtils/mixins/linkColorPickerMixin",["react","lodash"],function(a,b){"use strict";function c(a){if(a){return{top:a.top+72+"px",left:a.left-12+"px"}}return null}function d(a,b){if(b){return b}var d=c(a);return d||{top:null,left:null}}return{contextTypes:{panelMeasures:a.PropTypes.object},componentDidMount:function(){if(!b.isFunction(this.getEditorAPI)){throw new Error("You must use editorAPIMixin to use the linkStyleMixin")}},componentWillUpdate:function(a,c,e){var f=this.context.panelMeasures&&this.context.panelMeasures.designPanel;var g=e.panelMeasures&&e.panelMeasures.designPanel;if(f&&g&&!b.isEqual(f,g)){var h=d(g);this.getEditorAPI().panelManager.updatePanelProps("panels.toolPanels.colorPicker.colorPickerPanel",{top:h.top,left:h.left})}},openColorPicker:function(a,b,c,e,f,g,h){var i=this.getEditorAPI();var j=this.context.panelMeasures&&this.context.panelMeasures.designPanel;var k=d(j,e);i.panelManager.openPanel("panels.toolPanels.colorPicker.colorPickerPanel",{value:b,onChange:a,onClose:h,siteCustomColors:i.theme.colors.getCustomUsedInSkins(),sessionStorage:i.userPreferences.session,history:g!==false?i.history:null,palettePresets:c?i.theme.colors.getColorPresets():null,updateSitePalette:c?this.updateSitePalette:null,previewOnHover:f,top:k.top,left:k.left},true)},updateSitePalette:function(a){var b=this.getEditorAPI();b.theme.colors.update(a)},resolveColor:function(a){return this.getEditorAPI().theme.colors.render(a)}}});define("panelUtils/mixins/linkStyleMixin",["lodash","styles"],function(a,b){"use strict";var c=b.advancedStyle.styleUtil;var d=b.advancedStyle.advancedStyleDataUtil;var e=["TEXT_COLOR","COLOR","BG_COLOR","BORDER_COLOR"];function f(b,d){var e=this.getEditorAPI();var f=d.style;var g=c.getStyleForSkin(e,b,this.cachedStylePropertiesForSkins[b]);c.mergeSharedProperties(e,g.properties,f.properties,b,d.skin);var h=a.cloneDeep(d);a.assign(h.style,g);h.skin=b;return h}function g(b){return a.includes(e,b)}function h(b,d,e,f,g){var h=a.cloneDeep(b);var i=h.style;if(typeof e==="object"){i.properties[d]=e.value;if(i.propertiesSource){i.propertiesSource[d]=e.source}}else{i.properties[d]=e;if(i.propertiesSource){i.propertiesSource[d]=c.getPropertySource(e)}}this.getEditorAPI().theme.styles.update(h.id,h,g);if(this.isMounted()){this.setState({styleDataItem:h})}}function i(a){return this.getEditorAPI().theme.styles.get(a)}function j(b,c,e){var f=c.style.properties[e];return a.isUndefined(f)?d.getSkinParamDefaultValue(b,c.skin,e):f}return{componentDidMount:function(){if(!a.isFunction(this.getEditorAPI)){throw new Error("You must use editorAPIMixin to use the linkStyleMixin")}},componentWillReceiveProps:function(a){if(a.styleId!==this.state.styleId){this.setState({styleId:a.styleId,styleDataItem:i.call(this,a.styleId)})}},getInitialState:function(){this.cachedStylePropertiesForSkins={};return{styleId:this.props.styleId,styleDataItem:i.call(this,this.props.styleId)}},linkStyleParam:function(b,c,d){if(a.includes(c,"COLOR_ALPHA")){return this.linkColorAlphaWithMutator(b,d)}var e=this.state.styleDataItem;var f=this.getEditorAPI();var i=j(f,e,b);return{value:i,requestChange:function(a){h.call(this,this.state.styleDataItem,b,a,d||"active",g(c))}.bind(this)}},linkColorAlphaWithMutator:function(a,b){var c="alpha-"+a;var d=this.state.styleDataItem;var e=this.getEditorAPI();var f=j(e,d,c);var g=j(e,d,a);return{value:{color:g,alpha:f},requestChange:function(d){var f=d.alpha;var g=d.color;if(j(e,this.state.styleDataItem,c)!==f){h.call(this,this.state.styleDataItem,c,f,b)}else{h.call(this,this.state.styleDataItem,a,g,b)}}.bind(this)}},cacheStylePropertiesForSkin:function(a,b){this.cachedStylePropertiesForSkins[a]=b},changeSkin:function(a){var b=this.getEditorAPI().theme.styles.get(this.props.styleId);if(a===b.skin){return}var c=f.call(this,a,b);this.cacheStylePropertiesForSkin(b.skin,b.style.properties);this.getEditorAPI().theme.styles.update(this.props.styleId,c);this.setState({styleDataItem:c})}}});define("panelUtils",["panelUtils/mixins/linkColorPickerMixin","panelUtils/mixins/linkStyleMixin"],function(a,b){"use strict";return{linkColorPickerMixin:a,linkStyleMixin:b}});