define("dataFixer/helpers/CompsMigrationHelper",["lodash","coreUtils"],function(a,b){"use strict";function c(a){this.migrationMap=a}c.prototype.getComponentData=function(a,b){return b.dataQuery&&a.data.document_data[b.dataQuery.replace("#","")]};c.prototype.setComponentData=function(c,d,e,f){var g=d.dataQuery||a.get(f,[d.id,"dataQuery"])||b.guidUtils.getUniqueId("dataItem","-");g=g.replace("#","");d.dataQuery="#"+g;e.id=g;c.data.document_data[g]=e;a.set(f,[d.id,"dataQuery"],g)};c.prototype.deleteComponentData=function(a,b){var c=b.dataQuery&&b.dataQuery.replace("#","");if(c&&a.data.document_data[c]){delete a.data.document_data[c]}};c.prototype.getComponentDesignData=function(a,b){return b.designQuery&&a.data.design_data[b.designQuery.replace("#","")]};c.prototype.deleteComponentDesignData=function(a,b){var c=b.designQuery&&b.designQuery.replace("#","");if(c&&a.data.design_data[c]){delete a.data.design_data[c]}};c.prototype.getComponentProperties=function(a,b){return b.propertyQuery&&a.data.component_properties[b.propertyQuery.replace("#","")]};c.prototype.deleteComponentProperties=function(a,b){var c=b.propertyQuery&&b.propertyQuery.replace("#","");if(c&&a.data.component_properties[c]){delete a.data.component_properties[c]}if(b.propertyQuery){delete b.propertyQuery}};c.prototype.setComponentDesignData=function(c,d,e,f){var g=d.designQuery||a.get(f,[d.id,"designQuery"])||b.guidUtils.getUniqueId("dataItem","-");g=g.replace("#","");d.designQuery="#"+g;e.id=g;if(a.isObject(e.background)){var h=a.clone(e.background);h.id=(h.id||b.guidUtils.getUniqueId("dataItem","-")).replace("#","");e.background="#"+h.id;c.data.design_data[h.id]=h}c.data.design_data[g]=e;a.set(f,[d.id,"designQuery"],d.designQuery)};c.prototype.setComponentProperties=function(c,d,e,f){var g=d.propertyQuery||a.get(f,[d.id,"propertyQuery"])||b.guidUtils.getUniqueId("propItem","-");g=g.replace("#","");d.propertyQuery=g;e.id=g;c.data.component_properties[g]=e;a.set(f,[d.id,"propertyQuery"],g)};c.prototype.migrateComps=function(b,c,d,e){a.forEach(e,function(a){if(this.migrationMap[a.componentType]){this.migrationMap[a.componentType].call(this,b,c,d,a)}this.migrateComps(b,c,d,a.components)},this)};c.prototype.migratePage=function(a){var b=a.structure;if(b){var c={};var d=b.components||b.children;var e=b.mobileComponents;if(d){this.migrateComps(a,c,false,d)}if(e){this.migrateComps(a,c,true,e)}}};return c});define("dataFixer/maps/galleryTypes",[],function(){"use strict";return{"wysiwyg.viewer.components.MatrixGallery":{propType:"MatrixGalleryProperties"},"wysiwyg.viewer.components.PaginatedGridGallery":{propType:"PaginatedGridGalleryProperties"},"wysiwyg.viewer.components.SliderGallery":{propType:"SliderGalleryProperties"},"wysiwyg.viewer.components.SlideShowGallery":{propType:"SlideShowGalleryProperties"},"tpa.viewer.components.Masonry":{propType:"MasonryProperties"},"tpa.viewer.components.Accordion":{propType:"AccordionProperties"},"tpa.viewer.components.Impress":{propType:"ImpressProperties"},"tpa.viewer.components.Freestyle":{propType:"FreestyleProperties"},"tpa.viewer.components.Collage":{propType:"CollageProperties"},"tpa.viewer.components.Honeycomb":{propType:"HoneycombProperties"},"tpa.viewer.components.StripShowcase":{propType:"StripShowcaseProperties"},"tpa.viewer.components.StripSlideshow":{propType:"StripSlideshowProperties"},"tpa.viewer.components.Thumbnails":{propType:"ThumbnailsProperties"},"wysiwyg.viewer.components.tpapps.TPA3DGallery":{propType:"SlideShowGalleryProperties"},"wysiwyg.viewer.components.tpapps.TPA3DCarousel":{propType:"SlideShowGalleryProperties"}}});define("dataFixer/plugins/galleriesMobileTypeFixer",["lodash","dataFixer/helpers/CompsMigrationHelper","dataFixer/maps/galleryTypes"],function(a,b,c){"use strict";function d(a,b,d,e){if(!d){b[e.id]=e;return}var f=b[e.id];if(f.componentType===e.componentType){return}var g=f.componentType;e.componentType=g;var h=this.getComponentProperties(a,e);var i=c[g].propType;if(g&&(!h||h.type!==i)){e.propertyQuery=f.propertyQuery}}return{exec:function(e){var f=a.mapValues(c,function(){return d});var g=new b(f);g.migratePage(e)}}});define("dataFixer/plugins/pageTopFixer",[],function(){"use strict";return{exec:function(a){a.structure=a.structure||{};a.structure.layout=a.structure.layout||{};a.structure.layout.y=0}}});define("dataFixer/helpers/runOnAllCompsRecursively",["lodash"],function(a){"use strict";function b(c,d){a.forEach(c,function(c){a.forEach(d,function(a){a(c)});if(c.components){b(c.components,d)}})}return b});define("dataFixer/plugins/masterPageFixer",["lodash","dataFixer/helpers/runOnAllCompsRecursively"],function(a,b){"use strict";function c(a){if(a.SITE_STRUCTURE){a.masterPage=a.SITE_STRUCTURE}if(!a.masterPage){a.masterPage={}}a.masterPage.id="masterPage";delete a.SITE_STRUCTURE}function d(b){return a.get(b,"layout.width")===0}function e(b){return a.get(b,"layout.height")===0}function f(b){if(d(b)){a.set(b,"layout.width",100)}if(e(b)){a.set(b,"layout.height",100)}}function g(b){a.forEach(b,function(b){a.forEach(a.get(b,"layout.anchors"),function(a){switch(b.id){case"SITE_FOOTER":if(a.type==="BOTTOM_PARENT"){a.distance=0}break;case"PAGES_CONTAINER":if(a.type==="BOTTOM_TOP"&&a.locked&&a.distance>=70){a.originalValue=0;a.locked=false}break}})})}function h(c,g){var h=false;a.forEach(["SITE_HEADER","SITE_FOOTER"],function(b){var f=a.find(c,{id:b});if(d(f)){h=true}if(e(f)){a.set(f,"layout.height",100);h=true}a.set(f,"layout.width",g)});if(h){var i=a.reject(c,{id:"PAGES_CONTAINER"});b(i,[f])}}function i(b,c){var d=b.children;var e=b.mobileComponents;var f=a.get(c,"masterPage.renderModifiers.siteWidth",980);k(d);h(d,f);k(e);h(e,320);g(e)}var j=[{componentType:"wysiwyg.viewer.components.PagesContainer",id:"PAGES_CONTAINER"},{componentType:"wysiwyg.viewer.components.FooterContainer",id:"SITE_FOOTER"},{componentType:"wysiwyg.viewer.components.HeaderContainer",id:"SITE_HEADER"}];function k(b){a.forEach(j,function(c){var d=a.find(b,"id",c.id);if(!d){var e=a.find(b,"componentType",c.componentType);if(e){e.id=c.id}}})}var l={exec:function(a){if(a.structure&&a.structure.type==="Document"){a.structure.id="masterPage";c(a.data.document_data);i(a.structure,a.data.document_data)}return a}};return l});define("dataFixer/plugins/menuFixer",["lodash"],function(a){"use strict";function b(b){var c=b.MAIN_MENU;var d=[];a.forEach(c.items,function(a){d.push(a.refId);if(a.items&&a.items.length>0){for(var b=0;b<a.items.length;b++){d.push(a.items[b].refId)}}});return d}function c(b,c){var d=b.items[c];if(d.items&&d.items.length>0){a.forEach(d.items,function(a,c){b.items.push(a);delete d.items[c]})}d.items=[];b.items.splice(c,1)}function d(b,c){var d={};a.find(b.items,function(b,e){d.topIndex=e;return a.find(b.items,function(a,b){if(a.refId===c){d.subIndex=b;return true}})});return d}function e(b,e){var f=a.findIndex(b.items,{refId:e});if(f>=0){c(b,f)}else{var g=d(b,e);b.items[g.topIndex].items.splice(g.subIndex,1)}}function f(b,c){var d=b.MAIN_MENU;a.forEach(c,function(a){if(!a){e(d,a)}});a.pull(c,"",undefined)}function g(b,c,d){a.forEach(c,function(c){if(!a.includes(d,c.slice(1))){e(b.MAIN_MENU,c)}})}function h(b,c,d){var e=b.MAIN_MENU;var f=e.items.length===0;var g=!!b.CUSTOM_MAIN_MENU;if(g){if(!f){delete b.CUSTOM_MAIN_MENU;delete b.CUSTOM_MENUS}else{return}}a.forEach(d,function(b){if(!a.includes(c,"#"+b)){c.push("#"+b);var d={items:[],refId:"#"+b};e.items.push(d)}})}function i(b,c){if(b&&b.mainPage&&!a.includes(c,b.mainPage.slice(1))){b.mainPage="#"+c[0]}}function j(a){var b=!!a.CUSTOM_MAIN_MENU;if(b){var c=a.CUSTOM_MAIN_MENU.items;for(var d=0;d<c.length;d++){if(!a[c[d].replace("#","")]){delete a.CUSTOM_MAIN_MENU;delete a.CUSTOM_MENUS;return}}}}function k(b){return a.get(b,"structure.type")==="Document"}var l={exec:function(a,c){var d=a.data.document_data;if(k(a)&&!a.data.document_data.MAIN_MENU){a.data.document_data.MAIN_MENU={items:[],type:"Menu",id:"MAIN_MENU",metaData:{}}}if(d.MAIN_MENU&&c){var e=b(d);j(d);f(d,e);g(d,e,c);h(d,e,c);var l=d.masterPage;i(l,c)}}};return l});define("dataFixer/plugins/verticalMenuFixer",["lodash","coreUtils"],function(a,b){"use strict";var c=false;var d={};var e=0;var f=[];var g=["wysiwyg.common.components.verticalmenu.viewer.skins.VerticalMenuSeparatedButtonFixedWidthSkin","wysiwyg.common.components.verticalmenu.viewer.skins.VerticalMenuSeparatedButtonSkin","wysiwyg.common.components.verticalmenu.viewer.skins.VerticalMenuSolidColorSkin"];var h=["wysiwyg.common.components.verticalmenu.viewer.skins.VerticalMenuSeparatedButtonFixedWidthSkin","wysiwyg.common.components.verticalmenu.viewer.skins.VerticalMenuSeparatedButtonSkin"];function i(a){return!!a.data.theme_data.THEME_DATA}function j(a){d=a.data.theme_data}function k(b){var c=b.data.document_data;var d=c.CUSTOM_MAIN_MENU||{items:[]};e=a.filter(d.items,function(a){return c[a.replace("#","")].isVisible}).length}function l(a,b,c,d){var e=o(a,b);b.layout.height=d;e.originalHeight=c}function m(b,c){var d=o(b,c);return!a.isUndefined(d.originalHeight)}function n(a,b){return b.componentType==="wysiwyg.common.components.verticalmenu.viewer.VerticalMenu"&&!m(a,b)}function o(a,b){return a.data.component_properties[b.propertyQuery.replace("#","")]}function p(a,b){return a.data.theme_data[b.styleId]||d[b.styleId]}function q(c,d){var f=p(c,d);if(!f){b.log.error("cannot find style")}var i=parseInt(f.style.properties.sepw||f.style.properties.separatorHeight||0,10);var j=a.includes(g,f.skin);var k=a.includes(h,f.skin);var m=d.layout.height;var n=b.verticalMenuCalculations.getFixedHeight(m,i,j,k,e);l(c,d,m,n)}function r(b,c){a.forEach(c,function(a){if(n(b,a)){q(b,a)}if(a.components){r(b,a.components)}})}function s(a){var b=a.structure;if(!b){return}if(b.components){r(a,b.components)}if(b.mobileComponents){r(a,b.mobileComponents)}if(b.children){r(a,b.children)}}var t={exec:function(a){if(i(a)){j(a);k(a);c=true;while(f.length>0){s(f.pop())}return}if(c){s(a)}else{f.push(a)}}};return t});define("dataFixer/plugins/skinFixer",["lodash","experiment"],function(a,b){"use strict";var c={"mobile.core.skins.InlineSkin":"skins.core.VerySimpleSkin","mobile.core.skins.TwitterTweetSkin":"skins.core.TwitterTweetSkin","mobile.core.skins.ButtonSkin":"skins.core.ButtonSkin","mobile.core.skins.ContactItemSkin":"skins.core.ContactItemSkin","mobile.core.skins.ContactListSkin":"skins.core.ContactListSkin","mobile.core.skins.FacebookCommentSkin":"skins.core.FacebookCommentSkin","mobile.core.skins.GlobalMenuSkin":"skins.core.GlobalMenuSkin","mobile.core.skins.GooglePlusOneSkin":"skins.core.GooglePlusOneSkin","mobile.core.skins.HeaderSkin":"skins.core.HeaderSkin","mobile.core.skins.HomeButtonSkin":"skins.core.HomeButtonSkin","mobile.core.skins.ImageNewSkin":"skins.core.ImageNewSkin","mobile.core.skins.ImageSkin":"skins.core.ImageSkin","mobile.core.skins.MenuButtonSkin":"skins.core.MenuButtonSkin","mobile.core.skins.NetworkItemSkin":"skins.core.NetworkItemSkin","mobile.core.skins.NetworkListSkin":"skins.core.NetworkListSkin","mobile.core.skins.PageTitleSkin":"skins.core.PageTitleSkin","mobile.core.skins.PhotoFullScreenSkin":"skins.core.PhotoFullScreenSkin","mobile.core.skins.PhotoGalleryFullScreenDefaultSkin":"skins.core.PhotoGalleryFullScreenDefaultSkin","mobile.core.skins.PhotoGalleryGridDefaultSkin":"skins.core.PhotoGalleryGridDefaultSkin","mobile.core.skins.PhotoSkin":"skins.core.PhotoSkin","mobile.core.skins.RichTextImageSkin":"skins.core.RichTextImageSkin","mobile.core.skins.RichTextSkin":"skins.core.RichTextSkin","mobile.core.skins.ServiceItemSkin":"skins.core.ServiceItemSkin","mobile.core.skins.ServiceListSkin":"skins.core.ServiceListSkin","mobile.core.skins.SimpleButtonSkin":"skins.core.SimpleButtonSkin","mobile.core.skins.SiteNavigationMenuSkin":"skins.core.SiteNavigationMenuSkin","mobile.core.skins.TwitterFollowSkin":"skins.core.TwitterFollowSkin","mobile.core.skins.FacebookLikeSkin":"skins.core.FacebookLikeSkin","skins.viewer.gallerymatrix.PolaroidCustomHeightSkin":"wysiwyg.viewer.skins.gallerymatrix.PolaroidCustomHeightSkin","skins.viewer.gallerymatrix.PolaroidDisplayerCustomHeightSkin":"wysiwyg.viewer.skins.gallerymatrix.PolaroidDisplayerCustomHeightSkin","skins.viewer.gallerymatrix.TextBottomCustomHeightSkin":"wysiwyg.viewer.skins.gallerymatrix.TextBottomCustomHeightSkin","skins.viewer.gallerymatrix.TextBottomDisplayerCustomHeightSkin":"wysiwyg.viewer.skins.gallerymatrix.TextBottomDisplayerCustomHeightSkin","skins.viewer.galleryslider.SliderGalleryScotchTapeSkin":"wysiwyg.viewer.skins.galleryslider.SliderGalleryScotchTapeSkin","skins.viewer.galleryslider.SliderGalleryIronSkin":"wysiwyg.viewer.skins.galleryslider.SliderGalleryIronSkin","skins.viewer.galleryslider.SliderDisplayerIronSkin":"wysiwyg.viewer.skins.galleryslider.SliderDisplayerIronSkin","skins.viewer.galleryslider.SliderDisplayerScotchTapeSkin":"wysiwyg.viewer.skins.galleryslider.SliderDisplayerScotchTapeSkin","wysiwyg.viewer.skins.gallerymatrix.MatrixGallerySeparateTextBoxSkin":"wysiwyg.common.components.matrixgallery.viewer.skins.MatrixGallerySeparateTextBoxSkin","wysiwyg.viewer.skins.gallerymatrix.MatrixGalleryTextOnCenterSkin":"wysiwyg.common.components.matrixgallery.viewer.skins.MatrixGalleryTextOnCenterSkin","wysiwyg.viewer.skins.dropmenu.TextOnlyMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.TextOnlyMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.TextSeparatorsMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.TextSeparatorsMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SolidColorMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SolidColorMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.ShinyMenuINSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIButtonSkin","wysiwyg.viewer.skins.dropmenu.ShinyMenuIINSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIIButtonSkin","wysiwyg.viewer.skins.dropmenu.OverlineMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.OverlineMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SeparateBasicMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateBasicMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SeparateShinyIMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SeparateShinyIIMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIIMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.LinesMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.LinesMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SeparateLinesMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateLinesMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.PointerMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.PointerMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.RibbonsMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.RibbonsMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.VerticalRibbonsMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.VerticalRibbonsMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.IndentedMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.IndentedMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SeparateIndentedMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateIndentedMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.ArrowRightMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ArrowRightMenuButtonSkin","wysiwyg.viewer.skins.dropmenu.SloppyBorderMenuNSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SloppyBorderMenuButtonSkin","wysiwyg.viewer.skins.menu.ShinyMenuISkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIIButtonSkin","wysiwyg.viewer.skins.menu.ShinyMenuIISkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ShinyMenuIIButtonSkin","wysiwyg.viewer.skins.menu.TextOnlyMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.TextOnlyMenuButtonBgFixSkin","wysiwyg.viewer.skins.menu.TextSeparatorsMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.TextSeparatorsMenuButtonSkin","wysiwyg.viewer.skins.menu.SolidColorMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SolidColorMenuButtonSkin","wysiwyg.viewer.skins.menu.OverlineMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.OverlineMenuButtonHorizontalMenuAdaptationSkin","wysiwyg.viewer.skins.menu.SeparateBasicMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateBasicMenuButtonSkin","wysiwyg.viewer.skins.menu.SeparateShinyIMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIMenuButtonSkin","wysiwyg.viewer.skins.menu.SeparateShinyIIMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateShinyIIMenuButtonBorderRadiusFixSkin","wysiwyg.viewer.skins.menu.LinesMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.LinesMenuButtonBorderRadiusFixSkin","wysiwyg.viewer.skins.menu.SeparateLinesMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateLinesMenuButtonHorizontalMenuAdaptationSkin","wysiwyg.viewer.skins.menu.PointerMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.PointerMenuButtonHorizontalMenuAdaptationSkin","wysiwyg.viewer.skins.menu.RibbonsMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.RibbonsMenuButtonSkin","wysiwyg.viewer.skins.menu.IndentedMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.IndentedMenuButtonSkin","wysiwyg.viewer.skins.menu.SeparateIndentedMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SeparateIndentedMenuButtonSkin","wysiwyg.viewer.skins.menu.ArrowRightMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.ArrowRightMenuButtonSkin","wysiwyg.viewer.skins.menu.SloppyBorderMenuSkin":"wysiwyg.common.components.dropdownmenu.viewer.skins.SloppyBorderMenuButtonSkin","tpa.viewer.skins.TPAMasonrySkin":"wysiwyg.viewer.skins.TPAMasonrySkin","tpa.viewer.skins.TPA3DCarouselSkin":"wysiwyg.viewer.skins.TPA3DCarouselSkin","tpa.viewer.skins.TPA3DGallerySkin":"wysiwyg.viewer.skins.TPA3DGallerySkin","tpa.viewer.skins.TPAAccordionSkin":"wysiwyg.viewer.skins.TPAAccordionSkin","tpa.viewer.skins.TPACollageSkin":"wysiwyg.viewer.skins.TPACollageSkin","tpa.viewer.skins.TPAEcomGallerySkin":"wysiwyg.viewer.skins.TPAEcomGallerySkin","tpa.viewer.skins.TPAFreestyleSkin":"wysiwyg.viewer.skins.TPAFreestyleSkin","tpa.viewer.skins.TPAHoneycombSkin":"wysiwyg.viewer.skins.TPAHoneycombSkin","tpa.viewer.skins.TPAImpressSkin":"wysiwyg.viewer.skins.TPAImpressSkin","tpa.viewer.skins.TPAStripShowcaseSkin":"wysiwyg.viewer.skins.TPAStripShowcaseSkin","tpa.viewer.skins.TPAStripSlideshowSkin":"wysiwyg.viewer.skins.TPAStripSlideshowSkin","tpa.viewer.skins.TPAThumbnailsSkin":"wysiwyg.viewer.skins.TPAThumbnailsSkin","tpa.common.skins.TPAPreloaderSkin":"wysiwyg.viewer.skins.TPAPreloaderSkin","tpa.common.skins.TPAUnavailableMessageOverlaySkin":"wysiwyg.viewer.skins.TPAUnavailableMessageOverlaySkin"};if(b.isOpen("migrateTextStyle")){c["wysiwyg.viewer.skins.WRichTextSkin"]="wysiwyg.viewer.skins.WRichTextNewSkin"}function d(a){if(a.skin&&c[a.skin]){a.skin=c[a.skin]}}function e(a,b){var c,f=a[b]||a.components,g;if(!f){return}for(c=0;c<f.length;c++){g=f[c];d(g);e(g,b)}}var f={exec:function(b){var c=b.structure,f;if(c){e(c,"children");e(c,"mobileComponents");d(c)}f=b.data&&b.data.theme_data;if(f){a.forEach(f,function(a){d(a)})}}};return f});define("dataFixer/plugins/stylesFixer",["lodash","experiment"],function(a,b){"use strict";var c=b.isOpen("migrateTextStyle");function d(a,b,c){a[c.replace("llt_","llf_")]=b;return a}var e=function(b){b.style.properties=a.reduce(b.style.properties,d,{});b.style.propertiesSource=a.reduce(b.style.propertiesSource,d,{})};var f={"*":function(a){if(a.id==="THEME_DATA"){return}if(!a.style){a.style={properties:{},propertiesSource:{},groups:{}}}},"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormLineLayoutFlat":e,"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormLineLayoutTransparentWithIcon":e};function g(b){if(b.style){a.forEach(b.style.properties,function(a,b,c){if(typeof a==="string"){c[b]=a.replace(/(\d)x/g,"$1px")}})}}function h(){var a={type:"TopLevelStyle",id:"v2",metaData:{isPreset:false,schemaVersion:"1.0",isHidden:false},style:{properties:{brd:"color_15",brw:"0px",rd:"0px",shd:"0 1px 4px rgba(0, 0, 0, 0.6);"},propertiesSource:{brd:"theme",brw:"value",rd:"value",shd:"value"},groups:{}},componentClassName:"",pageId:"",compId:"",styleType:"system",skin:"wysiwyg.viewer.skins.video.VideoDefault"};return a}function i(){return{type:"TopLevelStyle",id:"txtNew",metaData:{isPreset:true,schemaVersion:"1.0",isHidden:false},styleType:"system",skin:"wysiwyg.viewer.skins.WRichTextNewSkin",style:{properties:{},propertiesSource:{},groups:{}}}}function j(b){if(!b.v2){var c=h();b.v2=a.cloneDeep(b.vl)||c}if(!b.txtNew){b.txtNew=i()}}function k(b){a.forOwn(b,function(a){f["*"](a);if(f[a.skin]){f[a.skin](a)}});if(c&&b.txtNew.skin==="wysiwyg.viewer.skins.WRichTextSkin"){b.txtNew.skin="wysiwyg.viewer.skins.WRichTextNewSkin"}}var l={exec:function(b){var c=b.data&&b.data.theme_data;if(!a.isEmpty(c)){j(c);k(c);a.forEach(c,function(a){g(a)})}}};return l});define("dataFixer/plugins/bgImageStripDataFixer",["lodash"],function(a){"use strict";var b="add_image_thumb.png";function c(a){return a&&a.componentType==="wysiwyg.viewer.components.BgImageStrip"}function d(a){return a&&a.dataQuery&&a.dataQuery.replace("#","")}function e(a){return a.uri.slice(0-b.length)===b}function f(a,b,f){if(c(f)){var g=d(f);var h=g&&b[g];if(h){h.title=h.title||"";if(!e(h)){a[f.id]=g}}}}function g(a,b,d){if(c(d)){var e=a[d.id];if(e){d.dataQuery="#"+e}else{delete d.dataQuery}}}function h(b,c){a.forEach(b,function(a){c(a);h(a.components,c)})}return{exec:function(a){var b=a.structure;var c=b&&(b.components||b.children);var d=b&&b.mobileComponents;if(c){var e={};h(c,f.bind(null,e,a.data.document_data));h(c,g.bind(null,e,a.data.document_data));h(d,g.bind(null,e,a.data.document_data))}}}});define("dataFixer/plugins/compFixer",["lodash","coreUtils","experiment"],function(a,b,c){"use strict";var d={"wysiwyg.viewer.components.HorizontalMenu":{comp:"wysiwyg.viewer.components.menus.DropDownMenu",dataQuery:"#MAIN_MENU"}};function e(a,b){var c=b.componentType,e=d[c];if(e){b.componentType=e.comp;if(e.dataQuery){b.dataQuery=e.dataQuery}if(e.callback){e.callback(a)}}}function f(a,b){if(b.componentType==="wysiwyg.viewer.components.ItunesButton"){b.layout.height=Math.round(b.layout.width/2.75)}}function g(a,b){return a.data.component_properties[b.propertyQuery]}function h(a,b){return b.dataQuery&&a.data.document_data[b.dataQuery.replace("#","")]}function i(a,b,c){a.data.component_properties[b.propertyQuery]=c}function j(a,c,d){var e=b.guidUtils.getUniqueId("dataItem","-");c.dataQuery="#"+e;d.id=e;a.data.document_data[e]=d}function k(b){if(b.components.length>0){var c=a.map(b.components,function(a){return a.layout.y+a.layout.height});return a.max(c)}return 0}function l(b){var c=a.find(b.structure.children,{id:"PAGES_CONTAINER"});return c.layout.y+c.layout.height}function m(a,b){if(b.id==="SITE_FOOTER"&&!b.layout){b.layout={anchors:[],fixedPosition:false,height:k(b),rotationInDegrees:0,scale:1,width:320,x:0,y:l(a)}}}function n(a,b){if(h(a,b)){return}switch(b.componentType){case"wysiwyg.viewer.components.svgshape.SvgShape":j(a,b,{link:null,type:"SvgShape"});break;case"wysiwyg.viewer.components.WFacebookComment":j(a,b,{type:"WFacebookComment",urlFormat:"hashBang"});return;case"wysiwyg.viewer.components.WFacebookLike":j(a,b,{type:"WFacebookLike",urlFormat:"hashBang"});return;default:break}}function o(a,b){var c=h(a,b);if(!c){return}switch(b.componentType){case"wysiwyg.viewer.components.ClipArt":c.title="";return;case"wysiwyg.viewer.components.FacebookShare":c.urlFormat=c.urlFormat||"hashBang";return;case"wysiwyg.viewer.components.VKShareButton":c.urlFormat=c.urlFormat||"hashBang";return;case"wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt":c.urlFormat=c.urlFormat||"hashBang";return;case"wysiwyg.viewer.components.WTwitterTweet":c.urlFormat=c.urlFormat||"hashBang";return;case"wysiwyg.viewer.components.WFacebookComment":c.urlFormat=c.urlFormat||"hashBang";return;case"wysiwyg.viewer.components.WFacebookLike":c.urlFormat=c.urlFormat||"hashBang";return}}function p(a,b){if(g(a,b)){return}switch(b.componentType){case"wysiwyg.viewer.components.menus.DropDownMenu":{i(a,b,{alignButtons:"center",alignText:"center",sameWidthButtons:false,moreButtonLabel:"More",moreItemHeight:15,stretchButtonsToMenuWidth:true,type:"HorizontalMenuProperties"});break}case"wysiwyg.viewer.components.mobile.TinyMenu":{var c="TINY_MENU";b.propertyQuery=c;i(a,b,{direction:"left",type:"TinyMenuProperties",id:c,metaData:{isPreset:false,schemaVersion:"1.0",isHidden:false}});break}default:break}}function q(a,b,c){a.properties[c.id]=g(b,c)}function r(a,b,c){if(!g(b,c)&&a.properties[c.id]){i(b,c,a.properties[c.id])}}function s(a,b){var c=g(a,b);if(!b.propertyQuery||!c){return}switch(b.componentType){case"wysiwyg.viewer.components.WFacebookLike":if(!c.language){c.language="en"}break;case"wysiwyg.viewer.components.PayPalButton":if(!c.language){c.language="en"}break;case"wysiwyg.viewer.components.GoogleMap":if(!c.language){c.language="en"}break;case"wysiwyg.viewer.components.WRichText":if(c.type!=="WRichTextProperties"){delete b.propertyQuery}break;default:break}}function t(b,c,d){if(d.componentType!=="wysiwyg.viewer.components.WRichText"){return}var e=g(c,d);if(!e||!e.packed){a.set(c,["structure",b],false)}}function u(b,c,d){a.forEach(c,function(c){a.forEach(d,function(a){a(b,c)});if(c.components){u(b,c.components,d)}})}function v(b,d,g){var h=a.noop;if(c.isOpen("viewerGeneratedAnchors")&&window.publicModel){b.structure.isPagePackedDesktop=true;h=a.partial(t,"isPagePackedDesktop")}u(b,g,[e,f,n,p,s,o,h,a.partial(q,d)])}function w(b,d,g){var h=a.noop;if(c.isOpen("viewerGeneratedAnchors")&&window.publicModel){b.structure.isPagePackedMobile=true;h=a.partial(t,"isPagePackedMobile")}u(b,g,[e,f,n,p,s,o,h,m,a.partial(r,d)])}var x={exec:function(a){var b=a.structure;if(b){var c={properties:{}};var d=b.components||b.children;var e=b.mobileComponents;if(d){v(a,c,d)}if(e){w(a,c,e)}}}};return x});define("dataFixer/plugins/galleryFixer",["lodash"],function(a){"use strict";var b=["GalleryExpandProperties","MatrixGalleryProperties","PaginatedGridGalleryProperties","SliderGalleryProperties","SlideShowGalleryProperties"];var c=function(b){if(a.isUndefined(b.galleryImageOnClickAction)||b.galleryImageOnClickAction==="unset"){if(b.expandEnabled===false){b.galleryImageOnClickAction="disabled"}else{b.galleryImageOnClickAction="zoomMode"}}return b};var d=function(b,c,d){return a(b).pick(function(b){return a.includes(c,b.type)}).mapValues(d).value()};var e={exec:function(a){d(a.data.component_properties,b,c)}};return e});define("dataFixer/helpers/behaviorsMigrationHelper",["coreUtils"],function(a){"use strict";function b(b){var c={id:a.guidUtils.getUniqueId("behavior","-"),type:"ObsoleteBehaviorsList",items:b};return c}return{createBehaviorsDataItem:b}});define("dataFixer/plugins/behaviorsDataFixer",["lodash","coreUtils","dataFixer/helpers/behaviorsMigrationHelper"],function(a,b,c){"use strict";function d(c){var d=b.dataUtils.getAllCompsInStructure(c,false);return a.pick(d,function(a){return a.behaviors})}function e(c,d){var e=b.dataUtils.getAllCompsInStructure(c,true);return a.pick(e,function(a){return d[a.id]})}function f(a,b,c){a.behaviorQuery=b.id;if(c){c.behaviorQuery=a.behaviorQuery}}function g(b){var g=a.get(b,"data");var h=a.get(b,"structure");g.behaviors_data=g.behaviors_data||{};var i=d(h);var j=e(h,i);a.forEach(i,function(b){var d=c.createBehaviorsDataItem(b.behaviors);f(b,d,j[b.id]);delete b.behaviors;a.set(g,["behaviors_data",d.id],d)})}return{exec:g}});define("dataFixer/plugins/behaviorsFixer",["lodash","dataFixer/plugins/behaviorsDataFixer"],function(a,b){"use strict";function c(a){return["behaviors_data",a.behaviorQuery,"items"]}function d(b){return a.has(b,"behaviors_data")}function e(b,e,f){var g=JSON.stringify(b);if(d(f)){a.set(f,c(e),g)}else{e.behaviors=g}}function f(b,e){if(d(e)){return a.get(e,c(b),"[]")}return b.behaviors||"[]"}function g(b,c){var g=[];var h=f(b,c);var i=JSON.parse(h);if(a.isEmpty(i)){if(d(c)){delete b.behaviorQuery}else{delete b.behaviors}return}if(a.isArray(i)){return}a.forEach(i,function(b,c){a.forEach(b,function(b,d){a.forEach(b,function(b){var e=a.assign({targetId:d,action:c},b);if(c==="screenIn"||c==="pageIn"){e.targetId=""}g.push(e)})})});e(g,b,c)}function h(b,c){a.forEach(b,function(a){g(a,c);if(a.components){h(a.components,c)}})}var i={exec:function(a){b.exec(a);var c=a.structure;if(!c){return}if(c.components){h(c.components,a.data)}if(c.mobileComponents){h(c.mobileComponents,a.data)}if(c.children){h(c.children,a.data)}}};return i});define("dataFixer/plugins/connectionsDataFixer",["lodash","experiment"],function(a,b){"use strict";var c={exec:function(c){if(b.isOpen("connectionsData")){var d=a.get(c,"data");d.connections_data=d.connections_data||{}}}};return c});define("dataFixer/plugins/fiveGridLineLayoutFixer",["lodash"],function(a){"use strict";var b={"wysiwyg.viewer.skins.line.FadeLine":{width:90},"wysiwyg.viewer.skins.line.FadeNotchBottomLine":{width:60},"wysiwyg.viewer.skins.line.FadeNotchTopLine":{width:60},"wysiwyg.viewer.skins.line.ShadowBottomLine":{width:200},"wysiwyg.viewer.skins.line.ShadowTopLine":{width:200}};function c(d){a.forEach(d,function(d){if(a.has(b,d.skin)){var e=b[d.skin];d.layout=a.mapValues(d.layout,function(a,b){if(e[b]){return Math.max(a,e[b])}return a})}if(d.components){c(d.components)}})}var d={exec:function(a){var b=a.structure;if(!b){return}if(b.components){c(b.components)}if(b.children){c(b.children)}if(b.mobileComponents){c(b.mobileComponents)}}};return d});define("dataFixer/plugins/toPageAnchorsFixer",["lodash"],function(a){"use strict";function b(b){var c=a.first(b);return!!a.get(c,"layout.anchors")}var c={exec:function(c){var d=c.structure;if(d&&d.components&&!a.isEmpty(d.components)&&b(d.components)){var e=a.max(d.components,function(b){var c=-1*Number.MAX_VALUE;if(b.layout&&a.isNumber(b.layout.y)&&a.isNumber(b.layout.height)){c=b.layout.y+b.layout.height}return c});var f;if(e.layout&&e.layout.anchors){f=a.find(e.layout.anchors,{type:"BOTTOM_PARENT"})}if(!f){e.layout=e.layout||{};e.layout.anchors=e.layout.anchors||[];e.layout.anchors.push({distance:0,type:"BOTTOM_PARENT",targetComponent:c.structure.id,locked:true,originalValue:c.structure.layout.height,topToTop:e.layout.y})}}}};return c});define("dataFixer/helpers/anchorCyclesHelper",["lodash"],function(a){"use strict";var b={BOTTOM_BOTTOM:"BOTTOM_BOTTOM",BOTTOM_TOP:"BOTTOM_TOP"};function c(a){return a&&a.layout&&a.layout.y+a.layout.height}function d(a){return a.layout&&a.layout.anchors||[]}function e(d,e,f){var g;switch(d.type){case b.BOTTOM_BOTTOM:g=c(f);break;case b.BOTTOM_TOP:g=a.get(f,"layout.y");break;default:return false}if(a.isUndefined(g)){return false}return g-c(e)<0}function f(a){return a.type===b.BOTTOM_BOTTOM||a.type===b.BOTTOM_TOP}function g(b,c,e,h){if(h[c.id]){return false}h[c.id]=true;var i=d(c);i=a.filter(i,f);return a.some(i,function(a){return a.targetComponent===b.id||g(b,e[a.targetComponent],e,h)})}function h(b){if(a.isEmpty(b)){return}var c=a.indexBy(b,"id");a.forEach(b,function(b){var i=d(b);a.remove(i,function(a){return f(a)&&e(a,b,c[a.targetComponent])&&g(b,c[a.targetComponent],c,{})});h(b.components)})}return{fixBottomTopBottomBottomCycles:h}});define("dataFixer/plugins/wrongAnchorsFixer",["lodash","dataFixer/helpers/anchorCyclesHelper"],function(a,b){"use strict";var c={"wysiwyg.common.components.anchor.viewer.Anchor":true,"wysiwyg.common.components.subscribeform.viewer.SubscribeForm":true,"wysiwyg.common.components.pinitpinwidget.viewer.PinItPinWidget":true,"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer":true,"wixapps.integration.components.AppPart":true,"wixapps.integration.components.AppPart2":true,"wixapps.integration.components.common.minipart":true,
"wysiwyg.common.components.onlineclock.viewer.OnlineClock":true,"wysiwyg.common.components.weather.viewer.Weather":true,"wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton":true,"wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow":true,"wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer":true,"wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton":true,"wysiwyg.viewer.components.ContactForm":true,"wysiwyg.viewer.components.FacebookShare":true,"wysiwyg.viewer.components.FiveGridLine":true,"wysiwyg.viewer.components.FlickrBadgeWidget":true,"wysiwyg.viewer.components.ItunesButton":true,"wysiwyg.viewer.components.LinkBar":true,"wysiwyg.viewer.components.PayPalButton":true,"wysiwyg.viewer.components.PinterestFollow":true,"wysiwyg.viewer.components.VKShareButton":true,"wysiwyg.viewer.components.WFacebookComment":true,"wysiwyg.viewer.components.WGooglePlusOne":true,"wysiwyg.viewer.components.mobile.TinyMenu":true};var d={"wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton":true,"wysiwyg.viewer.components.tpapps.TPAGluedWidget":true,"mobile.core.components.Page":true,"wixapps.integration.components.AppPage":true};function e(a){if(d[a.componentType]){a.layout.anchors=[]}}function f(a){if(a.type==="TOP_TOP"){a.locked=true}}function g(a,b,c){var d=(c||0)*Math.PI/180;return parseInt(Math.abs(b*Math.sin(d))+Math.abs(a*Math.cos(d)),10)}function h(a,b,c){return parseInt(a-(c-b)/2,10)}function i(a){return a.layout&&a.layout.y+a.layout.height}function j(a){return a.layout&&a.layout.anchors||[]}function k(b,c,d,e,f){if(f[b.id]||i(b)>d){return}f[b.id]=true;var g=j(b);a.remove(g,function(a){if(a.targetComponent===c.id){return true}if(a.type!=="BOTTOM_PARENT"){if(!e[a.targetComponent]){return true}k(e[a.targetComponent],c,d,e,f)}return false})}function l(b,c,d){if(b.type!=="BOTTOM_TOP"){return}var e=d[b.targetComponent];var f=j(e);a.remove(f,{targetComponent:c.id});var g=a.filter(f,{type:"TOP_TOP"});var h=i(c)+10;a.forEach(g,function(a){if(d[a.targetComponent]){k(d[a.targetComponent],c,h,d,{})}})}function m(b,c){if(b.type!=="Document"){return}a.forEach(c,function(a){if(a.targetComponent==="SITE_STRUCTURE"){a.targetComponent="masterPage"}})}function n(b,c,d){c=a.reject(c,{type:"BOTTOM_PARENT"});a.forEach(c,function(c){var e=d[c.targetComponent];if(!e){return}var f=a.filter(j(e),{targetComponent:b.id,type:c.type});a.forEach(f,function(d){var f=b.layout.y<e.layout.y?e:b;var g=b.layout.y<e.layout.y?d:c;a.remove(f.layout.anchors,function(a){return a===g})})})}function o(b){a.forEach(b,function(c){var d=j(c);d=a.reject(d,{type:"BOTTOM_PARENT"});a.remove(d,function(c){return!a.some(b,{id:c.targetComponent})})})}function p(b,e,f){var i=e.id;var j=f[b.targetComponent];if(b.type==="BOTTOM_PARENT"){j=b.targetComponent===i?e:null}if(!j){return false}if(b.type==="BOTTOM_BOTTOM"&&c[j.componentType]){return false}if(b.type!=="BOTTOM_PARENT"&&(d[j.componentType]||j.componentType==="wysiwyg.viewer.components.HeaderContainer"&&j.layout&&j.layout.fixedPosition===true)){return false}var k;if(j.layout&&a.isNumber(j.layout.height)&&a.isNumber(j.layout.y)){var l=j.layout;var m=g(l.height,l.width,l.rotationInDegrees);var n=h(l.y,l.height,m);k=b.type==="BOTTOM_PARENT"||b.type==="BOTTOM_BOTTOM"?m:n}else{k=0}b.originalValue=Math.min(b.originalValue,k);return true}function q(b){a.remove(b,function(a){return a.distance===null||isNaN(a.distance)})}function r(a,b){var c=!!b;if(c){e(a)}}function s(a,b){r(a,b);return t(a,b)}function t(b,c){var d=c?b[c]:b.components;if(a.isEmpty(d)){return}var g=a.transform(d,function(a,b){a[b.id]=b},{},this);o(d);a.forEach(d,function(c){var d=j(c);q(d);e(c);m(b,d);n(c,d,g);a.remove(d,function(a){f(a);var d=p(a,b,g);if(d){l(a,c,g)}return!d});t(c)})}function u(b){var c=a.first(b);return!!a.get(c,"layout.anchors")}var v={exec:function(c){var d=c.structure;var e="components";if(d){if(d.type==="Document"){d=a.clone(c.structure);d.id="masterPage";c.structure=d;e="children"}if(u(d[e])){s(d,e)}if(u(d.mobileComponents)){s(d,"mobileComponents");b.fixBottomTopBottomBottomCycles(d.mobileComponents)}}}};return v});define("dataFixer/plugins/addMissingAnchorsOfMasterPage",["lodash"],function(a){"use strict";function b(a){return a*Math.PI/180}function c(a){if(!a.rotationInDegrees){return a.height}var c=b(a.rotationInDegrees);return parseInt(Math.abs(a.width*Math.sin(c))+Math.abs(a.height*Math.cos(c)),10)}function d(a){if(!a.rotationInDegrees){return a.y}var b=c(a);return parseInt(a.y-(b-a.height)/2,10)}function e(b){return a.max(b,function(a){return d(a.layout)})}function f(b){var c=b.pagesContainer;var d=b.header;if(c&&d){a.remove(c.layout.anchors,{targetComponent:"SITE_HEADER",type:"TOP_TOP"});a.remove(d.layout.anchors,{targetComponent:"PAGES_CONTAINER",type:"TOP_TOP"})}}function g(b,f){var g=f.pagesContainer;var h=f.header;var i=f.footer;var j=g&&g.components&&a.find(g.components,{id:"SITE_PAGES"});if(j&&j.layout&&(!j.layout.anchors||j.layout.anchors.length===0)){j.layout.anchors=[{distance:0,locked:true,originalValue:0,targetComponent:"PAGES_CONTAINER",type:"BOTTOM_PARENT"}]}if(g&&g.layout&&(!g.layout.anchors||g.layout.anchors.length===0)&&i&&i.layout&&!i.layout.fixedPosition){g.layout.anchors=[{distance:10,locked:true,originalValue:0,targetComponent:"SITE_FOOTER",type:"BOTTOM_TOP"}]}if(h){var k=a.find(b,function(b){return a.find(b.layout.anchors,{type:"BOTTOM_PARENT",targetComponent:"masterPage"})});if(!k){var l=e(b);if(!l.layout.anchors){return}l.layout.anchors.push({distance:0,locked:true,originalValue:d(l.layout)+c(l.layout)+(h?c(h.layout):0),targetComponent:"masterPage",type:"BOTTOM_PARENT"})}}}function h(a){return!(a.length&&a[0].layout&&a[0].layout.anchors)}function i(b){var c={};a.forEach(b,function(a){switch(a.id){case"SITE_HEADER":c.header=a;return!(c.footer&&c.pagesContainer);case"SITE_FOOTER":c.footer=a;return!(c.header&&c.pagesContainer);case"PAGES_CONTAINER":c.pagesContainer=a;return!(c.header&&c.footer);default:return true}});return c}function j(b){if(b&&!a.isEmpty(b)&&!h(b)){var c=i(b);f(c);g(b,c)}}var k={exec:function(a){var b=a.structure;if(!b||b.type!=="Document"){return}j(b.children);j(b.mobileComponents)},test:{getBoundingHeight:c,getBoundingY:d,getLowestComp:e}};return k});define("dataFixer/plugins/customSiteMenuFixer",["lodash"],function(a){"use strict";var b=0;var c=0;var d="bmi";var e="pglk";function f(b,c){return a.map(b,function(a){return g(c,a)})}function g(a,c){var e=d+b++;var g=a[c.refId.replace("#","")];a[e]={id:e,label:g.title,isVisible:!g.hidePage,isVisibleMobile:g.mobileHidePage!==undefined?!g.mobileHidePage:!g.hidePage,items:f(c.items,a),link:h(a,c.refId),type:"BasicMenuItem",metaData:{}};return"#"+e}function h(a,b){var d=e+c++;a[d]={id:d,type:"PageLink",pageId:b,metaData:{}};return"#"+d}function i(a,b){return b&&a[b.replace("#","")]}function j(a,b){b.link="#CUSTOM_MENU_HEADER"}function k(a,b){var c=i(a,b.link);return c&&c.type==="PageLink"&&!i(a,c.pageId)}function l(b,c){a.forEach(c.items,function(a){var c=i(b,a);if(!c.link||k(b,c)){j(a,c)}l(b,c)})}function m(b){a(b.data.document_data).where({type:"Menu"}).pluck("id").forEach(function(a){delete b.data.document_data[a]}).value()}function n(a){return a&&a.structure&&a.structure.type==="Page"}function o(a){return a.replace("#","")}function p(b,c){var d=b.CUSTOM_MAIN_MENU.items;var e=a(b).filter({type:"BasicMenuItem"}).map("link").compact().map(o).map(function(a){return b[a]}).map("pageId").compact().map(o).value();var f=a.difference(c,e);a.forEach(f,function(a){if(b[a].isPopup){return}d.push(q(b,a))})}function q(a,c){var e=d+b++;var f=a[c];a[e]={id:e,label:f.title,isVisible:!f.hidePage,isVisibleMobile:f.mobileHidePage!==undefined?!f.mobileHidePage:!f.hidePage,items:[],link:h(a,"#"+c),type:"BasicMenuItem",metaData:{}};return"#"+e}function r(b,c){var d=a.filter(b,function(a){return a.id&&a.id.indexOf(c)===0});var e=-1;a.forEach(d,function(a){var b=Number(a.id.replace(c,""));if(b>e){e=b}});return++e}var s={exec:function(g,h){if(n(g)){m(g);return}var i=g.data.document_data;b=r(i,d);c=r(i,e);if(!g.data.document_data.CUSTOM_MAIN_MENU){g.data.document_data.CUSTOM_MAIN_MENU={id:"CUSTOM_MAIN_MENU",items:f(g.data.document_data.MAIN_MENU.items,g.data.document_data),name:"Custom Main Menu",type:"CustomMenu",metaData:{}}}if(!g.data.document_data.CUSTOM_MENUS){g.data.document_data.CUSTOM_MENUS={id:"CUSTOM_MENUS",menus:["#CUSTOM_MAIN_MENU"],type:"CustomMenusCollection",metaData:{}}}else if(!a.includes(g.data.document_data.CUSTOM_MENUS.menus,"#CUSTOM_MAIN_MENU")){g.data.document_data.CUSTOM_MENUS.menus.push("#CUSTOM_MAIN_MENU")}p(i,h);l(i,i.CUSTOM_MAIN_MENU);if(g.data.document_data.MAIN_MENU.items.length>0){g.data.document_data.MAIN_MENU.items=[]}}};return s});define("dataFixer/plugins/sitePagesFixer",["lodash"],function(a){"use strict";function b(b){var c;if(b.structure.children){var d=a.find(b.structure.children,{id:"PAGES_CONTAINER"});if(d&&!a.isEmpty(d.components)){c=a.find(d.components,{id:"SITE_PAGES"})}}return c}function c(b){var c;if(b.structure.mobileComponents){var d=a.find(b.structure.mobileComponents,{id:"PAGES_CONTAINER"});if(d&&!a.isEmpty(d.components)){c=a.find(d.components,{id:"SITE_PAGES"})}}return c}function d(b){if(!a.isEmpty(b.components)){b.components=[]}}function e(a){if(a.layout){a.layout.y=0}}var f={exec:function(a){if(a.structure&&a.structure.type==="Document"){var f=b(a);var g=c(a);if(f){d(f);e(f)}if(g){d(g);e(g)}}return a}};return f});define("dataFixer/plugins/linkRefDataFixer",["lodash","coreUtils"],function(a,b){"use strict";var c={exec:function(c){var d={toFix:["FlashComponent","SiteButton","Image"],newNames:["LinkableFlashComponent","LinkableButton","Image"],originalLink:["TextLink","Link"]},e=["href","text","target","icon","linkType"],f={oldValues:["same","other"],newValues:["_self","_blank"]};var g=function(b){return a.filter(b,function(b){var c=b.type===d.toFix[2];var e=!c||b.metaData.schemaVersion!=="2.0";return!b.link&&a.includes(d.toFix,b.type)&&e},this)};var h=function(b){return a.filter(b,function(b){return b.linkType&&a.includes(d.originalLink,b.type)},this)};var i=function(b){var c=a.indexOf(d.toFix,b.type);var f=d.newNames[c];var g=a.defaults({type:f},a.omit(b,e));var h=j(b,true);if(h){g.link=p(h.id);v[h.id]=h}if(b.type===g.type){g.metaData.schemaVersion="2.0"}return g};var j=function(a,b){var c=a.linkType||"";var d=c.toLowerCase();var e=b?s():a.id;switch(d){case"page":return l(e,a);case"website":return k(e,a);case"email":return n(e,a);case"document":return m(e,a);case"login":return o(e,a);case"admin_login":return null;case"free_link":return null;case"":return null;default:return null}};var k=function(a,b){var c={};c.id=a;c.type="ExternalLink";c.target=q(b.target);var d=b.href;if(!d){return null}c.url=d;return c};var l=function(a,b){var c={};c.id=a;c.type="PageLink";var d=b.href;if(!d){return null}var e=d.lastIndexOf("/");if(e<0){e=d.lastIndexOf("|")}d=d.substr(e+1);c.pageId=p(d);return c};var m=function(a,b){var c={};var d;var e;c.type="DocumentLink";c.id=a;var f=b.href;if(!f){return null}d=f.substr(f.lastIndexOf("/")+1);e=d.indexOf("?dn=");if(e!==-1){d=d.substring(0,e)}c.docId=d;c.name=b.text;return c};var n=function(a,c){var d={};d.id=a;d.type="EmailLink";var e=c.href;if(!e||!e.toLowerCase){return null}if(b.stringUtils.startsWith(e,"mailto:",true)){e=e.substr("mailto:".length)}var f=e.split("?");d.recipient=f[0];if(f[1]){var g=r(f[1]);if(g.subject){d.subject=g.subject}if(g.body){d.body=g.body}}return d};var o=function(a,c){var d={};d.id=a;d.type="LoginToWixLink";var e=c.text;if(e&&b.stringUtils.startsWith(e,"{")){e=JSON.parse(e);d.postLoginUrl=e.postLoginUrl;d.postSignupUrl=e.postSignupUrl;d.dialog=e.type}return d};var p=function(a){if(!a){return null}if(a&&b.stringUtils.startsWith(a,"#")){return a}return"#"+a};var q=function(b){var c;var d=a.indexOf(f.oldValues,b);if(a.includes(f.newValues,b)){c=b}else if(d!==-1){c=f.newValues[d]}else{c=f.newValues[1]}return c};var r=function(a){var b={},c=/([^&=]+)=([^&]*)/g,d;while(d=c.exec(a)){b[d[1]]=d[2]}return b};var s=function(){var b=a.keys(c.data.document_data);var d;do{d=(new Date).getTime().toString(36)+"_"+Math.round(Math.random()*99999).toString(36);d=d.replace(/\s/g,"_")}while(b[d]);return d};var t=c.data;var u=t.document_data;var v={};var w;w=g(u);a.forEach(w,function(a){var b=i(a);if(b){u[a.id]=b}},this);w=h(u);a.forEach(w,function(a){var b=j(a);if(b){u[a.id]=b}},this);a.assign(u,v)}};return c});define("dataFixer/plugins/fromDocumentToThemeData",[],function(){"use strict";var a={exec:function(a){var b=a.data;if(b.document_data.THEME_DATA){if(!b.theme_data.THEME_DATA){b.theme_data.THEME_DATA=b.document_data.THEME_DATA}delete b.document_data.THEME_DATA}}};return a});define("dataFixer/plugins/tpaGluedWidgetDataFixer",["lodash"],function(a){"use strict";return{exec:function(b){a.forEach(b.structure.children,function(a){if(a.componentType==="wysiwyg.viewer.components.tpapps.TPAGluedWidget"){a.layout.fixedPosition=true}})}}});define("dataFixer/imageService/imageTransformDataFixers",["lodash","imageClientApi"],function(a,b){"use strict";var c=b.fittingTypes;var d=b.alignTypes;var e={"repeat-x":c.TILE_HORIZONTAL,"repeat no_repeat":c.TILE_HORIZONTAL,"repeat no-repeat":c.TILE_HORIZONTAL,"repeat-y":c.TILE_VERTICAL,"no_repeat repeat":c.TILE_VERTICAL,"no-repeat repeat":c.TILE_VERTICAL,repeat:c.TILE,"repeat repeat":c.TILE,"":""};var f={auto:function(a){return a?a:c.LEGACY_ORIGINAL_SIZE},cover:function(){return c.SCALE_TO_FILL},contain:function(a){return a?c.FIT_AND_TILE:c.SCALE_TO_FIT},"":function(){return c.SCALE_TO_FILL}};var g={"center center":d.CENTER,center:d.CENTER,"50% 50%":d.CENTER,"top center":d.TOP,"center top":d.TOP,"50% 0%":d.TOP,"bottom center":d.BOTTOM,"center bottom":d.BOTTOM,"50% 100%":d.BOTTOM,"center right":d.RIGHT,"right center":d.RIGHT,"100% 50%":d.RIGHT,"center left":d.LEFT,"left center":d.LEFT,"0% 50%":d.LEFT,"left top":d.TOP_LEFT,"top left":d.TOP_LEFT,"0% 0%":d.TOP_LEFT,"right top":d.TOP_RIGHT,"top right":d.TOP_RIGHT,"100% 0%":d.TOP_RIGHT,"left bottom":d.BOTTOM_LEFT,"bottom left":d.BOTTOM_LEFT,"0% 100%":d.BOTTOM_LEFT,"right bottom":d.BOTTOM_RIGHT,"bottom right":d.BOTTOM_RIGHT,"100% 100%":d.BOTTOM_RIGHT,"":d.CENTER};var h=function(){var a={};a[c.LEGACY_STRIP_TILE_HORIZONTAL]="repeat-x";a[c.TILE_HORIZONTAL]="repeat-x";a[c.LEGACY_STRIP_TILE_VERTICAL]="repeat-y";a[c.TILE_VERTICAL]="repeat-y";a[c.LEGACY_STRIP_TILE]="repeat";a[c.TILE]="repeat";a[c.FIT_AND_TILE]="repeat";a[""]="no-repeat";return a}();var i=function(){var a={};a[c.LEGACY_ORIGINAL_SIZE]="auto";a[c.LEGACY_STRIP_ORIGINAL_SIZE]="auto";a[c.SCALE_TO_FILL]="cover";a[c.LEGACY_STRIP_SCALE_TO_FILL]="cover";a[c.SCALE_TO_FIT]="contain";a[c.LEGACY_STRIP_SCALE_TO_FIT]="contain";a[c.FIT_AND_TILE]="contain";a[c.LEGACY_STRIP_FIT_AND_TILE]="contain";a[""]="auto";return a}();var j=function(){var a={};a[d.TOP]="center top";a[d.CENTER]="center";a[d.BOTTOM]="center bottom";a[d.TOP_LEFT]="left top";a[d.LEFT]="left center";a[d.BOTTOM_LEFT]="left bottom";a[d.TOP_RIGHT]="right top";a[d.RIGHT]="right center";a[d.BOTTOM_RIGHT]="right bottom";a[""]="center";return a}();function k(a){return(a||"").toLowerCase().trim()}function l(a){var b=k(a.bgRepeat);var c=k(a.bgSize);var d=e[b];return f[c]&&f[c](d)}function m(a){a=k(a);return g[a]}function n(a){return h[a]||h[""]}function o(a){return i[a]||i[""]}function p(a){return j[a]||j[""]}function q(a){if(a===c.TILE){return c.LEGACY_STRIP_TILE}else if(a===c.TILE_HORIZONTAL){return c.LEGACY_STRIP_TILE_HORIZONTAL}else if(a===c.TILE_VERTICAL){return c.LEGACY_STRIP_TILE_VERTICAL}else if(a===c.SCALE_TO_FILL){return c.LEGACY_STRIP_SCALE_TO_FILL}else if(a===c.SCALE_TO_FIT){return c.LEGACY_STRIP_SCALE_TO_FIT}else if(a===c.FIT_AND_TILE){return c.LEGACY_STRIP_FIT_AND_TILE}else if(a===c.LEGACY_ORIGINAL_SIZE){return c.LEGACY_STRIP_ORIGINAL_SIZE}return a}return{cssToFittingType:l,cssToAlignType:m,fittingTypeToBgRepeat:n,fittingTypeToBgSize:o,alignTypeToBgPosition:p,migrateToLegacyFittings:q}});define("dataFixer/plugins/compsWithImagesDataFixer",["lodash","dataFixer/imageService/imageTransformDataFixers"],function(a,b){"use strict";var c={BgImageStripProperties:function(a){a.fittingType=b.cssToFittingType({bgSize:a.bgSize,bgRepeat:a.bgRepeat});a.fittingType=b.migrateToLegacyFittings(a.fittingType);a.alignType=b.cssToAlignType(a.bgPosition);a.type="BgImageStripUnifiedProperties";delete a.bgSize;delete a.bgRepeat;delete a.bgPosition;delete a.bgUrl}};function d(b){a.forEach(b,function(a){var b=c[a.type];if(b){b(a)}})}function e(b){a.noop(b)}var f={exec:function(b){var c=b.data.component_properties;var f=b.data.document_data;if(!a.isEmpty(c)){d(c)}if(!a.isEmpty(f)){e(f)}}};return f});define("dataFixer/plugins/appPartCustomizationsFixer",["lodash"],function(a){"use strict";var b={faq:{filterAppPart:{appPartName:"f2c4fc13-e24d-4e99-aadf-4cff71092b88",viewName:"ExpandQuestions"},filterAppLogicCustomization:{type:"AppPartCustomization",forType:"Category",view:"ToggleMobile",key:"comp.initialState",fieldId:"toggle",format:"Mobile"},modify:function(b){return a.assign(b,{fieldId:"vars",key:"initialState"})}}};function c(c){a(b).values().forEach(function(b){a(c.data.document_data).filter(b.filterAppPart).forEach(function(c){c.appLogicCustomizations=a(c.appLogicCustomizations).map(function(c){var d=a.find([c],b.filterAppLogicCustomization);return d?b.modify(c):c}).compact().value()}).value()}).value()}return{exec:c}});define("dataFixer/plugins/backgroundMediaConverter",["lodash","imageClientApi","dataFixer/imageService/imageTransformDataFixers","coreUtils"],function(a,b,c,d){"use strict";var e="BackgroundMedia";var f="BackgroundImage";var g="bgImage";var h="mediaBg";var i="-";function j(b,c){var d=a.filter(b,function(a){return a.type==="Page"||a.type==="AppPage"});var e=a.map(d,"id");var f=a.some(d,function(a){return a.pageBackgrounds&&a.pageBackgrounds.desktop.ref});if(f){l(b)}else{var g=c.siteBg;var h=!c.mobileBg||c.mobileBg==="[siteBg]"?c.siteBg:c.mobileBg;o(b,g,h,e)}}function k(a){l(a)}function l(b){var c=a.filter(b,{type:f});a.forEach(c,function(a){m(b,a)})}function m(a,b){var c=b.id;var e=d.guidUtils.getUniqueId(g+i);var f=r(b);n(a,f,c,e)}function n(b,c,d,e){b[d]=a.assign({id:d},c.bgItem);if(c.imageItem){b[d].mediaRef="#"+e;b[e]=a.assign({id:e},c.imageItem)}}function o(b,c,e,f){var j=q(c);var k=q(e);a.forEach(f,function(a){var c=d.guidUtils.getUniqueId(h,i);var e=d.guidUtils.getUniqueId(h,i);var f=c.replace(h,g);var l=e.replace(h,g);p(b,j,a,c,f,"desktop");p(b,k,a,e,l,"mobile")})}function p(a,b,c,d,e,f){a[c].pageBackgrounds=a[c].pageBackgrounds||{desktop:"",mobile:""};a[c].pageBackgrounds[f]={ref:"#"+d,custom:true,isPreset:false};n(a,b,d,e)}function q(b){var c=s.apply(this,a.compact(b.split(" ")));return t(c)}function r(a){var b=s.apply(this,[a.url,a.imagesizew,a.imagesizeh,a.positionx,a.positiony,a.width,a.repeatx,a.repeaty,a.attachment,a.color,a.metaData]);return t(b)}function s(a,b,c,d,e,f,g,h,i,j,k){k=k||{};return{imageId:a,imageW:b,imageH:c,x:d,y:e,width:f,repeatX:g,repeatY:h,attachment:i,color:j,metaData:{isPreset:k.isPreset||false,schemaVersion:"2.0",isHidden:k.isHidden||false}}}function t(a){var b={bgItem:{}};var d="rgb(255,255,255)";var e=c.cssToAlignType(a.x+" "+a.y);var f=c.cssToFittingType({bgRepeat:a.repeatX+" "+a.repeatY,bgSize:a.width});var g=a.attachment==="fixed"?"fixed":"scroll";f=u(f);if(a.color&&a.color!=="none"){d=a.color}if(a.imageId&&a.imageId!=="none"){b.imageItem={type:"Image",uri:a.imageId,width:parseInt(a.imageW,10),height:parseInt(a.imageH,10),metaData:{isPreset:false,schemaVersion:"1.0",isHidden:false}}}b.bgItem={type:"BackgroundMedia",color:d,alignType:e,fittingType:f,scrollType:g,metaData:a.metaData};return b}function u(a){var c={};c[b.fittingTypes.TILE]=b.fittingTypes.LEGACY_BG_FIT_AND_TILE;c[b.fittingTypes.TILE_HORIZONTAL]=b.fittingTypes.LEGACY_BG_FIT_AND_TILE_HORIZONTAL;c[b.fittingTypes.TILE_VERTICAL]=b.fittingTypes.LEGACY_BG_FIT_AND_TILE_VERTICAL;c[b.fittingTypes.LEGACY_ORIGINAL_SIZE]=b.fittingTypes.LEGACY_BG_NORMAL;return c[a]||a}function v(a){a.siteBg=w(a.siteBg);if(a.mobileBg&&a.mobileBg!=="[siteBg]"){a.mobileBg=w(a.mobileBg)}}function w(b){var c=a.compact(b.split(" "));var d=s.apply(this,c);var e=d.color;if(e){e=e.replace("[","{");e=e.replace("]","}");c[9]=e}return c.join(" ")}var x={exec:function(b){if(!b.structure){return}var c=b.data.theme_data&&b.data.theme_data.THEME_DATA;var d=b.data.document_data;var g=a.some(d,{type:e});var h=a.some(d,{type:f});if(g&&!h){return}if(b.structure.type==="Document"){v(c);j(d,c)}else{k(d)}}};return x});define("dataFixer/plugins/backgroundMediaUndefinedFixer",["lodash","coreUtils"],function(a,b){"use strict";var c="BackgroundMedia";var d={alignType:"center",color:"{color_11}",fittingType:"fill",scrollType:"scroll",type:"BackgroundMedia"};var e={pageBackgrounds:{desktop:{custom:true,isPreset:true,ref:null},mobile:{custom:true,isPreset:true,ref:null}}};function f(a,c){return b.guidUtils.getUniqueId(c.id,"_")+a}function g(b,c){c[b]=a.assign({id:b},d)}function h(b){var c=a.filter(b,function(a){return a.type==="Page"||a.type==="AppPage"});a.forEach(c,function(c){var d;a.defaults(c,e);if(!c.pageBackgrounds.mobile.ref){d=f("_mobile_bg",c);g(d,b);c.pageBackgrounds.mobile.ref="#"+d}if(!c.pageBackgrounds.desktop.ref){d=f("_desktop_bg",c);g(d,b);c.pageBackgrounds.desktop.ref="#"+d}})}var i={exec:function(b){if(!b.structure){return}var d=b.data.document_data;var e=a.some(d,{type:c});if(e){h(d)}}};return i});define("dataFixer/plugins/backgroundMediaRefDuplicationFixer",["lodash"],function(a){"use strict";function b(b,c,d){d[b]=a.assign({id:b},a.omit(c,"id"))}function c(a,b,c){return a+"_"+b+"_"+c}function d(d,e,f,g,h){if(d[e].indexOf("#"+g)===0){return}var i=a.cloneDeep(h[d[e].replace("#","")]);var j=c(g,f,e);b(j,i,h);d[e]="#"+j}function e(a,b,c){var e=b.pageBackgrounds[a].ref.replace("#","");var f=c[e];var g;if(f&&f.mediaRef){g=c[f.mediaRef.replace("#","")];if(g.type==="WixVideo"){d(g,"posterImageRef",a,b.id,c)}if(f.imageOverlay){d(f,"imageOverlay",a,b.id,c)}d(f,"mediaRef",a,b.id,c)}}function f(a,b){if(a.pageBackgrounds){e("mobile",a,b);e("desktop",a,b)}}var g={exec:function(b){if(!b.structure){return}var c=b.data.document_data;var d=a.filter(c,function(a){return a.type==="Page"||a.type==="AppPage"});a.forEach(d,function(a){f(a,c)})}};return g});define("dataFixer/plugins/stripContainerBgEffectFixer",["lodash","dataFixer/helpers/behaviorsMigrationHelper"],function(a,b){"use strict";var c=["wysiwyg.viewer.components.StripContainer","wysiwyg.viewer.components.StripContainerSlideShowSlide"];var d={fixed:{action:"bgScrub",name:"BackgroundReveal",duration:1,delay:0},parallax:{action:"bgScrub",name:"BackgroundParallax",duration:1,delay:0}};function e(b,c){var d=a.get(c,[b.behaviorQuery,"items"],"[]");return JSON.parse(d)}function f(a,b){var c;var d;d=a.designQuery.replace("#","");c=b[d].background.replace("#","");return b[c]}function g(g,h,i){var j;var k;if(!a.includes(c,g.componentType)){return}var l=f(g,h);k=l.scrollType;l.scrollType="none";if(k!=="scroll"&&k!=="none"){j=e(g,i);j=a.reject(j,{name:"ContainerFixedBg",action:"bgScrub"});j.push(d[k]);var m=JSON.stringify(j);if(g.behaviorQuery){a.set(i,[g.behaviorQuery,"items"],m)}else{var n=b.createBehaviorsDataItem(m);a.set(i,n.id,n);g.behaviorQuery=n.id}}}function h(b,d,g){var h;if(!a.includes(c,b.componentType)){return}var i=f(b,d);i.scrollType="none";h=e(b,g);h=a.reject(h,{name:"ContainerFixedBg",action:"bgScrub"});if(a.isEmpty(h)){delete b.behaviors;delete b.behaviorQuery}else{a.set(g,[b.behaviorQuery,"items"],JSON.stringify(h))}}function i(b,c,d){a.forEach(b,function(a){g(a,c,d);if(a.components){i(a.components,c,d)}})}function j(b,c,d){a.forEach(b,function(a){h(a,c,d);if(a.components){j(a.components,c,d)}})}var k={exec:function(a){var b=a.structure;var c;if(!b){return}c=a.data.design_data;var d=a.data.behaviors_data;if(b.components){i(b.components,c,d)}if(b.children){i(b.children,c,d)}if(b.mobileComponents){j(b.mobileComponents,c,d)}}};return k});define("dataFixer/plugins/documentMediaFixer",["lodash"],function(a){"use strict";var b={exec:function(b){if(b.structure.type==="Page"){var c=b.structure.components;var d=b.data.document_data;a.forEach(c,function(b){if(a.includes(b.componentType,"DocumentMedia")){var c=b.dataQuery;var e=d[c.replace("#","")];if(e.uri.indexOf("media/")===0){e.uri=e.uri.replace("media/","")}}})}return b}};return b});define("dataFixer/plugins/pinterestFollowFixer",["lodash"],function(a){"use strict";var b=function(b){var c="www.pinterest.com/";b.urlChoice=a.includes(b.urlChoice,"pinterest.com")?b.urlChoice:c+b.urlChoice};var c={exec:function(c){return a(c.data.document_data).pick(function(a){return a.type==="PinterestFollow"}).mapValues(b).value()}};return c});define("dataFixer/plugins/blogPageMenuFixer",["lodash"],function(a){"use strict";function b(a){var b=c(a);if(b){d(a,"#"+b)}}function c(b){var c=a.findKey(b,function(a){return a.appPageId&&a.appPageId==="7326bfbb-4b10-4a8e-84c1-73f776051e10"});if(!c){return null}var d=a.findKey(b,function(a){return a.pageId&&a.pageId==="#"+c});return a.findKey(b,function(a){return a.link&&a.link==="#"+d})}function d(b,c){var d=b.CUSTOM_MAIN_MENU&&b.CUSTOM_MAIN_MENU.items;a.forEach(d,function(d){var e=b[d.replace("#","")].items;var f=a.indexOf(e,c);if(f!==-1){e.splice(f,1);b.CUSTOM_MAIN_MENU.items.push(c);return false}})}var e={exec:function(a){if(a.structure&&a.structure.type==="Document"){b(a.data.document_data)}return a}};return e});define("dataFixer/plugins/appPartMediaInnerCustomizationFormatFixer",["lodash","coreUtils"],function(a,b){"use strict";var c={exec:function(d){if(!d.data||!d.data.document_data){return}a(d.data.document_data).filter(function a(b){return c.isAppPartType(b.type)}).forEach(function(c){a(c.appLogicCustomizations).compact().groupBy("view").filter(function a(c,d){return b.appPartMediaInnerViewNameUtils.isMediaInnerViewName(d)}).forEach(function(b){a(b).groupBy("fieldId").filter(function b(c){return a.isEqual(a.pluck(c,"format"),[""])}).forEach(function(b){a.forEach(b,function(a){a.format="*"})}).value()}).value()}).value()},isAppPartType:function(a){return a==="AppPart"}};return c});define("dataFixer/plugins/appPartReadMoreValueCustomizationFormatFixer",["lodash","coreUtils"],function(a,b){"use strict";var c={exec:function(b){if(!b.data){return}a(b.data.document_data).filter(function(b){return b.type===c.getAppPartType()&&a.includes(c.getBlogFeedAppPartNames(),b.appPartName)}).forEach(function(b){var d=b.appLogicCustomizations;a(d).compact().filter(function(b){return b.fieldId===c.getReadMoreValueCustomizationFieldId()&&b.key===c.getReadMoreValueCustomizationKey()&&b.format===""&&a.includes(c.getAffectedReadMoreValueCustomizationViews(),b.view)}).forEach(function(b){a.remove(d,{fieldId:b.fieldId,format:"*",key:b.key,view:b.view});b.format="*"}).value()}).value()},getAppPartType:function(){return"AppPart"},getBlogFeedAppPartNames:function(){return[b.blogAppPartNames.FEED,b.blogAppPartNames.CUSTOM_FEED]},getReadMoreValueCustomizationFieldId:function(){return"ReadMoreBtn"},getReadMoreValueCustomizationKey:function(){return"value"},getAffectedReadMoreValueCustomizationViews:function(){return["MediaLeft","MediaLeftPage","MediaRight","MediaRightPage","MediaZigzag","MediaZigzagPage","Masonry","MasonryPage"]}};return c});define("dataFixer/plugins/appPartTagsValueCustomizationFormatFixer",["lodash"],function(a){"use strict";return{exec:function(b){a(b.data.document_data).filter({type:"AppPart"}).forEach(function(b){a(b.appLogicCustomizations).filter({fieldId:"tagsValue",forType:"Post",format:"",key:"value",view:"SinglePostMediaTop"}).forEach(function(a){a.format="*"}).value()}).value()}}});define("dataFixer/plugins/appPartDuplicateCustomizationFixer",["lodash"],function(a){"use strict";function b(b){var c=a.omit(b,"value");return JSON.stringify(c)}return{exec:function(c){a(c.data.document_data).filter({type:"AppPart"}).forEach(function(a){var c=a.appLogicCustomizations;var d=c.length;var e={};while(d){d-=1;var f=b(c[d]);if(!e[f]){e[f]=true}else{c.splice(d,1)}}}).value()}}});define("dataFixer/plugins/blogCustomFeedPostsPerPageCustomizationFixer",["lodash","coreUtils"],function(a,b){"use strict";return{exec:function(d){a(d.data.document_data).filter({type:"AppPart",appPartName:b.blogAppPartNames.CUSTOM_FEED}).forEach(function(b){a(b.appLogicCustomizations).filter(c).forEach(function(b){a.assign(b,{fieldId:"vars",format:"*",key:"itemsPerPage"})}).value()}).value()}};function c(b){return b.forType==="Array"&&b.key==="comp.itemsPerPage"&&a.includes(["","*"],b.format)&&a.includes(["paginatedlist","columnBlog"],b.fieldId)&&a.includes(["MediaTop","MediaBottom","MediaLeft","MediaRight","MediaZigzag","Masonry"],b.view)}});define("dataFixer/plugins/blogDateAlignmentCustomizationFixer",["lodash","coreUtils"],function(a,b){"use strict";return{exec:function(d){a(d.data.document_data).filter(function(c){return c.type==="AppPart"&&a.includes([b.blogAppPartNames.CUSTOM_FEED,b.blogAppPartNames.FEED,b.blogAppPartNames.SINGLE_POST],c.appPartName)}).forEach(function(b){a(b.appLogicCustomizations).filter(c).forEach(function(b){a.assign(b,{fieldId:"vars",key:"dateAndAuthorPosition",value:b.value==="0"?"left":"right"})}).value()}).value()}};function c(b){return b.forType==="Post"&&b.key==="layout.spacerBefore"&&b.fieldId==="date"&&a.includes(["MediaTop","MediaBottom","MediaLeft","MediaRight","MediaZigzag","Masonry","MediaTopPage","MediaBottomPage","MediaLeftPage","MediaRightPage","MediaZigzagPage","MasonryPage","SinglePostMediaBottom","SinglePostMediaTop"],b.view)}});define("dataFixer/plugins/appPartBrokenButtonStyleFixer",["lodash","coreUtils"],function(a,b){"use strict";var c=null;return{exec:function(d){if(a.isNull(c)){c=[];a.forEach(d.data.theme_data,function(b,d,e){var f=a.matches({componentClassName:"wysiwyg.viewer.components.SiteButton",skin:"wysiwyg.viewer.skins.AppPartSkin"})(b);if(f){c.push(d);delete e[d]}});setTimeout(function(){c=null})}a(d.data.document_data).filter(function(c){return c.type==="AppPart"&&a.includes(b.blogAppPartNames,c.appPartName)}).forEach(function(b){a.remove(b.appLogicCustomizations,function(b){return b.key==="comp.style"&&a.includes(c,b.value)})}).value()}}});define("dataFixer/plugins/blogDateFormatCustomizationFormatFixer",["lodash","coreUtils"],function(a,b){"use strict";var c={};c[b.blogAppPartNames.FEED]=["MediaBottomPage","MediaLeftPage","MediaRightPage","MediaTopPage","MediaZigzagPage"];c[b.blogAppPartNames.POSTS_LIST]=["PostsList","PostsListMediaLeft"];c[b.blogAppPartNames.TICKER]=["TickerMediaBottom","TickerMediaTop"];return{exec:function(d){a(d.data.document_data).filter(function(c){return c.type==="AppPart"&&a.includes([b.blogAppPartNames.FEED,b.blogAppPartNames.POSTS_LIST,b.blogAppPartNames.TICKER],c.appPartName)}).forEach(function(b){a(b.appLogicCustomizations).filter(function(d){return d.fieldId==="date"&&d.forType==="Post"&&!d.format&&d.key==="comp.format"&&a.includes(c[b.appPartName],d.view)}).forEach(function(a){a.format="*"}).value()}).value()}}});define("dataFixer/plugins/contactFormDataFixer",["lodash","coreUtils","translationsUtils"],function(a,b,c){"use strict";var d=["addressFieldLabel","emailFieldLabel","errorMessage","messageFieldLabel","nameFieldLabel","phoneFieldLabel","subjectFieldLabel","submitButtonLabel","successMessage","validationErrorMessage"];function e(){return a.get(typeof window!=="undefined"&&window,"rendererModel.siteInfo.documentType")==="Template"}function f(f,g,h){var i,j;if(!e()){return}i=b.wixUserApi.getLanguage(g.cookie,h);j=c.contactFormTranslations[i];if(!j){return}a.forOwn(f,function(b){if(b.type==="ContactForm"){a.forEach(d,function(a){b[a]=j[a]||b[a]})}})}function g(b){a.forOwn(b,function(a){if(a.type==="ContactForm"){if(!a.onSubmitBehavior){a.onSubmitBehavior="message"}}})}var h={exec:function(a,b,c,d){var e=a.data.document_data;f(e,c,d);g(e)}};return h});define("dataFixer/plugins/subscribeFormDataFixer",["lodash","coreUtils","translationsUtils"],function(a,b,c){"use strict";var d=["emailFieldLabel","errorMessage","firstNameFieldLabel","lastNameFieldLabel","phoneFieldLabel","submitButtonLabel","subscribeFormTitle","successMessage","validationErrorMessage"];
function e(){return a.get(typeof window!=="undefined"&&window,"rendererModel.siteInfo.documentType")==="Template"}function f(f,g,h){var i,j;if(!e()){return}i=b.wixUserApi.getLanguage(g.cookie,h);j=c.subscribeFormTranslations[i];if(!j){return}a.forOwn(f,function(b){if(b.type==="SubscribeForm"){a.forEach(d,function(a){b[a]=j[a]||b[a]})}})}function g(b){a.forOwn(b,function(a){if(a.type==="SubscribeForm"){if(!a.onSubmitBehavior){a.onSubmitBehavior="message"}}})}var h={exec:function(a,b,c,d){var e=a.data.document_data;f(e,c,d);g(e)}};return h});define("dataFixer/plugins/pageDataFixer",["lodash"],function(a){"use strict";function b(b){return a.get(b,"structure.type")==="Page"}function c(b){a(b.data.document_data).where({type:"Page"}).pluck("id").forEach(function(a){delete b.data.document_data[a]}).value()}function d(b){a.forEach(b.data.document_data,function(a){if(a.pageId==="#SITE_STRUCTURE"){a.pageId="#masterPage"}})}function e(a){if(b(a)){c(a)}d(a)}return{exec:e}});define("dataFixer/plugins/groupFixer",["lodash"],function(a){"use strict";var b="wysiwyg.viewer.components.Group";var c="wysiwyg.viewer.components.GroupSkin";function d(a){if(a.componentType===b){a.skin=c}}function e(b){a.forEach(b,function a(b){d(b);e(b.components)})}var f={exec:function(a){var b=a.structure;if(b){var c=b.components||b.children;var d=b.mobileComponents;if(c){e(c)}if(d){e(d)}}}};return f});define("dataFixer/plugins/textSecurityFixer",["lodash"],function(a){"use strict";var b=["RichText","Text","StyledText","MediaRichText"];function c(c){return a(c).pick(function(c){return a.includes(b,c.type)}).mapValues(function(a){a.text=d(a.text);a.text=e(a.text);return a}).value()}function d(a){return a&&a.replace(/(<object[^>]*>)(.*?)(<\/object>)/gi,"")}function e(a){return a&&a.replace(/<img[^>]*(onerror|onload|onmouseenter|onmousemove|onmouseleave|onmouseover|onmouseup|onmouseout)[^>]*\/?>(<\/img>)?/gi,"")}var f={exec:function(a){var b=a.data.document_data;if(b){c(b)}}};return f});define("dataFixer/plugins/pageUriSeoFixer",["lodash","coreUtils"],function(a,b){"use strict";var c=a.matchesProperty(["structure","type"],"Page");var d=a.matchesProperty("format",b.siteConstants.URL_FORMATS.SLASH);return{exec:function(b,e,f,g,h){if(d(h)&&!c(b)){a.forEach(h.pageIdToResolvedUriSEO,function(a,c){b.data.document_data[c].pageUriSEO=a.curr})}}}});define("dataFixer/plugins/migrateStripToColumnsContainer",["lodash","dataFixer/helpers/CompsMigrationHelper","coreUtils"],function(a,b,c){"use strict";function d(){return{type:"MediaContainerDesignData",id:c.guidUtils.getUniqueId("dataItem","-"),background:{id:c.guidUtils.getUniqueId("dataItem","-"),type:"BackgroundMedia",mediaRef:null,alignType:"center",fittingType:"fill",colorOpacity:0,colorOverlay:"",colorOverlayOpacity:1,imageOverlay:"",scrollType:"none",color:"#FFFFFF"}}}function e(){return{columnsMargin:0,frameMargin:0,fullWidth:true,rowMargin:0,siteMargin:0,type:"StripColumnsContainerProperties"}}function f(){return{type:"ColumnProperties",alignment:50}}function g(b,d){return{id:a.get(d,[b.id,"mediaId"],c.guidUtils.getUniqueId("media")),type:"Container",layout:{width:b.layout.width,height:b.layout.height,x:0,y:0,scale:1,rotationInDegrees:0,anchors:[{distance:0,topToTop:0,originalValue:0,type:"BOTTOM_PARENT",locked:true,targetComponent:b.id}],fixedPosition:false},components:b.components,componentType:"wysiwyg.viewer.components.Column",styleId:"strc1"}}function h(b,c){a.forEach(b.components,function(b){var d=a.get(b,["layout","anchors"],[]);a.forEach(d,function(a){if(a.type==="BOTTOM_PARENT"){a.targetComponent=c.id}})})}function i(b,c){if(b.behaviors){c.behaviors=a.clone(b.behaviors);delete b.behaviors}if(b.behaviorQuery){c.behaviorQuery=b.behaviorQuery;delete b.behaviorQuery}}function j(b,c,j,k){k.componentType="wysiwyg.viewer.components.StripColumnsContainer";delete k.skin;k.styleId="strc1";this.setComponentProperties(b,k,e(),c);var l=g(k,c);h(k,l);i(k,l);a.set(c,[k.id,"mediaId"],l.id);this.setComponentProperties(b,l,f(),c);l.designQuery=k.designQuery;delete k.designQuery;if(!j){k.layout.width=980;var m=d();this.setComponentDesignData(b,k,m,c)}else{k.layout.width=320;k.designQuery=a.get(c,[k.id,"designQuery"]);this.deleteComponentData(b,k)}delete k.dataQuery;k.components=[l]}var k={"wysiwyg.viewer.components.StripContainer":j};var l=new b(k);var m={exec:l.migratePage.bind(l)};return m});define("dataFixer/plugins/tinyMenuSkinBackgroundFixer",["lodash"],function(a){"use strict";var b="wysiwyg.viewer.skins.mobile.TinyMenuSkin";function c(c){if(c.skin!==b||a.isUndefined(c.style)||a.isUndefined(c.style.properties)){return}var d=[["bg","bgDrop"],["bg","bgOpen"],["txt","bordercolor"],["txt","iconcolor"],["bordercolor","borderColorSelected"]];var e=c.style.properties;var f=c.style.propertiesSource;function g(b,c,d){if(!a.isUndefined(b)&&!a.isUndefined(b[c])){b[d]=b[d]||b[c]}}a.forEach(d,function(a){var b=a[0];var c=a[1];g(e,b,c);g(f,b,c);b="alpha-"+b;c="alpha-"+c;g(e,b,c);g(f,b,c)})}var d={exec:function(b){var d=b.data&&b.data.theme_data;if(!a.isEmpty(d)){a.forEach(d,c)}}};return d});define("dataFixer/plugins/designDataFixer",["lodash","coreUtils"],function(a,b){"use strict";function c(a){return a.componentType==="wysiwyg.viewer.components.StripContainer"}function d(b){return!a.isUndefined(b.designQuery)}function e(c,d,e){if(a.isUndefined(e)){e=b.guidUtils.getUniqueId("dataItem","-")}d[e]={id:e,type:"MediaContainerDesignData",metaData:{isPreset:false,schemaVersion:"1.0",isHidden:false}};c.designQuery="#"+e;return e}function f(a,b,c){b[c]=a[c];delete a[c];return b[c]}function g(b,c,d,e){var g=d[b];if(!a.isUndefined(g.background)){var h=g.background.slice(1);var i=f(d,e,h);if(!a.isUndefined(i.mediaRef)){var j=i.mediaRef.slice(1);var k=f(d,e,j);if(k.type==="WixVideo"){var l=k.posterImageRef.slice(1);f(d,e,l)}if(!a.isUndefined(k.originalImageDataRef)){var m=k.originalImageDataRef.slice(1);f(d,e,m)}if(!a.isUndefined(k.link)){delete k.link}}if(!a.isUndefined(i.imageOverlay)){var n=i.imageOverlay.slice(1);f(d,e,n)}delete g.background;e[c].background="#"+h;return h}}function h(b,c,d,f,h){var i=h.dataQuery.slice(1);var j=e(h,c);d[i]=j;var k=g(i,j,b,c);if(!a.isUndefined(k)){f[i]=k}}function i(b,c,d,f){var g=f.dataQuery.slice(1);var h=d[g];var i="mobile_"+c[g];e(f,b,i);if(!a.isUndefined(h)){b[i].background="#"+h}}function j(b,e,f,g){var j={};var k={};var l=a.filter(b,c);a(l).reject(d).forEach(a.partial(h,f,g,k,j)).value();a(e).filter(function(a){return c(a)&&!d(a)}).forEach(a.partial(i,g,k,j)).value()}function k(b){if(!a.isUndefined(b.components)){return b.components}else if(!a.isUndefined(b.children)){return b.children}return[]}function l(b){var c=a.clone(b)||[];var d=[];while(c.length>0){var e=c.pop();d.push(e);var f=k(e);a.forEach(f,function(a){c.push(a)})}return d}function m(a){return l(k(a.structure))}function n(a){return l(a.structure.mobileComponents)}return{exec:function(a){var b=m(a);var c=n(a);a.data.design_data=a.data.design_data||{};j(b,c,a.data.document_data,a.data.design_data)}}});define("dataFixer/plugins/homePageLoginDataFixer",["lodash"],function(a){"use strict";function b(a){if(!a.metaData||a.metaData.schemaVersion!=="2.0"){a.sendMail=true}}function c(c){a.forEach(c,function(a){if(a.type==="LoginToWixLink"||a.type==="HomePageLogin"){b(a)}})}var d={exec:function(b){var d=b.data.document_data;if(!a.isEmpty(d)){c(d)}}};return d});define("dataFixer/plugins/characterSetsFixer",["lodash"],function(a){"use strict";var b={exec:function(b){if(b.structure&&b.structure.type==="Document"){if(a.isEmpty(b.data.document_data.masterPage.characterSets)){b.data.document_data.masterPage.characterSets=["latin"]}}return b}};return b});define("dataFixer/plugins/popupPropsTempDataFixer",["lodash"],function(a){"use strict";return{exec:function(b){var c=a.get(b,["data","component_properties",b.structure.id]);var d=c&&c.popup;if(d){a.forEach(["desktop","mobile"],function(b){var d=c[b];var e=c.popup[b];if(d||e){a.set(c,[b,["popup"]],a.assign(d||{},e||{}))}});delete c.popup}}}});define("dataFixer/plugins/blogSelectionSharerCustomizationsFixer",["lodash","coreUtils"],function(a,b){"use strict";return{exec:function(c){a(c.data.document_data).filter({type:"AppPart",appPartName:b.blogAppPartNames.SINGLE_POST}).forEach(function(b){var c=a.find(b.appLogicCustomizations,{forType:"Post",fieldId:"vars",key:"selectionSharerExperimentOpen",view:b.viewName});if(!c){c={forType:"Post",fieldId:"vars",key:"selectionSharerExperimentOpen",view:b.viewName,type:"AppPartCustomization",format:""};b.appLogicCustomizations.push(c)}}).value()}}});define("dataFixer/plugins/nicknameTempFixer",["lodash","coreUtils"],function(a,b){"use strict";function c(c){if(a.get(c,"structure.id")===b.siteConstants.MASTER_PAGE_ID){delete c.structure.nickname}var i=a.get(c,"structure");var j=f(i);var k=f(i,true);function l(b,f){var i=h(b);var j=a.get(b,"connectionQuery");var k;if(j){k=c.data.connections_data[j];k.items=[i].concat(k.items)}else{k=g([i]);e(b,k,f);a.set(c.data,["connections_data",k.id],k)}d(b,f)}a.forEach(j,function(a){l(a,k[a.id]);delete k[a.id]});a.forEach(k,function(a){l(a)})}function d(a,b){delete a.nickname;if(b){delete b.nickname}}function e(a,b,c){a.connectionQuery=b.id;if(c){c.connectionQuery=a.connectionQuery}}function f(a,c){return b.dataUtils.getAllCompsInStructure(a,c,function(a){return a.nickname})}function g(a){return{id:b.guidUtils.getUniqueId("connection","-"),type:"ConnectionList",items:a}}function h(b){var c=a.get(b,"nickname");return{type:"WixCodeConnectionItem",role:c}}return{exec:c}});define("dataFixer/plugins/boxSlideShowDataFixer",["lodash","coreUtils","translationsUtils"],function(a,b,c){"use strict";var d="BOXSLIDESHOW_Regular_Slideshow_Slides_New_Slide_Label";function e(){return a.get(typeof window!=="undefined"&&window,"rendererModel.siteInfo.documentType")==="Template"}function f(f,g,h){var i,j;if(!e()){return}i=g?b.wixUserApi.getLanguage(g.cookie,h):"en";j=c.boxSlideShowTranslation[i];if(!j){return}a.forOwn(f,function(a){if(a.type==="boxSlideShowSlide"||a.type==="StripContainerSlideShowSlide"){var b=a.title?a.title.split(" ")[1]:"";a.title=j[d]&&b?j[d].replace("<%= curr_slide %>",b):a.title}})}var g={exec:function(a,b,c,d){var e=a.data.document_data;f(e,c,d)}};return g});define("dataFixer/core/fixPageData",["lodash","experiment","loggingUtils","dataFixer/plugins/galleriesMobileTypeFixer","dataFixer/plugins/pageTopFixer","dataFixer/plugins/masterPageFixer","dataFixer/plugins/menuFixer","dataFixer/plugins/verticalMenuFixer","dataFixer/plugins/skinFixer","dataFixer/plugins/stylesFixer","dataFixer/plugins/bgImageStripDataFixer","dataFixer/plugins/compFixer","dataFixer/plugins/galleryFixer","dataFixer/plugins/behaviorsFixer","dataFixer/plugins/connectionsDataFixer","dataFixer/plugins/fiveGridLineLayoutFixer","dataFixer/plugins/toPageAnchorsFixer","dataFixer/plugins/wrongAnchorsFixer","dataFixer/plugins/addMissingAnchorsOfMasterPage","dataFixer/plugins/customSiteMenuFixer","dataFixer/plugins/sitePagesFixer","dataFixer/plugins/linkRefDataFixer","dataFixer/plugins/fromDocumentToThemeData","dataFixer/plugins/tpaGluedWidgetDataFixer","dataFixer/plugins/compsWithImagesDataFixer","dataFixer/plugins/appPartCustomizationsFixer","dataFixer/plugins/backgroundMediaConverter","dataFixer/plugins/backgroundMediaUndefinedFixer","dataFixer/plugins/backgroundMediaRefDuplicationFixer","dataFixer/plugins/stripContainerBgEffectFixer","dataFixer/plugins/documentMediaFixer","dataFixer/plugins/pinterestFollowFixer","dataFixer/plugins/blogPageMenuFixer","dataFixer/plugins/appPartMediaInnerCustomizationFormatFixer","dataFixer/plugins/appPartReadMoreValueCustomizationFormatFixer","dataFixer/plugins/appPartTagsValueCustomizationFormatFixer","dataFixer/plugins/appPartDuplicateCustomizationFixer","dataFixer/plugins/blogCustomFeedPostsPerPageCustomizationFixer","dataFixer/plugins/blogDateAlignmentCustomizationFixer","dataFixer/plugins/appPartBrokenButtonStyleFixer","dataFixer/plugins/blogDateFormatCustomizationFormatFixer","dataFixer/plugins/contactFormDataFixer","dataFixer/plugins/subscribeFormDataFixer","dataFixer/plugins/pageDataFixer","dataFixer/plugins/groupFixer","dataFixer/plugins/textSecurityFixer","dataFixer/plugins/pageUriSeoFixer","dataFixer/plugins/migrateStripToColumnsContainer","dataFixer/plugins/tinyMenuSkinBackgroundFixer","dataFixer/plugins/designDataFixer","dataFixer/plugins/homePageLoginDataFixer","dataFixer/plugins/characterSetsFixer","dataFixer/plugins/popupPropsTempDataFixer","dataFixer/plugins/blogSelectionSharerCustomizationsFixer","dataFixer/plugins/nicknameTempFixer","dataFixer/plugins/boxSlideShowDataFixer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba){"use strict";var ca=a.compact([d,f,A,B,C,g,t,h,i,j,k,l,m,n,o,b.isOpen("fix_nicknames")&&aa,p,q,r,s,u,v,w,e,x,y,z,X,D,E,F,G,H,I,J,L,M,K,N,O,P,Q,R,S,T,U,V,W,Y,$,Z,_,ba]);return function b(d,e,f,g,h,i){var j=d.structure.id;if(!j){j=" masterPage"}else if(j.length===5||j.length===4){j=""}else{j=" "+j}return c.performance.time("Fix page"+j,function(){var b=d.data||{};b.document_data=b.document_data||{};b.theme_data=b.theme_data||{};b.component_properties=b.component_properties||{};d.data=b;a.forEach(ca,function(a){a.exec(d,e,f,g,h,i)});return d},true)}});define("dataFixer/plugins/deprecatedSiteModelMigrater",["lodash","coreUtils","dataFixer/core/fixPageData"],function(a,b,c){"use strict";function d(a){switch(a){case"wysiwyg.viewer.components.WSiteStructure":return"Document";case"mobile.core.components.Page":return"Page";case"wixapps.integration.components.Area":case"mobile.core.components.Container":case"wysiwyg.viewer.components.HeaderContainer":case"wysiwyg.viewer.components.FooterContainer":case"wysiwyg.viewer.components.PagesContainer":case"wysiwyg.viewer.components.ScreenWidthContainer":case"wysiwyg.viewer.components.StripContainer":return"Container"}return"Component"}function e(b,c,e,f,g){var h=a(f).pluck("name").invoke("toLowerCase").zipObject(a.pluck(f,"value")).value();if(d(h.comp)==="Page"){c.page=h.id}b.pagesData[c.page]=b.pagesData[c.page]||{structure:{},data:{},theme_data:{}};var i=b.pagesData[c.page].structure=b.pagesData[c.page].structure||{};if(a.has(c.childrenIndex,c.page)){for(var j=0;j<c.childrenIndex[c.page].length;j++){i=i.components[c.childrenIndex[c.page][j]]}var k={};c.childrenIndex[c.page].push(i.components.length);i.components.push(k);i=k}else{c.childrenIndex[c.page]=[]}i.componentType=h.comp;i.type=d(h.comp);i.id=h.id;i.components=[];i.skin=h.skin;i.styleId=h.styleid;if(h.dataquery){i.dataQuery=h.dataquery}i.propertyQuery=h.propertyquery;i.layout={width:parseInt(h.width,10),height:parseInt(h.height,10),x:parseInt(h.x,10),y:parseInt(h.y,10),anchors:b.wixAnchors[h.id]||[]}}function f(a,b,c){if(b.childrenIndex[b.page].length===0){b.page="masterPage"}else{b.childrenIndex[b.page].pop()}}function g(d){d.pagesData={};var g=a.get(d,"wixData.document_data.SITE_STRUCTURE.mainPage")||a.get(d,"wixData.document_data.masterPage.mainPage");var h=g&&g.slice(1);d.pagesData.masterPage={data:d.wixData};d.pagesData.masterPage.structure={};var i={page:"masterPage",childrenIndex:{}};b.htmlParser(d.wixHtmlRaw,{start:e.bind(undefined,d,i),end:f.bind(undefined,d,i)});var j=a.keys(d.pagesData);var k=a.without(j,"masterPage");d.pagesData.masterPage.data.document_data.MAIN_MENU=d.pagesData.masterPage.data.document_data.MAIN_MENU||{items:[],type:"Menu",id:"MAIN_MENU",metaData:{}};a.forEach(j,function(a){d.pagesData[a]=c(d.pagesData[a],k,d.requestModel,d.currentUrl,d.urlFormatModel)});d.publicModel.pageList={mainPageId:h,pages:a.map(k,function(b){return a.chain(d).get(["pagesData","masterPage","data","document_data",b]).pick(["title","pageUriSEO"]).assign({pageId:b}).value()})}}return g});define("dataFixer/plugins/fixBackgroundData",["lodash","imageClientApi","dataFixer/imageService/imageTransformDataFixers"],function(a,b,c){"use strict";function d(b){var c=b.getMasterPageData();var d=c.theme_data;var h=c.document_data;var i=a(h).filter({type:"BackgroundImage"}).map("id").value();if(f(h)){return}if(e(h)){g(d,h)}else{a.forEach(i,function(a){l(h[a])})}}function e(b){var c=a.find(b,{type:"Page"});return!b[c.id].pageBackgrounds}function f(b){var c=a.find(b,{type:"Page"});return b[c.id].pageBackgrounds&&b[c.id].pageBackgrounds.type==="BackgroundMediaUnified"}function g(b,c){var d="none 0 0 center center auto repeat repeat scroll none";var e=a(c).filter({type:"Page"}).map("id").value();var f=b.THEME_DATA.siteBg||d;var g=(b.THEME_DATA.mobileBg==="[siteBg]"?b.THEME_DATA.siteBg:b.THEME_DATA.mobileBg)||d;var j=i(f);var k=i(g);j.id="customBgImg"+h();k.id="customBgImg"+h([j.id]);c[j.id]=j;c[k.id]=k;a.forEach(e,function(a){c[a].pageBackgrounds={desktop:{custom:true,isPreset:false,ref:"#"+j.id},mobile:{custom:true,isPreset:false,ref:"#"+k.id}}})}function h(b){var c="";b=b||[];while(a.includes(b,c)){c=a.random(0,99999).toString(36).replace(" ","_")}return c}function i(b){var c=a.compact(b.split(" "));return k.apply(this,c)}function j(a){var c={};c[b.fittingTypes.TILE]=b.fittingTypes.LEGACY_BG_FIT_AND_TILE;c[b.fittingTypes.TILE_HORIZONTAL]=b.fittingTypes.LEGACY_BG_FIT_AND_TILE_HORIZONTAL;c[b.fittingTypes.TILE_VERTICAL]=b.fittingTypes.LEGACY_BG_FIT_AND_TILE_VERTICAL;c[b.fittingTypes.ORIGINAL_SIZE]=b.fittingTypes.LEGACY_BG_NORMAL;return c[a]||a}function k(a,b,d,e,f,g,h,i,k,l,m,n){var o=c.cssToAlignType(e+" "+f);var p=c.cssToFittingType({bgRepeat:h+" "+i,bgSize:g});p=j(p);m=m||{};if(!l||l==="none"){l="rgba(0,0,0,0)"}return{type:"BackgroundMediaUnified",alignType:o,fittingType:p,attachment:k,imageWidth:Number(b),imageHeight:Number(d),mediaType:"image",uri:a,color:l,metaData:{isHidden:m.isHidden||false,isPreset:m.isPreset||false,schemaVersion:2},id:n}}function l(a){var b=[a.url,a.imagesizew,a.imagesizeh,a.positionx,a.positiony,a.width,a.repeatx,a.repeaty,a.attachment,a.color,a.metaData,a.id];return k.apply(this,b)}return{fixBackgroundData:d,migrateBgDataItem:l,migrateBgString:i}});define("dataFixer",["dataFixer/core/fixPageData","dataFixer/plugins/deprecatedSiteModelMigrater","dataFixer/plugins/fixBackgroundData","dataFixer/imageService/imageTransformDataFixers","dataFixer/helpers/anchorCyclesHelper"],function(a,b,c,d,e){"use strict";return{fix:a,deprecatedSiteModelMigrater:b,fixBackgroundData:c,imageTransformDataFixers:d,anchorCyclesHelper:e}});