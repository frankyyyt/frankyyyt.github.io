define("panels/panelManager/biEvents.json",[],function(){return{PANEL_OPENED:{evid:309,src:38,endpoint:"editor",fields:{panel_name:"string"}},PANEL_CLOSED:{evid:345,src:38,endpoint:"editor",fields:{panel_name:"string"}}}});define("panels/panelManager/bi",["panels/panelManager/biEvents.json"],function(a){"use strict";var b;function c(a,c){if(b){b.event(a,c)}}function d(c){b=c;b.register("panels","event",a)}return{events:a,report:c,register:d}});define("panels/panelManager/panelManager",["lodash","core","util","firstTimePanelsComponents","panels/panelManager/bi","pLoader!santa:utils","experiment"],function(a,b,c,d,e,f,g){"use strict";function h(){var h="58406e7a-1ad0-4105-8e37-c053b529f9d8";var i=[];var j=[];var k=[];var l=false;var m=null;function n(a){i=a;o()}function o(){l=true;a.forEach(j,function(a){a()});j=a.xor(j,k);k=[];l=false}function p(b,c){return a.assign({},c,{panelName:b,key:b+a.uniqueId()})}function q(){a.forEach(i,function(a){e.report(e.events.PANEL_CLOSED,{panel_name:a.name})});i=[]}function r(c){c=a.merge({component:null,learn_more:null,origin:null,panel_name:null},c);e.report(b.bi.events.help.HELP_CLICK,c)}return{openPanel:function(b,c,d){if(!d){q()}if(a.includes(b,"help")){f.log.error("openPanel method is deprecated for help panels. Use openHelpCenter instead")}var g=a.find(i,{name:b});if(g&&g.singleInstance){this.updatePanelProps(b,c);return}var h={name:b,props:p(b,c)};n(i.concat(h));e.report(e.events.PANEL_OPENED,{panel_name:b})},openComponentPanel:function(c,d){d=d||{};q();var f={name:c,props:a.assign({},p(c,d),{useLastPanelPosition:!!d.useLastPanelPosition}),frameType:b.constants.PANEL_TYPES.COMP};n(i.concat(f));e.report(e.events.PANEL_OPENED,{panel_name:c})},openFullStagePanel:function(a){q();var c="platformPanels.fullStage";var d={name:c,props:p(c,a),frameType:b.constants.PANEL_TYPES.FULL_STAGE};n(i.concat(d));e.report(e.events.PANEL_OPENED,{panel_name:c})},closeFullStagePanel:function(){this.closeAllPanelsOfType(b.constants.PANEL_TYPES.FULL_STAGE)},replaceComponentPanel:function(b,c){this.openComponentPanel(b,a.assign({},c,{useLastPanelPosition:true}))},openHelpCenter:function(b,c,d){var e=b+"?";if(a.isEmpty(e)){e=h}e+=this.getUserPermissionsUrlParams();m=a.assign({},c||{},{helpUrl:e,panelName:"panels.helpPanels.helpPanel"});o();r(d)},getUserPermissionsUrlParams:function(){var b="";var d=c.editorModel.permissionsInfo;if(d){var e=d.ownerId;b+="&ownerId="+e;var f=a.pluck(d.loggedInUserRoles,"role").join(",");b+="&roles="+f}return b},closeHelpCenter:function(){m=null;o()},getHelpPanelProps:function(){return a.clone(m)},closePanelByName:function(b){var c=a.reject(i,{name:b});var d=c.length;var f=i.length;if(d!==f){n(c);e.report(e.events.PANEL_CLOSED,{panel_name:b})}},closePanelByPropKey:function(b,c){n(a.reject(i,function(a){return a.props[b]===c}));e.report(e.events.PANEL_CLOSED)},closeAllPanelsOfType:function(b){var c;if(a.isArray(b)){c=a.groupBy(this.getOpenPanels(),function(c){return a.includes(b,c.frameType)})}else{c=a.groupBy(this.getOpenPanels(),{frameType:b})}n(c.false||[]);a.forEach(c.true,function(a){e.report(e.events.PANEL_CLOSED,{panel_name:a.name})})},closePanelsOpenedAfter:function(b){var c=a.findIndex(this.getOpenPanels(),{name:b});n(a.take(this.getOpenPanels(),c+1))},closeAllPanels:function(){q();o()},getOpenPanels:function(){return a.clone(i)},registerPanelType:function(b,c,d){var e=this.getOpenPanels();var f=a.find(e,{name:b});if(f){f.frameType=c;f.singleInstance=d}n(e)},registerForStageMouseDown:function(b,c){a(this.getOpenPanels()).filter({frameType:b}).forEach(function(a){a.onMouseDown=c}).commit()},notifyMouseDown:function(b){a.invoke(this.getOpenPanels(),"onMouseDown",b)},registerObserver:function(a){j.push(a)},unregisterObserver:function(b){if(l){k.push(b)}else{j=a.xor(j,[b])}},updatePanelProps:function(b,c){var d=this.getOpenPanels(),e=g.isOpen("se_updatePanelPropsFix");a(d).filter({name:b}).forEach(function(b){if(e){a.assign(b.props,c)}else{a.merge(b.props,c)}}).commit();n(d)},getPanelsOfType:function(b){return a.filter(this.getOpenPanels(),{frameType:b})},initBIHandler:function(a){e.register(a)},openFirstTimePanel:function(b){if(a.includes(d,b)){var c="compPanels.panels."+b+".firstTime";this.openComponentPanel(c,{panelName:c,title:"firstTime"})}}}}return h});define("panels/panelManager/panelManagerFactory",["panels/panelManager/panelManager"],function(a){"use strict";var b=null;return{getManager:function(){b=b||new a;return b}}});define("panels/mixins/panelFrameMixin",["lodash","react","util","core","panels/panelManager/panelManagerFactory"],function(a,b,c,d,e){"use strict";return{propTypes:{panelName:b.PropTypes.string.isRequired,helpId:b.PropTypes.string,isSingleInstance:b.PropTypes.bool},mixins:[c.blockOuterScrollMixin],getDefaultProps:function(){return{isSingleInstance:false}},componentWillMount:function(){e.getManager().registerPanelType(this.props.panelName,this.constructor.displayName,this.props.isSingleInstance)},close:function(){e.getManager().closePanelByName(this.props.panelName)},openHelpCenter:function(b){if(this.props.helpId){var c={learn_more:false,origin:d.constants.BI.HELP.ORIGIN.PANEL,panel_name:this.props.panelName,component:this.props.selectedComponentType};if(!this.props.selectedComponentType){a.merge(c,a.pick(b,"component"))}e.getManager().openHelpCenter(this.props.helpId,null,null,c)}if(this.props.onHelpClicked){this.props.onHelpClicked()}}}});define("panels/frames/leftPanelFrame.rt",["react","lodash","symbols"],function(a,b,c){"use strict";function d(a){if(this.props.onContextMenu){this.props.onContextMenu(a)}}return function(){return a.createElement("div",{className:"left-panel-frame panel-index-"+this.props.panelIndex+" "+this.props.panelClass+(this.props.panelIndex===0?" first-panel":""),style:this.getFrameStyle(),onWheel:this.blockOuterScroll,onContextMenu:d.bind(this)},!!this.props.label?a.createElement("header",{key:"header",className:"panel-header light"},a.createElement("span",{className:"panel-header-title"},this.props.label),this.props.helpId||this.props.onHelpClicked?a.createElement("button",{key:"headerButton",className:"help",onClick:this.openHelpCenter},"?"):null,a.createElement("button",{className:"close",onClick:this.close},a.createElement(c.symbol,{name:"headerCloseButton"}))):null,a.createElement("div",{id:this.props.id,className:"left-panel-frame-content "+(this.props.className||"")},this.props.children))}});define("panels/frames/leftPanelFrame",["react","lodash","core","panels/mixins/panelFrameMixin","panels/frames/leftPanelFrame.rt","panels/panelManager/panelManagerFactory"],function(a,b,c,d,e,f){"use strict";return a.createClass({displayName:c.constants.PANEL_TYPES.LEFT,mixins:[d],PropTypes:{panelClass:a.PropTypes.string.isRequired,panelIndex:a.PropTypes.number.isRequired,label:a.PropTypes.string,onClose:function(a,b){if(a.title&&typeof a[b]!=="function"){return new Error("onClose prop must be of type a function")}},styleOverride:a.PropTypes.object,openPanelBiEvent:a.PropTypes.object,openPanelBiParams:a.PropTypes.object},getFrameStyle:function(){return this.props.styleOverride},componentWillMount:function(){var a=f.getManager();var c=b.filter(a.getOpenPanels(),{frameType:this.constructor.displayName});if(b.size(c)>1){a.closePanelByName(b.first(c).name)}a.registerForStageMouseDown(this.constructor.displayName,this.close)},render:e})});define("panels/mixins/disableKeyboardShortcutsMixin",["lodash","util"],function(a,b){"use strict";var c=b.keyboardShortcuts;var d=0;var e=[];function f(){return c.CONTEXTS.MODAL_PANEL+"_"+d++}return{componentWillMount:function(){var a=false;if(!c.isEnabled()){c.enable();a=true}e.push(c.getContext());this.dynamicKeyboardContext=f();c.registerContext(this.dynamicKeyboardContext,this.getPanelShortcuts());c.setContext(this.dynamicKeyboardContext);if(a){c.disable()}},componentWillUnmount:function(){var a=false;if(!c.isEnabled()){c.enable();a=true}c.unregisterContext(this.dynamicKeyboardContext);var b=e.pop();if(b!==this.dynamicKeyboardContext){c.setContext(b)}if(a){c.disable()}},getPanelShortcuts:function(){if(this.props.keyboardShortcuts){if(this.props.shouldExtendDefaultShortcuts){return a.assign(this.getDefaultShortcuts(),this.props.keyboardShortcuts)}return this.props.keyboardShortcuts}return this.getDefaultShortcuts()},getDefaultShortcuts:function(){return{esc:this.props.isBareMode?a.noop:this.onCancel||this.close}}}});define("panels/mixins/dontShowAgainMixin",[],function(){"use strict";return{getDontShowAgain:function(){if(this.props.userPrefType&&this.props.dontShowAgainKey){return this.props.editorAPI.userPreferences[this.props.userPrefType].get(this.props.dontShowAgainKey)}return null},setDontShowAgain:function(a){if(!this.props.userPrefType||!this.props.dontShowAgainKey){return null}this.props.editorAPI.userPreferences[this.props.userPrefType].set(this.props.dontShowAgainKey,a);this.setState({dontShowAgain:a})},linkDontShowAgainValue:function(){return{value:this.state.dontShowAgain,requestChange:this.setDontShowAgain}}}});define("panels/frames/messagePanelFrame.rt",["react","lodash","baseUI","symbols"],function(a,b,c,d){"use strict";function e(a,c){var d=b.assign({},a,c);if(a.hasOwnProperty("style")){d.style=b.defaults(d.style,a.style)}if(a.hasOwnProperty("className")&&c.hasOwnProperty("className")){d.className=c.className+" "+a.className}return d}return function(){return a.createElement("div",{className:"panel-frame-container screen-centered-frame message-panel-frame-z-index"},a.createElement("div",{className:"dark-frame-overlay"}),a.createElement("div",e({className:"message-panel-frame"},this.getPanelProps()),a.createElement("header",{className:"panel-header dark"},this.props.panelTitle?a.createElement("span",{key:"headerTitle",className:"panel-header-title"},this.props.panelTitle):null,a.createElement("button",{className:"close",onClick:this.onCancel},a.createElement(d.symbol,{name:"headerCloseButton"}))),a.createElement("div",{className:"content"},this.props.children),a.createElement("div",{className:"panel-footer"},this.props.footerText?a.createElement("div",{key:"footerText",className:"footer-text"},this.props.footerText):null,this.props.dontShowAgainKey&&this.props.userPrefType?a.createElement(c.toggle,{key:"dont-show-again-toggle",name:"checkbox",labelAfterSymbol:true,className:"dont-show-again",label:"Notification_Box_Dont_Show_Again",valueLink:this.linkDontShowAgainValue()}):null,this.props.cancelLabel?a.createElement(c.button,{key:"btn-confirm-secondary",className:"btn-confirm-secondary",onClick:this.onCancel,label:this.props.cancelLabel}):null,a.createElement(c.button,{className:"btn-confirm-primary",onClick:this.onConfirm,label:this.props.confirmLabel}))))}});define("panels/frames/messagePanelFrame",["react","lodash","core","panels/mixins/panelFrameMixin","panels/mixins/disableKeyboardShortcutsMixin","panels/mixins/dontShowAgainMixin","panels/frames/messagePanelFrame.rt"],function(a,b,c,d,e,f,g){"use strict";return a.createClass({displayName:c.constants.PANEL_TYPES.MESSAGE,mixins:[d,e,f],propTypes:{panelName:a.PropTypes.string.isRequired,panelTitle:a.PropTypes.string,width:a.PropTypes.string,height:a.PropTypes.string,onConfirm:a.PropTypes.func,confirmLabel:a.PropTypes.string,keyboardShortcuts:a.PropTypes.object,shouldExtendDefaultShortcuts:a.PropTypes.bool,dontShowAgainKey:a.PropTypes.string,userPrefType:a.PropTypes.oneOf(["site","session","global"]),showCancelBtn:a.PropTypes.bool,cancelLabel:a.PropTypes.string,onCancel:a.PropTypes.func,type:a.PropTypes.string},getInitialState:function(){return{dontShowAgain:this.getDontShowAgain(),buttonWasClicked:false}},getDefaultProps:function(){return{confirmLabel:"messagePanelFrame_Confirm"}},getPanelProps:function(){var a=this.props.width;var c=this.props.height;var d={width:a,height:c};return b({style:d}).defaults(this.props).omit("children","width","height").value()},_closeAndCall:function(a){if(!this.state.buttonWasClicked){this.setState({buttonWasClicked:true});this.close();if(a){a()}}},onConfirm:function(){this._closeAndCall(this.props.onConfirm)},onCancel:function(){this._closeAndCall(this.props.onCancel)},render:g})});define("panels/mixins/panelDragLimitsMixin",["reactDOM","core","jquery"],function(a,b,c){"use strict";return{getDragLimits:function(d){var e=b.constants.PANELS.PANEL_SIZE_TO_KEEP_IN_VIEW;var f=b.utils.stageUtils.getStageLayout();var g=d?c(a.findDOMNode(d)):c(a.findDOMNode(this));var h=g.height();var i=g.width();var j=f.left-i+e;var k=f.right+i-e;var l=f.bottom+h-e;return{x:[j,k],y:[f.top+10,l]}}}});define("panels/frames/toolPanelFrame.rt",["react","lodash","baseUI","symbols"],function(a,b,c,d){"use strict";function e(a,c){var d=b.assign({},a,c);if(a.hasOwnProperty("style")){d.style=b.defaults(d.style,a.style)}if(a.hasOwnProperty("className")&&c.hasOwnProperty("className")){d.className=c.className+" "+a.className}return d}function f(a){this.startDrag(a,this.getDragLimits(this.refs.contentWrapper),this.refs.contentWrapper)}return function(){return a.createElement("div",{className:"panel-frame-container tool-panel-frame-container tool-panel-frame-z-index"+(this.props.isBlockingLayerFullScreen?" full-screen":""),onWheel:this.blockOuterScrollIfNecessary},a.createElement("div",{className:"transparent-frame-overlay",onClick:this.closePanel,ref:"closeButton"}),a.createElement("div",e({ref:"contentWrapper",className:"tool-panel-frame"},this.getContentWrapperProps()),this.props.headerTitle?a.createElement("header",{ref:"header",key:"toolFrameHeader",onMouseDown:f.bind(this),className:"panel-header dragger dark"},this.props.headerTitle?a.createElement("span",{key:"headerTitle",className:"panel-header-title"},this.props.headerTitle):null,a.createElement("button",{className:"close",onClick:this.closePanel},a.createElement(d.symbol,{name:"headerCloseButton"})),this.props.helpId?a.createElement("button",{className:"help",onClick:this.openHelpCenter,key:"openHelpCenter"},"?"):null):null,a.createElement("div",{className:"content"+(this.props.contentClass?" "+this.props.contentClass:"")},this.props.children)))}});define("panels/frames/toolPanelFrame",["reactDOM","react","lodash","jquery","core","util","panels/mixins/panelFrameMixin","panels/mixins/disableKeyboardShortcutsMixin","panels/mixins/panelDragLimitsMixin","panels/frames/toolPanelFrame.rt"],function(a,b,c,d,e,f,g,h,i,j){"use strict";return b.createClass({displayName:e.constants.PANEL_TYPES.TOOL,mixins:[e.mixins.editorAPIMixin,g,f.draggableMixin,h,i],propTypes:{panelName:b.PropTypes.string.isRequired,selectedComponentType:b.PropTypes.string,headerTitle:b.PropTypes.string,width:b.PropTypes.string,height:b.PropTypes.string,top:b.PropTypes.oneOfType([b.PropTypes.string,b.PropTypes.number]),left:b.PropTypes.oneOfType([b.PropTypes.string,b.PropTypes.number]),isBlockingLayerFullScreen:b.PropTypes.bool,shouldBlockOuterScroll:b.PropTypes.bool,contentClass:b.PropTypes.string,onClose:b.PropTypes.func},getContentWrapperProps:function(){var a=["width","height","top","left"];var b=c.omit(this.props,"children",a);b.style=c.pick(this.props,a);return b},getPanelFramePosition:function(){return d(a.findDOMNode(this.getContentWrapperElement())).offset()},getContentWrapperElement:function(){return this.refs.contentWrapper},blockOuterScrollIfNecessary:function(){if(this.props.shouldBlockOuterScroll){this.blockOuterScroll.apply(this,arguments)}},closePanel:function(){if(this.props.onClose){this.props.onClose()}this.close()},render:j})});define("panels/frames/focusPanelFrame.rt",["react","lodash","symbols","util"],function(a,b,c,d){"use strict";function e(a){if(this.props.onContextMenu){this.props.onContextMenu(a)}}return function(){return a.createElement("div",{className:"panel-frame-container screen-centered-frame focus-panel-frame-z-index "+(this.props.frameClassName||""),onWheel:this.blockOuterScroll,onContextMenu:e.bind(this)},a.createElement("div",{className:this.getClassName("focus-panel-frame"),style:this.getWidthHeight()},!this.shouldHideHeader()?a.createElement("header",{className:this.getHeaderClassName()+" panel-header dark",key:"header"},a.createElement("span",{className:"panel-header-title"},this.props.title),a.createElement("button",{className:"close",onClick:this.onXButtonClick},a.createElement(c.symbol,{name:"headerCloseButton"})),!this.props.shouldHideHelp?a.createElement("button",{className:"help",onClick:this.openHelpCenter,key:"help"},"?\n            "):null):null,a.createElement("div",{className:!!this.props.title?"focus-panel-frame-content":"focus-panel-frame-content-no-header",style:{backgroundColor:this.props.containerBackground}},this.props.children)),a.createElement("div",{className:"dark-frame-overlay",onClick:this.handleBlur,style:{backgroundColor:this.props.overlayBackground}}))}});define("panels/frames/focusPanelFrame",["react","lodash","core","util","panels/mixins/panelFrameMixin","panels/mixins/disableKeyboardShortcutsMixin","panels/frames/focusPanelFrame.rt"],function(a,b,c,d,e,f,g){"use strict";var h={OUT_OF_FOCUS:"out_of_focus",X_BUTTON:"x_button"};return a.createClass({mixins:[e,f],propTypes:{panelName:a.PropTypes.string.isRequired,width:a.PropTypes.string,height:a.PropTypes.string,title:a.PropTypes.string,helpId:a.PropTypes.string,headerClassName:a.PropTypes.string,frameClassName:a.PropTypes.string,shouldHideHeader:a.PropTypes.bool,shouldHideHelp:a.PropTypes.bool,shouldNotCloseOnBlur:a.PropTypes.bool,keyboardShortcuts:a.PropTypes.object,shouldExtendDefaultShortcuts:a.PropTypes.bool},displayName:c.constants.PANEL_TYPES.FOCUS,getHeaderClassName:function(){return this.props.headerClassName||"panel-header"},getFrameProps:function(){return{style:{width:this.props.width,height:this.props.height}}},shouldHideHeader:function(){return this.props.shouldHideHeader},shouldCloseFrame:function(a){if(this.props.onClose){return this.props.onClose(a)===true}return true},onXButtonClick:function(){this.closeFrameIfNeeded(h.X_BUTTON)},closeFrameIfNeeded:function(a){if(this.shouldCloseFrame(a)){this.close()}},handleBlur:function(){if(!this.props.shouldNotCloseOnBlur){this.closeFrameIfNeeded(h.OUT_OF_FOCUS)}},getClassName:function(a){return d.inheritClassName(this.props,a)},getWidthHeight:function(){var a={};if(this.props.width){a.width=this.props.width}if(this.props.height){a.height=this.props.height}return a},render:g})});define("panels/frames/helpPanelFrame.rt",["react","lodash","symbols","baseUI"],function(a,b,c,d){"use strict";function e(a){this.startDrag(a,this.getDragLimits())}return function(){return a.createElement("div",{className:"help-panel-frame"},a.createElement("header",{ref:"header",onMouseDown:e.bind(this),className:"panel-header dragger dark help-panel-frame-drag-handle"},a.createElement("button",{className:"close",onClick:this.closeHelpCenter},a.createElement(c.symbol,{name:"headerCloseButton"}))),a.createElement("iframe",{id:this.props.id,className:this.props.className||"",src:this.getUrlPrefix()+this.props.helpUrl,ref:"helpIframe"}),a.createElement(d.preloader,{className:b({hidden:!this.state.showLoader}).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" ")}))}});define("panels/frames/helpPanelFrame",["reactDOM","react","util","core","panels/mixins/panelFrameMixin","panels/panelManager/panelManagerFactory","panels/frames/helpPanelFrame.rt"],function(a,b,c,d,e,f,g){"use strict";return b.createClass({displayName:d.constants.PANEL_TYPES.HELP,mixins:[e,c.draggableMixin,d.mixins.editorAPIMixin],PropTypes:{helpUrl:b.PropTypes.string,closePanelBiEvent:b.PropTypes.object,closePanelBiParams:b.PropTypes.object,openPanelBiEvent:b.PropTypes.object,openPanelBiParams:b.PropTypes.object,isMobileEditor:b.PropTypes.bool},getInitialState:function(){return{showLoader:true}},getUrlPrefix:function(){var a="https://www.wix.com/support/html5/widget/cb6480f3-768b-4737-ab8f-10fe2e4fa2ab/article/";var b=this.getEditorAPI().getLanguageCode();return b==="en"?a:a.replace("www",b)},componentDidMount:function(){if(this.props.openPanelBiEvent&&this.props.openPanelBiParams){this.getEditorAPI().bi.event(this.props.openPanelBiEvent,this.props.openPanelBiParams)}a.findDOMNode(this.refs.helpIframe).addEventListener("load",this.hideLoader)},componentWillReceiveProps:function(a){if(a.isMobileEditor!==this.props.isMobileEditor){this.closeHelpCenter()}},getDragLimits:function(){var a=d.utils.stageUtils.getViewPort();return{y:[a&&a.minY||this.getEditorAPI().editorConfig.topBarHeight]}},componentWillMount:function(){f.getManager().registerPanelType(this.props.panelName,this.constructor.displayName)},componentWillUnmount:function(){if(this.props.closePanelBiEvent&&this.props.closePanelBiParams){this.getEditorAPI().bi.event(this.props.closePanelBiEvent,this.props.closePanelBiParams)}},closeHelpCenter:function(){f.getManager().closeHelpCenter()},onCancel:function(){this.closeHelpCenter()},hideLoader:function(){this.setState({showLoader:false})},render:g})});define("panels/frames/pagesPanelFrame.rt",["react","lodash","symbols","baseUILib"],function(a,b,c,d){"use strict";return function(){return a.createElement("div",{className:this.generateClassName("pages-panel-frame")},a.createElement(d.panelHeader,{className:"tag-triangle tag-top dark",onClose:this.close,onHelp:this.openHelpCenter},this.props.title),a.createElement("div",{className:b(this.getClasses()).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" ")},this.props.children))}});define("panels/frames/pagesPanelFrame",["react","lodash","panels/mixins/panelFrameMixin","panels/frames/pagesPanelFrame.rt","panels/panelManager/panelManagerFactory","core","baseUI"],function(a,b,c,d,e,f,g){"use strict";return a.createClass({displayName:f.constants.PANEL_TYPES.PAGES,mixins:[c,f.mixins.editorAPIMixin,g.classNameMixin],propTypes:{rootClassNames:a.PropTypes.object},componentWillMount:function(){var a=e.getManager();a.registerForStageMouseDown(this.constructor.displayName,this.close)},getClasses:function(){return b.merge({},this.props.rootClassNames,{pages:true,"pages-panel-frame-content":true})},render:d})});define("panels/frames/confirmationPanelFrame.rt",["react","lodash","baseUI","symbols"],function(a,b,c,d){"use strict";function e(a,c){var d=b.assign({},a,c);if(a.hasOwnProperty("style")){d.style=b.defaults(d.style,a.style)}if(a.hasOwnProperty("className")&&c.hasOwnProperty("className")){d.className=c.className+" "+a.className}return d}return function(){return a.createElement("div",{className:"panel-frame-container screen-centered-frame confirmation-panel-frame-z-index"},a.createElement("div",e({className:"confirmation-panel-frame "+this.props.type+"-confirmation"},this.getPanelProps()),!this.shouldHideHeader()?a.createElement("header",{className:"panel-header dark",key:"header"},this.props.panelTitle?a.createElement("span",{key:"headerTitle",className:"panel-header-title"},this.props.panelTitle):null,a.createElement("button",{className:"close",onClick:this.close},a.createElement(d.symbol,{name:"headerCloseButton"}))):null,a.createElement("div",{className:"content"},this.props.children),!this.props.shouldHideFooter?a.createElement("footer",{},!this.props.shouldHideCancelButton?a.createElement(c.button,{key:"cancelButton",className:this.getSecondaryButtonClass(),onClick:this.onCancel,label:this.props.cancelLabel}):null,a.createElement(c.button,{className:this.getConfirmButtonClass(),onClick:this.onConfirm,label:this.props.confirmLabel})):null),a.createElement("div",{className:"dark-frame-overlay"}))}});define("panels/frames/confirmationPanelFrame",["react","lodash","core","panels/mixins/panelFrameMixin","panels/mixins/disableKeyboardShortcutsMixin","panels/frames/confirmationPanelFrame.rt"],function(a,b,c,d,e,f){"use strict";return a.createClass({displayName:c.constants.PANEL_TYPES.CONFIRMATION,mixins:[d,e],propTypes:{panelName:a.PropTypes.string.isRequired,panelTitle:a.PropTypes.string,width:a.PropTypes.string,height:a.PropTypes.string,onConfirm:a.PropTypes.func,shouldCloseByDefaultOnConfirm:a.PropTypes.bool,onCancel:a.PropTypes.func,confirmLabel:a.PropTypes.string,cancelLabel:a.PropTypes.string,shouldHideHeader:a.PropTypes.bool,shouldHideFooter:a.PropTypes.bool,shouldHideCancelButton:a.PropTypes.bool,type:a.PropTypes.oneOf(["important","normal"])},getDefaultProps:function(){return{type:"normal",confirmLabel:"confirmationPanelFrame_Confirm",cancelLabel:"confirmationPanelFrame_Cancel",shouldCloseByDefaultOnConfirm:true}},getPanelProps:function(){var a=this.props.width;var c=this.props.height;var d={width:a,height:c};return b({style:d}).defaults(this.props).omit("children","width","height").value()},onConfirm:function(){if(this.props.shouldCloseByDefaultOnConfirm){this.close()}if(this.props.onConfirm){this.props.onConfirm()}},onCancel:function(){this.close();if(this.props.onCancel){this.props.onCancel()}},getConfirmLabel:function(){return this.props.confirmLabel},getCancelLabel:function(){return this.props.cancelLabel},getConfirmButtonClass:function(){var a=this.props.type==="important"?"btn-danger-primary":"btn-confirm-primary";return a+" btn-md"},getSecondaryButtonClass:function(){var a=this.props.type==="important"?"btn-danger-secondary":"btn-confirm-secondary";return a+" btn-md"},shouldHideHeader:function(){return this.props.shouldHideHeader},shouldHideFooter:function(){return this.props.shouldHideFooter},render:f})});define("panels/frames/bgSubPanelFrame.rt",["react","lodash","baseUI","symbols","util"],function(a,b,c,d,e){"use strict";function f(a,c){var d=b.assign({},a,c);if(a.hasOwnProperty("style")){d.style=b.defaults(d.style,a.style)}if(a.hasOwnProperty("className")&&c.hasOwnProperty("className")){d.className=c.className+" "+a.className}return d}function g(a){this.startDrag(a,this.getDragLimits())}return function(){return a.createElement("div",f({className:"background-sub-panel-frame"},this.getPanelProps()),this.props.label?a.createElement("header",{ref:"header",key:"header",onMouseDown:g.bind(this),className:"panel-header dragger dark"},this.props.label?a.createElement("span",{className:"panel-header-title",key:"label"},e.translate(this.props.label)):null,a.createElement("button",{className:"close",onClick:this.close},a.createElement(d.symbol,{name:"headerCloseButton"})),a.createElement("button",{className:"help",onClick:this.openHelpCenter},"?")):null,a.createElement("div",{className:"content"+(this.props.contentClass?" "+this.props.contentClass:"")},this.props.children))}});define("panels/frames/bgSubPanelFrame",["reactDOM","react","lodash","jquery","panels/mixins/panelFrameMixin","panels/mixins/panelDragLimitsMixin","core","util","panels/frames/bgSubPanelFrame.rt"],function(a,b,c,d,e,f,g,h,i){"use strict";return b.createClass({displayName:g.constants.PANEL_TYPES.BG_SUB_PANEL,mixins:[e,h.draggableMixin,f,g.mixins.editorAPIMixin],propTypes:{panelName:b.PropTypes.string.isRequired,title:b.PropTypes.string,width:b.PropTypes.number,height:b.PropTypes.number,top:b.PropTypes.number,left:b.PropTypes.number,contentClass:b.PropTypes.string},getInitialState:function(){this.getEditorAPI().panelManager.closeAllPanelsOfType(this.constructor.displayName)},getPanelProps:function(){var a=["width","height","top","left"];var b={};c.forEach(a,function(a){if(this.props[a]){b[a]=this.props[a]}},this);var d=c.omit(this.props,"children",a);d.style=b;return d},getPanelFramePosition:function(){return d(a.findDOMNode(this.refs.frame)).offset()},render:i})});define("panels/frames/emptyPanelFrame.rt",["react","lodash"],function(a,b){"use strict";return function(){return a.createElement("div",this.getFrameProps(),a.createElement("div",{className:"content"},this.props.children))}});define("panels/frames/emptyPanelFrame",["react","lodash","panels/mixins/panelFrameMixin","panels/frames/emptyPanelFrame.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"emptyPanelFrame",mixins:[c],propTypes:{panelName:a.PropTypes.string.isRequired},getFrameProps:function(){return this.props},render:d})});define("panels/frames/frames",["panels/frames/leftPanelFrame","panels/frames/messagePanelFrame","panels/frames/toolPanelFrame","panels/frames/focusPanelFrame","panels/frames/helpPanelFrame","panels/frames/pagesPanelFrame","panels/frames/confirmationPanelFrame","panels/frames/bgSubPanelFrame","panels/frames/emptyPanelFrame"],function(a,b,c,d,e,f,g,h,i){"use strict";return{leftPanelFrame:a,messagePanelFrame:b,toolPanelFrame:c,focusPanelFrame:d,helpPanelFrame:e,pagesPanelFrame:f,confirmationPanelFrame:g,bgSubPanelFrame:h,emptyPanelFrame:i}});define("panels/mixins/statefulKeyboardContextMixin",["lodash","util"],function(a,b){"use strict";var c=b.keyboardShortcuts;var d=0;var e=[];function f(a){return(a||"")+c.CONTEXTS.AUTOMATIC+"_"+d++}return{componentWillMount:function(){e.push(c.getContext());this.myKeyboardContextName=f(this.keyboardShortcutsContextNamePrefix);c.registerContext(this.myKeyboardContextName,this.getCustomKeyboardShortcuts());c.setContext(this.myKeyboardContextName)},componentWillUnmount:function(){c.unregisterContext(this.myKeyboardContextName);if(this.myKeyboardContextName===c.getContext()){var a=e.pop();c.setContext(a)}e.splice(e.indexOf(this.myKeyboardContextName),1)},getCustomKeyboardShortcuts:function(){if(this.getKeyboardShortcuts){return this.getKeyboardShortcuts()}return this.getDefaultShortcuts()},getDefaultShortcuts:function(){return{}}}});define("panels/mixins/limitInitialPositionToStageMixin",["reactDOM","util","core","jquery"],function(a,b,c,d){"use strict";return{mixins:[b.singlePassDOMReadWriteMixin],measurePhase:function(b){if(b===this.LIFECYCLE_PHASES.MOUNT){var e=d(a.findDOMNode(this.refs.frame.getContentWrapperElement()));var f=c.utils.stageUtils.getStageLayout();var g=e.offset();var h=d(window.document).scrollTop();var i=g.top;var j=h+(f.bottom-e.height());var k=f.right-e.width();return{top:Math.min(i,j),left:Math.min(Math.max(g.left,0),k)}}},patchPhase:function(b,c){if(c===this.LIFECYCLE_PHASES.MOUNT){var e=d(a.findDOMNode(this.refs.frame.getContentWrapperElement()));e.offset({top:b.top,left:b.left})}}}});define("panels/mixins/reportBiEventOnUiChangeMixin",["react","lodash","core","pLoader!santa:utils"],function(a,b,c,d){"use strict";var e="There is no BI event for the control [%s], in [%s] panel.\n\tDear developer, Please add the control mapping to core/bi/controlsToEvents and the event to core/bi/events.json .";function f(a,f,g){var h=c.utils.uiControlsBIUtil.getEventDefinition(a);if(!h){d.log.warn(e,a,this.constructor.displayName);return}var i=c.utils.uiControlsBIUtil.getParams(a,g);var j=b.merge({panel_name:this.constructor.displayName,control_name:f},i);this.getEditorAPI().selectedComponent.sendSelectedComponentBI(h,j)}function g(a,b,c){f.call(this,a,b,c)}return{childContextTypes:{reportUIChange:a.PropTypes.func},componentDidMount:function(){if(!b.isFunction(this.getEditorAPI)){throw new Error("You must use editorAPIMixin to use the reportBiEventOnUiChangeMixin")}},getChildContext:function(){return{reportUIChange:g.bind(this)}}}});define("panels/mixins/mixins",["panels/mixins/panelFrameMixin","panels/mixins/disableKeyboardShortcutsMixin","panels/mixins/statefulKeyboardContextMixin","panels/mixins/panelDragLimitsMixin","panels/mixins/dontShowAgainMixin","panels/mixins/limitInitialPositionToStageMixin","panels/mixins/reportBiEventOnUiChangeMixin"],function(a,b,c,d,e,f,g){"use strict";return{panelFrameMixin:a,disableKeyboardShortcutsMixin:b,statefulKeyboardContextMixin:c,panelDragLimitsMixin:d,dontShowAgainMixin:e,limitInitialPositionToStageMixin:f,reportBiEventOnUiChangeMixin:g}});define("panels/helpPanels/helpPanel.rt",["react","lodash","panels/frames/helpPanelFrame"],function(a,b,c){"use strict";return function(){return a.createElement(c,{panelName:this.props.panelName,helpUrl:this.props.helpUrl})}});define("panels/helpPanels/helpPanel",["react","lodash","util","panels/helpPanels/helpPanel.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"exampleHelpPanel",PropTypes:{helpUrl:function(a,b){if(!c.validate.url(a[b])){return new Error("helpUrl prop must be a string representing a valid url");
}}},render:d})});define("panels/helpPanels/helpPanels",["panels/helpPanels/helpPanel"],function(a){"use strict";return{helpPanel:a}});define("panels/focusPanels/welcomeVideoPanel.rt",["react","lodash","panels/frames/focusPanelFrame","util","symbols"],function(a,b,c,d,e){"use strict";function f(){this.closeByX()}return function(){return a.createElement(c,{ref:"frame",panelName:this.props.panelName,shouldHideHeader:true,shouldHideHelp:true,isBareMode:true,className:"welcome-screen-panel "+(this.props.className||""),onClose:this.handleShouldCloseOnBlur,keyboardShortcuts:this.getKeyboardShortcuts(),shouldNotCloseOnBlur:this.props.shouldNotCloseOnBlur},a.createElement("header",{className:"panel-header dark",key:"header"},a.createElement("button",{className:"close",onClick:f.bind(this)},a.createElement(e.symbol,{name:"headerCloseButton"})),a.createElement("div",{className:"welcome-panel-header-title"},this.props.title),a.createElement("div",{className:"welcome-panel-header-subtitle"},this.props.subtitle),a.createElement("div",{className:"videoInput-wrapper"},a.createElement("iframe",{src:this.props.linkedVideoData,frameBorder:"0",allowFullScreen:true}),a.createElement("div",{className:"video-pixel-cover"}))),a.createElement("div",{className:"content "+this.getContentClass()},a.createElement("p",{},this.getContent("line1")," ",this.getContent("link")),a.createElement("p",{},this.getContent("line2"))),"\n    ",this.props.children,"\n\n")}});define("panels/focusPanels/welcomeVideoPanel",["react","lodash","core","util","panels/focusPanels/welcomeVideoPanel.rt"],function(a,b,c,d,e){"use strict";var f=c.bi;return a.createClass({displayName:"welcomeScreenPanel",mixins:[c.mixins.editorAPIMixin],propTypes:{title:a.PropTypes.string,subtitle:a.PropTypes.string,linkedVideoData:a.PropTypes.string,content:a.PropTypes.object,contentClass:a.PropTypes.string,className:a.PropTypes.string,panelName:a.PropTypes.string,onCloseByX:a.PropTypes.func,onCloseByESC:a.PropTypes.func},close:function(){this.refs.frame.close()},closeByX:function(){if(b.isFunction(this.props.onCloseByX)){this.props.onCloseByX()}this.close()},getKeyboardShortcuts:function(){return{esc:this.closeByESC}},closeByESC:function(){if(b.isFunction(this.props.onCloseByESC)){this.props.onCloseByESC()}else{this.getEditorAPI().bi.event(f.events.welcomeVideoPanel.WELCOME_SCREEN_CLOSED,{panel_name:this.props.panelName,origin:"ESC"})}this.close()},handleShouldCloseOnBlur:function(){this.getEditorAPI().bi.event(f.events.welcomeVideoPanel.WELCOME_SCREEN_CLOSED,{panel_name:this.props.panelName,origin:"outerClick"});return true},getContent:function(a){var b=this.props.content;var c=b?d.translate(b[a]):"";return c},getContentClass:function(){return this.props.contentClass||""},render:e})});define("panels/focusPanels/exampleFocusPanel.rt",["react","lodash","panels/frames/focusPanelFrame"],function(a,b,c){"use strict";return function(){return a.createElement(c,{title:"Example Focus Panel",panelName:this.props.panelName,className:"example-focus-panel"},a.createElement("iframe",{className:"content-iframe",src:"http://www.w3schools.com"}))}});define("panels/focusPanels/exampleFocusPanel",["react","panels/focusPanels/exampleFocusPanel.rt"],function(a,b){"use strict";return a.createClass({displayName:"exampleFocusPanel",render:b})});define("panels/focusPanels/blogManagerPanel.rt",["react","lodash","baseUI","panels/frames/focusPanelFrame"],function(a,b,c,d){"use strict";return function(){return a.createElement("div",{className:"blog-manager-panel"},a.createElement(d,{panelName:this.props.panelName,className:"blog-manager-panel",shouldHideHeader:true},a.createElement("iframe",{id:"blogManager",ref:"iframe",width:"100%",height:"100%",src:this.state.src,frameBorder:"0",allowFullScreen:true})))}});define("panels/focusPanels/blogManagerPanel",["reactDOM","react","lodash","util","panels/panelManager/panelManagerFactory","panels/focusPanels/blogManagerPanel.rt"],function(a,b,c,d,e,f){"use strict";return b.createClass({displayName:"blogManagerDialog",mixins:[d.postMessageMixin],propTypes:{blogManagerAppPathType:b.PropTypes.string,api:b.PropTypes.object},getInitialState:function(){return{src:this.props.api.frameUrl}},componentWillMount:function(){this.setPostMessageHandler(null,this.onMessageFromDialog)},onMessageFromDialog:function(a){switch(a.type){case"ready":this.onReady();break;case"anchors":if(a.payload.pageId){this.onAnchorsRequest(a.payload.pageId)}break;case"cancel":if(a.payload===undefined||!a.payload.postsUnchanged){this.props.api.reloadAppPartsMethod()}e.getManager().closePanelByName(this.props.panelName);break}},onAnchorsRequest:function(b){var c=JSON.stringify({type:"anchors",payload:{anchorsData:this.props.api.getAnchorsByPage(b),pageId:b}});a.findDOMNode(this.refs.iframe).contentWindow.postMessage(c,"*")},onReady:function(){var b=JSON.stringify({type:"settings",payload:{isOpenFromSantaEditor:true,themeData:this.props.api.themeData,themeDataSchema:this.props.api.themeDataSchema,WIXAPPS_EDITOR_STYLES:this.props.api.WIXAPPS_EDITOR_STYLES,CK_EDITOR_FONT_STYLES:this.props.api.CK_EDITOR_FONT_STYLES,CustomUsedFontsUrl:this.props.api.CustomUsedFontsUrl,FontsCssUrls:this.props.api.FontsCssUrls,FontsData:this.props.api.FontsData,FontsMetadata:this.props.api.FontsMetadata,pagesData:this.props.api.pagesData,currentPageId:this.props.api.currentPageId,charSet:this.props.api.charSet,siteUrl:this.props.api.siteUrl,isSitePublished:this.props.api.isSitePublished,imageOrganizerUrl:this.props.api.imageOrganizerUrl,urlFormat:this.props.api.urlFormat,blogPageTitle:this.props.api.blogPageTitle,singlePostLayout:this.props.api.singlePostLayout,siteTitle:this.props.api.siteTitle,isHeroImageEnabled:this.props.api.isHeroImageEnabled}});a.findDOMNode(this.refs.iframe).contentWindow.postMessage(b,"*")},render:f})});define("panels/focusPanels/shoutOutTemplatesPanel.rt",["react","lodash","baseUI","panels/frames/focusPanelFrame"],function(a,b,c,d){"use strict";return function(){return a.createElement("div",{className:"shoutout-templates-panel"},a.createElement(d,{panelName:"panels.focusPanels.shoutOutTemplatesPanel",className:"shoutout-templates-panel",shouldHideHeader:true,onClose:this.onClose},a.createElement("iframe",{id:"shoutOutTemplates",ref:"iframe",width:"100%",height:"100%",src:this.props.frameUrl,frameBorder:"0",allowFullScreen:true})))}});define("panels/focusPanels/shoutOutTemplatesPanel",["react","lodash","core","util","panels/panelManager/panelManagerFactory","panels/focusPanels/shoutOutTemplatesPanel.rt"],function(a,b,c,d,e,f){"use strict";var g={evid:91,src:36,endpoint:"shout",sampleRatio:0,fields:{is_first:"bool",msid:"guid",referral_info:"string"}};return a.createClass({displayName:"shoutOutDialog",mixins:[c.mixins.editorAPIMixin,d.postMessageMixin],propTypes:{frameUrl:a.PropTypes.object},onClose:function(){var a={is_first:true,referral_info:"editor panel"};this.getEditorAPI().bi.event(g,a);return true},componentWillMount:function(){this.setPostMessageHandler(null,this._onMessageFromDialog)},_onMessageFromDialog:function(a){if(a.type==="cancel"){e.getManager().closePanelByName("panels.focusPanels.shoutOutTemplatesPanel")}},render:f})});define("panels/focusPanels/aviaryPanel.rt",["react","lodash","baseUI","panels/frames/focusPanelFrame","util"],function(a,b,c,d,e){"use strict";return function(){return a.createElement(d,{panelName:this.props.panelName,shouldHideHelp:true,title:e.translate("AVIARY_PANEL_TITLE"),className:"aviary-panel",onClose:this.onCloseFrame},a.createElement("div",{className:"aviary-dialog"},a.createElement("div",{ref:"content",id:"aviary_dialog_editor_content_wrapper"}),a.createElement("div",{id:"message",className:b({hidden:!this.state.showMessage}).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" ")},a.createElement("div",{className:"message-bg"},a.createElement("span",{className:b({hidden:this.state.counter==null}).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" "),id:"progress"},a.createElement("span",{id:"counter"},this.state.counter,"%")),a.createElement("span",{id:"messageContent"},this.state.messageText),a.createElement("span",{id:"cancel-button",className:b({hidden:!this.state.showCancelButton}).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" "),onClick:this.onCancelClicked},e.translate("AVIARY_CANCEL_UPLOAD"))))))}});define("panels/focusPanels/aviaryPanel",["reactDOM","react","lodash","jquery","core","util","panels/focusPanels/aviaryPanel.rt","pLoader!santa:utils"],function(a,b,c,d,e,f,g,h){"use strict";var i=f.translate;var j=1500;var k=f.serviceTopology.htmlEditorRootUrl;k=k?k.replace(/html\/editor\/?/,""):"http://editor.wix.com/";var l=f.serviceTopology.mediaServerRoot;var m="//editor.";var n=m+l;var o="//0.static."+l+"/api/add_file";var p="edited image";var q={AVIARY_MISSING_ID_IN_SKIN:{errorCode:21030,desc:"Missing an id on this._skinParts.content, it is required for Aviary to work"},AVIARY_DIALOG_WRONG_DATA_TYPE:{errorCode:21031,desc:"Data is missing or Data Type is not an Image Data"},AVIARY_NOT_LOADED:{errorCode:21032,desc:"Aviary.js was not loaded after 5000ms"},AVIARY_FORCE_CLOSED:{errorCode:21033,desc:"Aviary dialog was not closed on first try, forced it to close on second try"},AVIARY_UPLOAD_GET_TICKET_FAILED:{errorCode:21034,params:{c1:"error message"},desc:"Failed on getting ticket for upload."},AVIARY_UPLOAD_TO_STATIC_FAILED:{errorCode:21035,params:{c1:"error message"},desc:"Uploading image to statics failed."},AVIARY_UPLOAD_UPDATE_MEDIA_FAILED:{errorCode:21036,params:{c1:"error message"},desc:"Updating private media with uploaded file failed."},AVIARY_RETURNED_AN_ERROR:{errorCode:21037,params:{c1:"error message",i1:"error code"},desc:"Aviary editor failed on external script error."},AVIARY_REACHED_INNER_SAVE_FUNCTION:{errorCode:21038,desc:"Aviary somehow called its inner save function, this does not supposed to happen."}};var r;function s(a){var b={};var c=a.imageLink.value;var d=c.uri;var e=/(^https?)|(^data)/.test(d)?"":"/static/media/";var f=/(jpg$)|(jpeg$)/i.test(d)?"image/jpeg":"image/png";if(c.width>j||c.height>j){d=d+"_"+j}b.tmpImageSrc=k+e+d;b.tmpImageType=f;return b}function t(a,b,c,d,e,f){a=a||"GET";var g=new window.XMLHttpRequest;var h=function(){if(g.readyState===4){if(g.status===200||g.status===304){e(g)}else{d(g)}}};g.open(a,b,true);g.onreadystatechange=h;g.setRequestHeader("Content-type",f||"text/plain");g.send(c)}function u(a,b){var c=function(a){try{a=JSON.parse(a.responseText)}catch(b){a.status="error";a.errorDescription="Parse error: ticket returned unexpected response"}b(a)};t("GET",a+"?accept=json",null,c,c,"text/plain")}function v(a,b){u(n+"/media/tickets/get",function(c){var d=c.responseValue;if(!d){K("ERROR_AVIARY_TITLE","ERROR_AVIARY_UPLOAD_MESSAGE","Code: "+q.AVIARY_UPLOAD_GET_TICKET_FAILED.errorCode);J.call(this,true);return false}y.call(this,d,a,b)}.bind(this))}function w(){var a=this.props.editorAPI.selection.getSelectedComponents();var b=this.props.editorAPI.components.layout.get(a);var c=b.width;var d=b.height;var e=c+":"+d;return e}function x(a){var b;var c;var d;if(typeof a==="string"){d=new window.Element("div");d.innerHTML=a}else{d=a}if(d){b=d.querySelector("upload");c=b.getAttribute("success")}else{b={getAttribute:function(){return"No Response Error"}};c=false}if(f.stringUtils.isTrue(c)){var e=d.querySelector("properties");var g=d.querySelector("sys_meta");return{status:b.getAttribute("errorDescription"),originalName:g.getAttribute("original_file"),mimeType:g.getAttribute("mime_type"),fileUrl:g.getAttribute("file_url"),iconUrl:g.getAttribute("icon_url"),fileSize:g.getAttribute("file_size"),width:g.getAttribute("width"),height:g.getAttribute("height"),ver:g.getAttribute("ver"),fileName:e.getAttribute("file_name")}}return{status:"error",origin:b.getAttribute("origin"),errorCode:b.getAttribute("errorCode"),errorDescription:b.getAttribute("errorDescription")}}function y(a,b,c){var d=x;var e=function(){var a=this.responseXML||this.responseText;c(d(a))};var f={datauri:b,ut:a,s:"media"};var g=[];var h;for(h in f){if(f.hasOwnProperty(h)){g.push(h+"="+f[h])}}g=g.join("&");var i={onLoad:e,onError:e,onTimeout:e,onUploadProgress:z.bind(this),onAbort:this.onAbort};A.call(this,"POST",o,g,i,"application/x-www-form-urlencoded",false)}function z(a){if(a.lengthComputable){var b=Math.round(a.loaded/a.total*100);this.setState({counter:b})}}function A(a,b,d,e,f,g){a=a||"GET";e=e||{};var h=true;var i=typeof XDomainRequest!=="undefined";if(i){this._xhrObject=new window.XDomainRequest;h=undefined}else{this._xhrObject=new window.XMLHttpRequest}var j=this._xhrObject;j.open(a,b,h);j.timeout=5*60*1e3;j.onload=e.onLoad||c.noop;j.onerror=e.onError||c.noop;j.ontimeout=e.onTimeout||c.noop;j.onprogress=e.onProgress||c.noop;if(j.upload){j.upload.addEventListener("progress",e.onUploadProgress||c.noop,false)}if(!i){j.onabort=e.onAbort||c.noop;j.setRequestHeader("Content-type",f||"text/plain");j.withCredentials=Boolean(g)}j.send(d)}function B(a){a=a||{};if(a.status==="error"||a.status==="timeout"){J.call(this,false);K("ERROR_AVIARY_TITLE","ERROR_AVIARY_UPLOAD_MESSAGE","Code: "+q.AVIARY_UPLOAD_TO_STATIC_FAILED.errorCode);return false}var b=new Date;var c=[b.getFullYear(),b.getMonth()+1,b.getDate(),[b.getHours(),b.getMinutes(),b.getSeconds()].join(":")].join("-");this._newImageUri=a.fileName;a.originalName=(this.props.imageLink.value.title||"Edited Image")+" "+c;D.call(this,a)}function C(a){var b="<mediaItemList>";b+="<mediaItem";b+=' mediaType="'+"picture";b+='" componentType="'+"photo";b+='" fileName="'+a.fileName;b+='" originalFileName="'+a.originalName;b+='" fileSize="'+a.fileSize;b+='" width="'+a.width;b+='" height="'+a.height;b+='" mimeType="'+a.mimeType;b+='" iconURL="'+a.iconUrl;b+='" version="'+a.ver;b+='" tags="'+p;b+='" />\n';b+="</mediaItemList>";return b}function D(a){var b=C(a);var c=n+"/media/private/add";var d=function(){K("ERROR_AVIARY_TITLE","ERROR_AVIARY_UPLOAD_MESSAGE","Code: "+q.AVIARY_UPLOAD_UPDATE_MEDIA_FAILED.errorCode);return false};var e=function(){E.call(this)}.bind(this);t("POST",c,b,d,e,"application/xml")}function E(){H.call(this);G.call(this);F.call(this,{result:"OK"})}function F(a){a=a||{};if(this.state.disableCloseButton){return}this._aviaryCloseCause=a.result||"CANCEL";r.close();if(!this._forceClose){this.setTimeoutNamed("close",function(){this._forceClose=true}.bind(this),2e3)}}function G(){this.setState({disableCloseButton:false})}function H(){if(!this._newImageSize||!this._newImageUri){return}var a=this.props.imageLink.value.originalImageDataRef;if(!a){a=c.cloneDeep(this.props.imageLink.value);delete a.originalImageDataRef}this.props.imageLink.requestChange({height:this._newImageSize.height,width:this._newImageSize.width,uri:this._newImageUri,originalImageDataRef:a});this._newImageSize=null;this._newImageUri=null}function I(a,b){var d;if(a){d={messageText:a,showMessage:true}}else{d={showMessage:false}}if(b){d.showCancelButton=true;if(!window.XDomainRequest){d.counter=0}}else{c.merge(d,{showCancelButton:false,counter:null})}this.setState(d)}function J(a,b,c){if(!(r&&window.AV&&window.AV.paintWidgetInstance)){return}if(a){r.disableControls();r.showWaitIndicator();this.setState({disableCloseButton:true});I.call(this,b,c)}else{r.enableControls();r.hideWaitIndicator();this.setState({disableCloseButton:false,showMessage:false})}}function K(a,b,c){var d=b&&i(b);var e=window&&window.confirm||function(){};e(d,c)}function L(a){return function(){if(M.reactFunctions[a]){M.reactFunctions[a]()}}}var M={reactFunctions:{},onLoad:L("onLoad"),onAviarySave:L("onAviarySave"),onAviaryClose:L("onAviaryClose"),onAviaryReady:L("onAviaryReady"),onAviarySaveButtonClick:L("onAviarySaveButtonClick"),onError:L("onError")};function N(){M.reactFunctions={onLoad:this.onLoad,onAviarySave:this.onAviarySave,onAviaryClose:this.onAviaryClose,onAviaryReady:this.onAviaryReady,onAviarySaveButtonClick:this.onAviarySaveButtonClick,onError:this.onError};if(!r){r=new window.Aviary.Feather({apiKey:"57b23071b",apiVersion:3,tools:"crop,orientation,enhance,effects,frames,brightness,contrast,saturation,warmth,focus,sharpness,draw,redeye,whiten,blemish,stickers,text",maxSize:j,theme:"minimum",noCloseButton:true,displayImageSize:true,onLoad:M.onLoad,onSave:M.onAviarySave,onClose:M.onAviaryClose,onReady:M.onAviaryReady,onSaveButtonClicked:M.onAviarySaveButtonClick,onError:M.onError,appendTo:"aviary_dialog_editor_content_wrapper",language:O(this.getEditorAPI().getLanguageCode()),launchDelay:0})}else{M.onLoad()}}function O(a){return a?a.toLowerCase():"en"}return b.createClass({displayName:"aviaryPanel",mixins:[f.postMessageMixin,h.timerMixins.timeoutsMixin,e.mixins.editorAPIMixin],propTypes:{imageLink:b.PropTypes.object,onDialogResult:b.PropTypes.func,editorAPI:b.PropTypes.object.isRequired},getInitialState:function(){var a=s(this.props);c.merge(a,{tmpImageId:"some_random_id_"+Date.now(),disableCloseButton:true,showMessage:true,messageText:null,showCancelButton:false,counter:null});return a},componentWillReceiveProps:function(a){this.setState(s(a))},componentDidMount:function(){N.call(this);this.setTimeoutNamed("aviaryIsDeadTimer",function(){this.setState({disableCloseButton:false})}.bind(this),1e4);I.call(this,i("AVIARY_LOAD_MESSAGE","Loading Image Editor..."),false)},componentWillMount:function(){var a=d("<img/>",{id:this.state.tmpImageId,src:this.state.tmpImageSrc,type:this.state.tmpImageType,crossOrigin:""});this.image=a.get(0)},launchAviary:function(){var a=i("AVIARY_ORIGINAL_ASPECT");r.launch({image:this.state.tmpImageId,cropPresetDefault:a,cropPresets:[[a,w.call(this)],"Custom"]})},onLoad:function(){var a=i("AVIARY_ORIGINAL_ASPECT");r.launch({image:this.image,cropPresetDefault:a,cropPresets:[[a,w.call(this)],"Custom"]})},onAviarySave:function(){return false},onAviaryClose:function(){this.clearTimeoutNamed("close");this._forceClose=false;if(this.props.onDialogResult){this.props.onDialogResult(this._aviaryCloseCause)}},onAviaryReady:function(){this.clearTimeoutNamed("aviaryIsDeadTimer");this.setState({showMessage:false,disableCloseButton:false})},onAviarySaveButtonClick:function(){var b=JSON.parse(r.getActionList());var d=c.get(b,"actionlist.length",0)>1;var e=a.findDOMNode(this.refs.content).querySelector("#avpw_canvas_element");var f="";if(d){J.call(this,true,i("AVIARY_WAIT_MESSAGE","Uploading image, please wait..."),true);f=encodeURIComponent(e.toDataURL(this.state.tmpImageType));this._newImageSize={width:e.width,height:e.height};v.call(this,f,B.bind(this))}else{F.call(this,{result:"CANCEL"})}return false},onProgress:function(a){if(a.lengthComputable){var b=Math.round(a.loaded/a.total*100);this.setState({counter:b})}},onAbort:function(){J.call(this,false);this._xhrObject=null;return false},onError:function(a){K("ERROR_AVIARY_TITLE","ERROR_AVIARY_GENERAL_MESSAGE","Codes: "+q.AVIARY_RETURNED_AN_ERROR.errorCode+", "+a.code);return false},onCloseFrame:function(){F.call(this)},componentWillUnmount:function(){F.call(this)},onCancelClicked:function(){if(this._xhrObject){this._xhrObject.abort();if(window.XDomainRequest){this.onAbort()}}else{J.call(this,false)}},render:function(){return g.call(this)}})});define("panels/focusPanels/organizeImagesPanel.rt",["react","lodash","baseUI","panels/frames/focusPanelFrame","util","symbols"],function(a,b,c,d,e,f){"use strict";return function(){return a.createElement(d,{panelName:this.props.panelName,helpId:this.state.helpId,className:"organize-images-panel",shouldNotCloseOnBlur:true,shouldHideHeader:true,onClose:this.onPanelClose,width:Math.round(.8*window.innerWidth).toString(),height:Math.round(.8*window.innerHeight).toString()},a.createElement("iframe",{id:"organizeImages",ref:"iframe",className:b({hidden:!this.state.show,transition:true}).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" "),onLoad:this.onLoad,width:"100%",height:"100%",src:this.getFrameUrl(),frameBorder:"0",allowTransparency:true}),a.createElement(c.preloader,{ref:"preloader",className:b({hidden:this.state.show,transition:true}).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" ")}))}});define("panels/focusPanels/organizeImagesPanel",["reactDOM","react","lodash","util","panels/focusPanels/organizeImagesPanel.rt","panels/panelManager/panelManagerFactory","pms","core","helpIds","pLoader!santa:utils"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k="socialIcons";var l=h.bi.events.organizeImages;function m(){var a=this.getEditorAPI();a.bi.event(l.ORGIMAGES_DIALOG_LOADED,{c1:"new Organize Images"});this._isReady=true;var b=n.call(this);this._pms.send("set",b)}function n(){return{images:this.props.imageDatas,translation:d.imageOrganizerUtils.getTranslation(this.props.galleryType),topology:d.serviceTopology,isPreset:this.props.isPreset,userSets:this.userSets}}function o(a){var b=a.data&&a.data.helpId;if(b){var c={panel_name:this.props.panelName,origin:h.constants.BI.HELP.ORIGIN.PANEL,component:this.getEditorAPI().selection.getSelectedComponentType(),learn_more:false};f.getManager().openHelpCenter(b,null,null,c)}}function p(){var a=q.call(this);var b,c;if(this.props.galleryType===k){c="6377d68a-a81f-4fd7-a675-f5a79f7e7ea9";b=d.translate("ORGANIZE_ICONS_DIALOG_TITLE")}else{c=i.EXTERNAL.ORGANIZE_IMAGES;b=d.translate("OrganizeImages_IMAGES_DIALOG_TITLE")}this.setState({helpId:c,title:b,show:true});a.contentWindow.focus()}function q(){return a.findDOMNode(this.refs.iframe)}function r(a){var b=this.props.createImageDataItem();c.merge(b,a);return b}function s(a,b){var d;var e=c.find(a,{id:b.id});if(e){d=c.merge(e.data,b.data)}return d}function t(a){if(c.get(a,"title.length",0)>100){a.title=a.title.substring(0,100)}}function u(a){var b=a.data,d,e=this.props.imageDatas,f;d=c.map(b,function(a){if(c.includes(a.id,"new_")){f=r.call(this,a.data)}else{f=s(e,a)}t(f);return f},this);this.props.imagesChanged(d)}function v(){f.getManager().closePanelByName(this.props.panelName)}function w(a){var b=this.getEditorAPI(),d=a.data,e=b.bi.event;j.log.info("bi events",a);c.forOwn(d,function(a,b){e(l[b],d[b])})}function x(a){var b=this.getEditorAPI(),c=a.data,d=c.params||{};j.log.info("bi events",a);b.bi.event(l[c.name],d)}function y(a){a=a.data;var b=this.getEditorAPI();b.openLinkPanel({defaultLinkType:"ExternalLink",link:a.data.link,callback:function(c){if(!c||!c.type){c=null}this._pms.send("setLink",{link:c,linkText:c?d.link.getLinkValueAsString(b,c,true):"",imgData:a,id:a.id})}.bind(this)})}function z(a,b,e){var f,g={title:"ORGANIZE_IMAGES_MEDIA_MNGR_TITLE",submit:"ORGANIZE_IMAGES_MEDIA_MNGR_SUBMIT"},h,i=this.getEditorAPI().mediaServices.mediaManager;switch(this.props.galleryType){case k:c.forEach(g,function(a,b){g[b]=a.replace("IMAGES","ICONS")});f=i.categories.ICON_SOCIAL;break;default:f=i.categories.IMAGE;break}h=a?"_MANY":"_ONE";i.open(f,{multiSelect:a,translation:{title:d.translate(g.title+h),submitButton:e?d.translate("MMGR_submitbutton_gallery_uploads_choose"):d.translate("MMGR_submitbutton_gallery_uploads_add")},callback:b.bind(this)})}var A=0;function B(){return"new_"+A++}return b.createClass({displayName:"organizeImagesPanel",mixins:[d.postMessageMixin,h.mixins.editorAPIMixin],propTypes:{imageDatas:b.PropTypes.arrayOf(b.PropTypes.object).isRequired,isPreset:b.PropTypes.bool.isRequired,galleryType:b.PropTypes.oneOf(["images",k]).isRequired,imagesChanged:b.PropTypes.func.isRequired,createImageDataItem:b.PropTypes.func.isRequired},getUserPrefs:function(){return this.getEditorAPI().getUserPreferences()},getInitialState:function(){this.userSets=this.getUserPrefs().global.get("OrganizeImages");this._pms=new g({connectionID:"OrganizeImages"});this._pms.on("ready",m,this);this._pms.on("setup",p,this);this._pms.on("closed",v,this);this._pms.on("openLinkDialog",y,this);this._pms.on("save",u,this);this._pms.on("bi",x,this);this._pms.on("biChanges",w,this);this._pms.on("openHelpCenter",o,this);this._pms.on("openMediaGallery",this.openMediaGallery,this);this._pms.on("openMediaGalleryForReplace",this.openMediaGalleryForReplace,this);return{show:false}},openMediaGallery:function(){z.call(this,true,function(a){if(!a){return}var b=[];c.forEach(a,function(a){var c=r.call(this,{uri:a.fileName,height:a.height,width:a.width,title:a.title||a.fileName});b.push({id:B(),data:c,linkText:""})},this);this._pms.send("add",b)},false)},openMediaGalleryForReplace:function(a){var b=a.data.position;z.call(this,false,function(a){if(!a){return}var d=[];c.forEach(a,function(a){var b=r.call(this,{uri:a.fileName,height:a.height,width:a.width,title:a.title||a.fileName});d.push({id:B(),data:b,linkText:""})},this);if(d.length<=0){return}this._pms.send("replace",{position:b,data:d[0]})},true)},getFrameUrl:function(){return d.imageOrganizerUtils.getFrameUrl(this.props.galleryType)},componentDidMount:function(){this._pms.setTargetWindow(q.call(this).contentWindow);q.call(this).addEventListener("load",this.onFrameLoad)},onFrameLoad:function(){this._pms.on("setUserSets",this.setUserSettings,this)},setUserSettings:function(a){var b=this.userSets=a.data;this.getUserPrefs().global.set("OrganizeImages",c.assign(b,{saveNow:true}))},onPanelClose:function(){var a=this.getEditorAPI();if(!this._isReady){return true}this._pms.send("saveAndClose");a.bi.event(l.ORGIMAGES_CLICK_CLOSE);return false},render:e})});define("panels/focusPanels/popupTemplate.rt",["react","lodash","panels/frames/focusPanelFrame","baseUI","symbols","util"],function(a,b,c,d,e,f){"use strict";function g(){var b=f.translate;return a.createElement(c,{shouldHideHeader:true,isSingleInstance:this.props.isSingleInstance,panelName:this.props.panelName},a.createElement("div",{className:"popup-template-panel "+this.props.className},a.createElement("div",{className:"panel-header dark"},a.createElement("button",{className:"close",onClick:this.close},a.createElement(e.symbol,{name:"headerCloseButton"})),this.props.h1text?a.createElement("h1",{key:"h1text"},b(this.props.h1text)):null,this.props.h2text?a.createElement("h2",{key:"h2text"},b(this.props.h2text)):null,a.createElement("div",{className:"image "+this.props.imageClassName},this.props.symbolName?a.createElement(d.symbol,{key:"symbol",name:this.props.symbolName,className:"popup-symbol"}):null)),a.createElement("div",{className:"content"},a.createElement("div",{className:"panel-text"},a.createElement("span",{},b(this.props.bodyText)+" "),this.props.helpId?a.createElement("span",{key:"learnMoreLink",className:"learn-more-link",onClick:this.openLearnMore},b("Notification_Box_Learn_More")):null),a.createElement("div",{className:"bottom-controls"},!this.props.hideDontShowCheckbox?a.createElement(d.toggle,{key:"dont-show-again-checkbox",name:"checkbox",labelAfterSymbol:true,className:"dont-show-again",label:"Notification_Box_Dont_Show_Again",valueLink:this.linkDontShowAgainValue()}):null,a.createElement(d.button,{className:"btn-ok btn-md",onClick:this.close,label:this.props.btnText||"Notification_Box_Got_It"})))))}return function(){return g.apply(this,[])}});define("panels/focusPanels/popupTemplate",["react","lodash","core","panels/mixins/panelFrameMixin","panels/mixins/dontShowAgainMixin","panels/focusPanels/popupTemplate.rt"],function(a,b,c,d,e,f){"use strict";function g(a,c,d){var e="Warning: Failed propType: ";if(!(!a.symbolName^!a.imageClassName)){return new Error(e+d+" must have either symbolName or imageClassName but not both.")}else if(a[c]&&!b.isString(a[c])){return new Error(e+"Invalid prop `"+c+"` of type `"+typeof a[c]+"` supplied to `"+d+"`, expected `string`.")}}return a.createClass({displayName:"popupTemplate",propTypes:{editorAPI:a.PropTypes.object.isRequired,panelName:a.PropTypes.string.isRequired,h1text:a.PropTypes.string,h2text:a.PropTypes.string,symbolName:g,imageClassName:g,bodyText:a.PropTypes.string,btnText:a.PropTypes.string,helpId:a.PropTypes.string,dontShowAgainKey:a.PropTypes.string,userPrefType:a.PropTypes.oneOf(["site","session","global"]),hideDontShowCheckbox:a.PropTypes.bool},mixins:[d,e],getInitialState:function(){return{dontShowAgain:this.getDontShowAgain()}},openLearnMore:function(){var a={component:this.props.editorAPI.selection.getSelectedComponentType(),panel_name:this.props.panelName,origin:c.constants.BI.HELP.ORIGIN.PANEL,learn_more:true};this.props.editorAPI.panelManager.openHelpCenter(this.props.helpId,null,a)},render:f})});define("panels/focusPanels/outOfGridMobilePanel.rt",["react","lodash","core","panels/focusPanels/popupTemplate"],function(a,b,c,d){"use strict";return function(){return a.createElement(d,{editorAPI:this.getEditorAPI(),panelName:this.props.panelName,h1text:"Notification_Box_Out_Grid_Mobile_Title",h2text:"Notification_Box_Out_Grid_Mobile_Subtitle",symbolName:"outOfGridMobile",bodyText:"Notification_Box_Out_Grid_Mobile_Text",helpId:"769b8807-30b7-4ee4-8a7b-93674099732f",dontShowAgainKey:c.constants.USER_PREFS.OUT_OF_GRID.MOBILE.OUT_OF_GRID_DONT_SHOW_AGAIN,userPrefType:"site"})}});define("panels/focusPanels/outOfGridMobilePanel",["react","core","panels/focusPanels/outOfGridMobilePanel.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"outOfGridMobilePanel",mixins:[b.mixins.editorAPIMixin],render:c})});define("panels/focusPanels/outOfGridDesktopPanel.rt",["react","lodash","core","panels/focusPanels/popupTemplate"],function(a,b,c,d){"use strict";return function(){return a.createElement(d,{editorAPI:this.getEditorAPI(),panelName:this.props.panelName,h1text:"Notification_Box_Out_Grid_Desktop_Title",symbolName:"outOfGridDesktop",bodyText:"Notification_Box_Out_Grid_Desktop_Text",helpId:"fe18731a-6371-4fe3-bdb0-718bfd9e5216",dontShowAgainKey:c.constants.USER_PREFS.OUT_OF_GRID.DESKTOP.OUT_OF_GRID_DONT_SHOW_AGAIN,userPrefType:"site"})}});define("panels/focusPanels/outOfGridDesktopPanel",["react","core","panels/focusPanels/outOfGridDesktopPanel.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"outOfGridDesktopPanel",mixins:[b.mixins.editorAPIMixin],render:c})});define("panels/focusPanels/outOfContainerGridPanel.rt",["react","lodash","core","panels/focusPanels/popupTemplate"],function(a,b,c,d){"use strict";return function(){return a.createElement(d,{editorAPI:this.getEditorAPI(),panelName:this.props.panelName,h1text:"Notification_Box_Out_Column_Desktop_Title",imageClassName:"container-out-of-grid",bodyText:"Notification_Box_Out_Column_Desktop_Text",helpId:"88ed6daf-e9e1-4531-bdfb-bc00fafdb9d0",dontShowAgainKey:c.constants.USER_PREFS.OUT_OF_GRID.CONTAINER.OUT_OF_GRID_DONT_SHOW_AGAIN,userPrefType:"site"})}});define("panels/focusPanels/outOfContainerGridPanel",["react","core","panels/focusPanels/outOfContainerGridPanel.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"outOfContainerGridPanel",mixins:[b.mixins.editorAPIMixin],render:c})});define("panels/focusPanels/dragToHeaderPanel.rt",["react","lodash","core","panels/focusPanels/popupTemplate"],function(a,b,c,d){"use strict";return function(){return a.createElement(d,{editorAPI:this.getEditorAPI(),panelName:this.props.panelName,h1text:"Notification_Box_Header_Added_Title",h2text:"Notification_Box_Header_Added_Subtitle",symbolName:"showOnAllPages",bodyText:"Notification_Box_Header_Added_Text",helpId:"db639aa7-f012-4526-9390-ef466c95f19d",dontShowAgainKey:c.constants.USER_PREFS.DRAG_TO_HEADER.DONT_SHOW_AGAIN,userPrefType:c.constants.USER_PREFS.TYPES.SITE})}});define("panels/focusPanels/dragToHeaderPanel",["react","core","panels/focusPanels/dragToHeaderPanel.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"dragToHeaderPanel",mixins:[b.mixins.editorAPIMixin],render:c})});define("panels/focusPanels/spotifySearchFocusPanel.rt",["react","lodash","panels/frames/focusPanelFrame","helpIds"],function(a,b,c,d){"use strict";return function(){return a.createElement(c,{ref:"focusPanelFrame",title:this.translateIfNeeded("Spotify_Player_Settings_Search"),panelName:this.props.panelName,selectedComponentType:this.props.selectedComponentType,className:"spotify-search-panel",helpId:d.EXTERNAL.SEARCH_SPOTIFY},a.createElement("iframe",{className:"content-iframe",src:this.props.iframeSrc}))}});define("panels/focusPanels/spotifySearchFocusPanel",["react","lodash","util","panels/focusPanels/spotifySearchFocusPanel.rt"],function(a,b,c,d){
"use strict";return a.createClass({displayName:"spotifySearch",mixins:[c.translationMixin,c.postMessageMixin],render:d,componentDidMount:function(){this.setPostMessageHandlerNamed("spotifySearch",this.props.id,this.onMessageFromDialog)},onMessageFromDialog:function(a){if(b.isFunction(this.props.callback)){this.props.callback(a)}this.refs.focusPanelFrame.close()}})});define("panels/focusPanels/iTunsLinkMaker.rt",["react","lodash","panels/frames/focusPanelFrame","helpIds"],function(a,b,c,d){"use strict";return function(){return a.createElement(c,{title:this.translateIfNeeded("iTunes_Link_Maker_Title"),panelName:this.props.panelName,helpId:d.EXTERNAL.SEARCH_ITUNES,className:"itunes-link-maker"},a.createElement("iframe",{className:"content-iframe",src:"https://linkmaker.itunes.apple.com"}))}});define("panels/focusPanels/iTunsLinkMaker",["react","lodash","util","panels/focusPanels/iTunsLinkMaker.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"iTunesLinkMaker",mixins:[c.translationMixin],render:d})});define("panels/focusPanels/feedbackPanel.rt",["react","lodash","panels/frames/focusPanelFrame"],function(a,b,c){"use strict";return function(){return a.createElement(c,{ref:"panelFrame",panelName:this.props.panelName,shouldHideHeader:true,shouldHideHelp:true,onClose:this.panelWillClose,isBareMode:true},a.createElement("iframe",{className:"feedback-iframe",src:this.getIframeSrc(),width:"500",height:"743",ref:"iframe"}))}});define("panels/focusPanels/feedbackPanel",["react","lodash","core","util","panels/panelManager/panelManagerFactory","constants","panels/focusPanels/feedbackPanel.rt"],function(a,b,c,d,e,f,g){"use strict";var h=["ReactSource","experiments","experimentsoff"];function i(){var a=d.url.getParameterByName("feedbackVersion");var c=b(h).map(function(a){var b=d.url.getParameterByName(a);return b?"&"+a+"="+b:null}).compact().join("");if(a){c+="&rc="+a}return c}function j(){var a=d.serviceTopology.baseDomain;return"http://feedback."+a}return a.createClass({propTypes:{},displayName:"feedbackPanel",mixins:[c.mixins.editorAPIMixin],getIframeSrc:function(){var a=this.getEditorAPI();var b=a.generalInfo.getSiteId();var c=a.generalInfo.getMetaSiteId();return j()+"/shareSite/"+b+"?metaSiteId="+c+i()},componentDidMount:function(){window.addEventListener("message",this.iframeMessageHandler)},componentWillUnmount:function(){if(this.closeTimeout){window.clearTimeout(this.closeTimeout)}window.removeEventListener("message",this.iframeMessageHandler)},iframeMessageHandler:function(a){if(a.origin!==j()){return}var b=a.data&&JSON.parse(a.data);switch(b.action){case"feedbackhelp":var c=b.helpType==="ReadHelp"?"38fac604-38ba-4d83-97eb-3fbc8f702762":"cb9a32fa-b217-4e31-b2e6-905dd8e2116c";e.getManager().openHelpCenter(c);break;case"feedbackclose":this.refs.panelFrame.close();break}},panelWillClose:function(){if(this.closeTimeout){return}this.closeTimeout=setTimeout(function(){this.refs.panelFrame.close()}.bind(this),f.FEEDBACK.CLOSE_PANEL_TIMEOUT);if(b.get(this.refs,"iframe.contentWindow")){this.refs.iframe.contentWindow.postMessage("panelClosed",j())}return false},render:g})});define("panels/focusPanels/getTrafficPanel.rt",["react","lodash","panels/focusPanels/welcomeVideoPanel","util","baseUI"],function(a,b,c,d,e){"use strict";function f(){this.searchOnGoogle()}function g(){this.getFoundOnGoogle()}return function(){return a.createElement(c,{ref:"frame",title:d.translate("Notification_Box_Get_Traffic_Title"),subtitle:d.translate("Notification_Box_Get_Traffic_Description"),linkedVideoData:this.linkedVideoData(),panelName:this.props.panelName,className:"getTrafficPanel",shouldNotCloseOnBlur:true},a.createElement("div",{className:"buttons"},a.createElement(e.button,{label:"Notification_Box_Get_Traffic_Search_Google_Button_Label",onClick:f.bind(this)}),a.createElement(e.button,{label:"Notification_Box_Get_Traffic_Submit_Website_Button_Label",onClick:g.bind(this)})))}});define("panels/focusPanels/getTrafficPanel",["react","lodash","core","util","panels/focusPanels/getTrafficPanel.rt"],function(a,b,c,d,e){"use strict";var f=c.bi;var g=d.translate("Notification_Box_Get_Traffic_Video_URL");return a.createClass({propTypes:{},displayName:"getTrafficPanel",mixins:[c.mixins.editorAPIMixin],getFoundOnGoogle:function(){this.sendPanelGetFoundEvent("getFoundOnGoogle");var a=d.translate("Notification_Box_Get_Traffic_Submit_Website_Button_Link");window.open(a,"_blank")},searchOnGoogle:function(){var a="https://www.google.co.il/?#q=site:";var b=this.getEditorAPI();var c=b.generalInfo.getPublicUrl();if(c){c=c.replace(/.*?:\/\//g,"")}var d=a+c;if(c){window.open(d,"_blank")}this.sendSearchOnGoogleEvent(d)},getContentClass:function(){return"only-new"},linkedVideoData:function(){return g},sendSearchOnGoogleEvent:function(a){var b=this.getEditorAPI();var c=f.events.getTrafficPanel.GET_TRAFFIC_SEARCH_GOOGLE_CLICK;var d={site_id:b.generalInfo.getSiteId(),url:a};b.bi.event(c,d)},sendPanelGetFoundEvent:function(a){var b=this.getEditorAPI();var c=f.events.getTrafficPanel.GET_TRAFFIC_GET_FOUND_ON_GOOGLE_CLICK;var d={site_id:b.generalInfo.getSiteId(),origin:a,video_url:g};b.bi.event(c,d)},render:e})});define("panels/focusPanels/promotionModalPanel.rt",["react","lodash","panels/frames/focusPanelFrame","util","baseUI","symbols"],function(a,b,c,d,e,f){"use strict";function g(){var c=this.getImageContainerClass();return a.createElement("header",{className:"panel-header dark"},a.createElement("button",{className:"close",onClick:this.refs.frame&&this.refs.frame.close},a.createElement(f.symbol,{name:"headerCloseButton"})),a.createElement("div",{className:"title-line-1"},d.translate(this.props.headerFirstLineText)),this.props.headerSecondLineText?a.createElement("div",{className:"title-line-2",key:"headerSecondLine"},"\n            ",d.translate(this.props.headerSecondLineText),"\n        "):null,a.createElement(c,{className:"image-wrapper",onClick:this.props.isImageLinkActive?this.handleAction.bind(this,"image"):b.noop},a.createElement("img",{ref:"image",src:this.props.imageSrc}),a.createElement("div",{className:"overlay-box-1"}),a.createElement("div",{className:"overlay-box-2"}),a.createElement("div",{className:"overlay-box-3"}),a.createElement(c,{})))}function h(){this.handleAction("date kink")}function i(){this.handleAction("submission button")}return function(){return a.createElement(c,{ref:"frame",panelName:this.props.panelName,shouldHideHeader:true,shouldHideHelp:true,className:"promo-popup-panel "+this.props.className},g.apply(this,[]),a.createElement("div",{className:"content"},a.createElement("p",{},d.translate(this.props.bodyText),this.props.bodyLinkText?a.createElement("a",{key:"link",onClick:h.bind(this)},d.translate(this.props.bodyLinkText)):null),this.props.bodyBottomText?a.createElement("p",{key:"bodyBottomText"},d.translate(this.props.bodyBottomText)):null,a.createElement(e.button,{label:this.props.actionText,onClick:i.bind(this)})))}});define("panels/focusPanels/promotionModalPanel",["react","lodash","core","util","panels/focusPanels/promotionModalPanel.rt"],function(a,b,c,d,e){"use strict";return a.createClass({displayName:"promotionModalPanel",mixins:[c.mixins.editorAPIMixin],propTypes:{headerFirstLineText:a.PropTypes.string,headerSecondLineText:a.PropTypes.string,imageSrc:a.PropTypes.string,bodyText:a.PropTypes.string,bodyLinkText:a.PropTypes.string,isImageLinkActive:a.PropTypes.bool,actionText:a.PropTypes.string,actionUrl:a.PropTypes.string,biEvent:a.PropTypes.object},getDefaultProps:function(){return{isImageLinkActive:true}},getImageContainerClass:function(){return this.props.isImageLinkActive?"a":"div"},handleAction:function(a){this.sendSubmitVideoClickedBI(a);if(window){window.open(d.translate(this.props.actionUrl))}},sendSubmitVideoClickedBI:function(a){var b={origin:a};this.getEditorAPI().bi.event(this.props.biEvent,b)},render:e})});define("panels/focusPanels/sizeRestrictionPanel.rt",["react","lodash","core","panels/focusPanels/popupTemplate"],function(a,b,c,d){"use strict";return function(){return a.createElement(d,{editorAPI:this.getEditorAPI(),panelName:this.props.panelName,h1text:this.props.title,symbolName:"bigtopin",bodyText:this.props.content,dontShowAgainKey:c.constants.PANELS.PIN_TOO_BIG.PIN_TOO_BIG_DONT_SHOW_AGAIN,helpId:"7827a21e-04e0-4bdd-9ee0-b68677fa7a5a",userPrefType:"site"})}});define("panels/focusPanels/sizeRestrictionPanel",["react","core","lodash","panels/focusPanels/sizeRestrictionPanel.rt"],function(a,b,c,d){"use strict";return a.createClass({mixins:[b.mixins.editorAPIMixin],displayName:"sizeRestrictionPanel",componentDidMount:function(){var a=this.getEditorAPI();a.bi.event(b.bi.events.pinToScreen.NOTIFICATION_TOO_BIG,{state:this.props.state,component_type:a.getComponentType(a.selection.getSelectedComponents())})},render:d})});define("panels/focusPanels/newEditorWelcomeScreenPanel.rt",["react","lodash","panels/focusPanels/welcomeVideoPanel","util","baseUI"],function(a,b,c,d,e){"use strict";function f(){this.back()}function g(){this.next()}return function(){return a.createElement(c,{ref:"frame",title:d.translate("Notification_Box_New_Template_Title"),subtitle:d.translate("Notification_Box_New_Template_Subtitle"),linkedVideoData:this.linkedVideoData(),contentClass:this.getContentClass(),content:this.getContent(),panelName:this.props.panelName,shouldNotCloseOnBlur:true},a.createElement("div",{className:"buttons"},this.props.isEligibleForSwitch?a.createElement(e.button,{label:"Notification_Box_Back_To_Old_Editor",onClick:f.bind(this),key:"Notification_Box_Back_To_Old_Editor",className:"btn-confirm-secondary"}):null,a.createElement(e.button,{label:this.props.nextBtnLabel,onClick:g.bind(this)})))}});define("panels/focusPanels/newEditorWelcomeScreenPanel",["react","lodash","core","util","panels/focusPanels/newEditorWelcomeScreenPanel.rt"],function(a,b,c,d,e){"use strict";var f=c.bi;var g;return a.createClass({displayName:"newEditorWelcomeScreenPanel",mixins:[c.mixins.editorAPIMixin],propTypes:{isEligibleForSwitch:a.PropTypes.bool,onNextClick:a.PropTypes.func.isRequired,nextBtnLabel:a.PropTypes.string.isRequired,onBackClick:a.PropTypes.func.isRequired},next:function(){this.refs.frame.close();this.props.onNextClick()},back:function(){this.refs.frame.close();this.props.onBackClick()},linkClick:function(){var a=this.props.isEligibleForSwitch?"LEARN_MORE_CLICK_WITH_BACK_OPTION":"LEARN_MORE_CLICK_WITHOUT_BACK_OPTION";this.sendBIEvent(a);var b=d.translate("SWITCH_EDITORS_LP_LINK");if(window){window.open(b)}},getContentClass:function(){return this.props.isEligibleForSwitch?"switch-to-old":"only-new"},getContent:function(){var a={};if(this.props.isEligibleForSwitch){a.line1="Notification_Box_Switch_Editor_Description";a.link="Notification_Box_Switch_Editor_Link";a.line2=""}else{a.line1="Notification_Box_New_Template_Line1";a.link="Notification_Box_New_Template_Link";a.line2="Notification_Box_New_Template_Line2"}return a},linkedVideoData:function(){var a="//www.youtube.com/embed/"+d.translate("SWITCH_EDITORS_PR_VIDEO");return a},sendBIEvent:function(a){var b=this.getEditorAPI();var c=f.events.newEditorWelcomeScreens[a];var d={site_id:b.generalInfo.getSiteId()};if(c.fields.duration){d.duration=Date.now()-g}b.bi.event(c,d)},componentDidMount:function(){g=Date.now();var a=this.props.isEligibleForSwitch?"POP_UP_OPEN_WITH_BACK_OPTION":"POP_UP_OPEN_WITHOUT_BACK_OPTION";this.sendBIEvent(a)},render:e})});define("panels/focusPanels/editorMigrationFailedPanel.rt",["react","lodash","baseUI","panels/frames/focusPanelFrame","util"],function(a,b,c,d,e){"use strict";return function(){return a.createElement(d,{panelName:this.props.panelName,shouldHideHelp:true,shouldHideHeader:true,shouldNotCloseOnBlur:true,isBareMode:true,className:"editor-compatibility-panel"},a.createElement("header",{className:"save-publish-panel-header header"},a.createElement("div",{className:"header-content"},a.createElement("span",{className:"title"},e.translate("Notification_Box_Wrong_Editor_Title")),a.createElement("div",{className:"subtitle"},e.translate("Notification_Box_Wrong_Editor_Subtitle")))),a.createElement(c.symbol,{name:"coffee",className:"coffee-img"}),a.createElement("div",{className:"content"},a.createElement("div",{},a.createElement("span",{},e.translate("Notification_Box_Wrong_Editor_Line1")),a.createElement("span",{},a.createElement("a",{target:"_blank",href:this.getHref()},e.translate("Notification_Box_Wrong_Editor_Link"))),a.createElement("span",{}," ",e.translate("Notification_Box_Wrong_Editor_Line2"))),a.createElement(c.button,{label:"Notification_Box_Wrong_Editor_Continue",onClick:this.onClick,className:"button"})))}});define("panels/focusPanels/editorMigrationFailedPanel",["react","lodash","panels/focusPanels/editorMigrationFailedPanel.rt"],function(a,b,c){"use strict";function d(a,c,d){var e=new RegExp("([?&])"+c+"=.*?(&|$)","i");var f=b.includes(a,"?")?"&":"?";if(a.match(e)){return a.replace(e,"$1"+c+"="+d+"$2")}return a+f+c+"="+d}return a.createClass({displayName:"editorMigrationFailedPanel",render:c,onClick:function(){var a=d(window.document.location.href,"forceEditorVersion","old");window.location=a},getHref:function(){return"http://www.wix.com/website/templates/html/new/1"}})});define("panels/focusPanels/newUserIntroVideoPanel.rt",["react","lodash","panels/focusPanels/welcomeVideoPanel","util","baseUI"],function(a,b,c,d,e){"use strict";function f(){this.startNow()}return function(){return a.createElement(c,{ref:"frame",title:d.translate("Intro_video_new_user_dialog_title"),subtitle:d.translate("Intro_video_new_user_dialog_sub_heading"),linkedVideoData:this.linkedVideoData(),panelName:this.props.panelName,onCloseByX:this.sendBIEventWhenClosedByX,onCloseByESC:this.sendBIEventWhenClosedByESC,shouldNotCloseOnBlur:true},a.createElement("div",{className:"buttons"},a.createElement(e.button,{label:"Intro_video_new_user_button",onClick:f.bind(this)})))}});define("panels/focusPanels/newUserIntroVideoPanel",["react","lodash","core","panels/focusPanels/newUserIntroVideoPanel.rt"],function(a,b,c,d){"use strict";var e=c.bi;var f;var g=["https://www.youtube.com/embed/uzdRtfcCDPc?autoplay=1&rel=0&controls=0&showinfo=0&fs=0","https://www.youtube.com/embed/S--1igsCuZI?autoplay=1&rel=0&controls=0&showinfo=0&fs=0","https://www.youtube.com/embed/2RkRWv_nqLQ?autoplay=1&rel=0&controls=0&showinfo=0&fs=0","https://www.youtube.com/embed/Ds9dc2sJi14?autoplay=1&rel=0&controls=0&showinfo=0&fs=0","https://www.youtube.com/embed/tsbOQC_7sck?autoplay=1&rel=0&controls=0&showinfo=0&fs=0","https://www.youtube.com/embed/5qpuQ9nbtPI?autoplay=1&rel=0&controls=0&showinfo=0&fs=0","https://www.youtube.com/embed/Y7tAwNgyer4?autoplay=1&rel=0&controls=0&showinfo=0&fs=0","https://www.youtube.com/embed/bp6HX4UfJz0?autoplay=1&rel=0&controls=0&showinfo=0&fs=0"];return a.createClass({displayName:"newUserIntroVideoPanel",mixins:[c.mixins.editorAPIMixin],componentDidMount:function(){f=Date.now()},startNow:function(){this.sendPanelClosedBIEvent("startNow");this.refs.frame.close()},getContentClass:function(){return"only-new"},sendBIEventWhenClosedByX:function(){this.sendPanelClosedBIEvent("xButton")},sendBIEventWhenClosedByESC:function(){this.sendPanelClosedBIEvent("ESC")},linkedVideoData:function(){var a=b.random(0,g.length-1);this.currentPlayingVideo=this.currentPlayingVideo||g[a];return this.currentPlayingVideo},sendPanelClosedBIEvent:function(a){var b=this.getEditorAPI();var c=e.events.newUserIntroVideoPanel.INTRO_VIDEO_CLOSE;var d={site_id:b.generalInfo.getSiteId(),duration:Date.now()-f,origin:a,video_url:this.currentPlayingVideo};b.bi.event(c,d)},render:d})});define("panels/focusPanels/welcomeVideoNoFrame.rt",["react","lodash","baseUI","panels/frames/emptyPanelFrame"],function(a,b,c,d){"use strict";return function(){return a.createElement(d,{keyboardShortcuts:this.getKeyboardShortcuts(),panelName:"welcomeVideoNoFrame",className:"welcome-video-no-frame panel-frame-container"},a.createElement("div",{className:"dark-frame-overlay",onClick:this.close}),a.createElement("div",{className:"wrapper"},a.createElement("div",{className:"close-button",onClick:this.close},a.createElement(c.symbol,{name:"welcomeVideoCloseButton"})),a.createElement("iframe",{src:"https://www.youtube.com/embed/uzdRtfcCDPc?rel=0&controls=0&showinfo=0&autoplay=1",frameBorder:"0",allowFullScreen:true})))}});define("panels/focusPanels/welcomeVideoNoFrame",["react","core","lodash","panels/focusPanels/welcomeVideoNoFrame.rt","panels/mixins/disableKeyboardShortcutsMixin"],function(a,b,c,d,e){"use strict";var f;return a.createClass({displayName:"welcomeVideoNoFrame",mixins:[e,b.mixins.editorAPIMixin],render:d,componentDidMount:function(){this.sendBIEvent("INTRO_VIDEO_PAGE_LOADS");f=Date.now()},close:function(){this.props.panelManager.closePanelByName(this.props.panelName);this.sendBIEvent("INTRO_VIDEO_CLOSE")},sendBIEvent:function(a){var c=this.getEditorAPI();var d=b.bi.events.newUserIntroVideoPanel[a];var e={site_id:c.generalInfo.getSiteId()};if(d.fields.duration){e.duration=Date.now()-f}c.bi.event(d,e)},getKeyboardShortcuts:function(){return{esc:this.close}}})});define("panels/focusPanels/newEditorListWelcomeScreenPanel.rt",["react","lodash","panels/frames/focusPanelFrame","baseUI","util","symbols"],function(a,b,c,d,e,f){"use strict";function g(){this.back()}function h(){this.next()}return function(){return a.createElement(c,{ref:"frame",panelName:this.props.panelName,shouldHideHeader:true,shouldHideHelp:true,isBareMode:true,className:"new-editor-list-welcome-screen-panel"},a.createElement("header",{className:"panel-header dark",key:"header"},a.createElement("div",{className:"welcome-panel-header-title"},e.translate("list_migration_welcome_screen_title")),a.createElement(f.symbol,{name:"listWelcomeScreenAsset"})),a.createElement("div",{className:b({content:true,"only-new":!this.props.isEligibleForSwitch,"switch-to-old":this.props.isEligibleForSwitch}).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" ")},a.createElement("p",{},"\n            ",e.translate("list_migration_welcome_screen_text_paragraph_1_before_changes_link"),"\n            ",a.createElement("a",{href:this.getChangesPageUrl(),target:"_blank"},e.translate("list_migration_welcome_screen_text_paragraph_1_changes_link")),e.translate("list_migration_welcome_screen_text_paragraph_1_after_changes_link"),"\n        "),a.createElement("p",{},e.translate("list_migration_welcome_screen_text_paragraph_2"))),a.createElement("div",{className:"buttons"},this.props.isEligibleForSwitch?a.createElement(d.button,{label:"Notification_Box_Back_To_Old_Editor",onClick:g.bind(this),key:"Notification_Box_Back_To_Old_Editor",className:"btn-confirm-secondary"}):null,a.createElement(d.button,{label:"Notification_Box_Start_Now",onClick:h.bind(this)})))}});define("panels/focusPanels/newEditorListWelcomeScreenPanel",["react","lodash","util","panels/focusPanels/newEditorListWelcomeScreenPanel.rt"],function(a,b,c,d){"use strict";var e="https://www.wix.com/support/html5/new-wix-editor-june-2015/list/kb/information-about-moving-to-the-new-editor-with-the-list-builder";return a.createClass({displayName:"newEditorListWelcomeScreen",propTypes:{isEligibleForSwitch:a.PropTypes.bool,onNextClick:a.PropTypes.func.isRequired,onBackClick:a.PropTypes.func.isRequired},next:function(){this.refs.frame.close();this.props.onNextClick()},back:function(){this.refs.frame.close();this.props.onBackClick()},getChangesPageUrl:function(){var a=c.languages.getLanguageCode();var b=a==="en"?"www":a;return e.replace("www.wix.com",b+".wix.com")},render:d})});define("panels/focusPanels/createNewTextBoxPanel.rt",["react","lodash","core","panels/focusPanels/popupTemplate"],function(a,b,c,d){"use strict";return function(){return a.createElement(d,{editorAPI:this.getEditorAPI(),panelName:this.props.panelName,h1text:"text_box_too_much_text_error_message_title",symbolName:"createNewTextBox",bodyText:"text_box_too_much_text_error_message_text",hideDontShowCheckbox:true,isSingleInstance:this.props.isSingleInstance})}});define("panels/focusPanels/createNewTextBoxPanel",["react","core","panels/focusPanels/createNewTextBoxPanel.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"createNewTextBoxPanel",mixins:[b.mixins.editorAPIMixin],render:c})});define("panels/focusPanels/siteImageOptimizationPanel.rt",["react","lodash","baseUILib","core","baseUI","panels/frames/focusPanelFrame","util","helpIds"],function(a,b,c,d,e,f,g,h){"use strict";return function(){return a.createElement(f,{panelName:this.props.panelName,title:g.translate("SITE_IMAGE_QUALITY_SETTINGS_PANEL_HEADER_TITLE"),ref:"frame",helpId:h.SETTINGS.IMAGE_OPTIMIZATION,className:"site-image-optimisation-panel"},a.createElement("div",{className:"image-optimisation-thumbnailsWithIcons"},a.createElement("div",{className:"rich-text-paragraph"},a.createElement("p",{className:"rich-text-paragraph-content"},g.translate("SITE_IMAGE_QUALITY_SETTINGS_PANEL_DESCRIPTION"))),a.createElement(e.thumbnailsWithIcons,{valueLink:this.linkedQualityPresets(),options:this.getImageQualityPresetsOptions()})),a.createElement(c.divider,{long:true}),a.createElement("div",{className:"action-buttons"},a.createElement(e.button2,{label:"SITE_IMAGE_QUALITY_SETTINGS_PANEL_CANCEL_BUTTON",onClick:this.closeImageQualityPanel,className:"default image-optimisation-cancel"}),a.createElement(e.button2,{label:"SITE_IMAGE_QUALITY_SETTINGS_PANEL_APPLY_BUTTON",disabled:this.isApplyDisabled(),onClick:this.handleApplyQuality,className:"default image-optimisation-done"})))}});define("panels/focusPanels/siteImageOptimizationPanel",["core","react","lodash","panels/focusPanels/siteImageOptimizationPanel.rt"],function(a,b,c,d){"use strict";var e="global";var f="custom";var g=["none","mild","regular","moderate","strong","maximum"];var h=2;var i=[{unsharpMask:{radius:0,amount:0,threshold:0},quality:90},{unsharpMask:{radius:.33,amount:1,threshold:0}},{unsharpMask:{radius:.66,amount:1,threshold:.01}},{unsharpMask:{radius:1.2,amount:1,threshold:.01}},{unsharpMask:{radius:2,amount:1,threshold:0}},{unsharpMask:{radius:4,amount:1,threshold:0}}];var j=[{title:"IMAGE_QUALITY_NAME_NONE",tooltip:"IMAGE_QUALITY_NAME_NONE_TOOLTIP",value:0,symbolName:"image-quality-none"},{title:"IMAGE_QUALITY_NAME_GLOBAL_MILD",tooltip:"IMAGE_QUALITY_NAME_GLOBAL_MILD_TOOLTIP",value:1,symbolName:"image-quality-mild"},{title:"IMAGE_QUALITY_NAME_GLOBAL_REGULAR",tooltip:"IMAGE_QUALITY_NAME_GLOBAL_REGULAR_TOOLTIP",value:2,symbolName:"image-quality-regular"},{title:"IMAGE_QUALITY_NAME_GLOBAL_MODERATE",tooltip:"IMAGE_QUALITY_NAME_GLOBAL_MODERATE_TOOLTIP",value:3,symbolName:"image-quality-moderate"},{title:"IMAGE_QUALITY_NAME_GLOBAL_STRONG",tooltip:"IMAGE_QUALITY_NAME_GLOBAL_STRONG_TOOLTIP",value:4,symbolName:"image-quality-strong"},{title:"IMAGE_QUALITY_NAME_GLOBAL_MAXIMUM",tooltip:"IMAGE_QUALITY_NAME_GLOBAL_MAXIMUM_TOOLTIP",value:5,symbolName:"image-quality-maximum"}];function k(a,b){return c.findIndex(b,function(b){return c.isEqual(b,a)})}return b.createClass({mixins:[a.mixins.editorAPIMixin],displayName:"siteImageOptimization",propTypes:{unsharpMask:b.PropTypes.shape({radius:b.PropTypes.number,amount:b.PropTypes.number,threshold:b.PropTypes.number})},getInitialState:function(){var a=this.getGlobalImageQualityData()||i[h];var b=k(a,i);return{selectedIndex:b,selectedValue:a}},getImageQualityPresetsOptions:function(){return j},linkedQualityPresets:function(){return{value:this.state.selectedIndex,requestChange:function(a){this.setState({selectedValue:i[a],selectedIndex:a})}.bind(this)}},handleApplyQuality:function(){if(this.isApplyDisabled()){return}this.updateGlobalImageQualityData(this.state.selectedValue);this.sendQualityApplyBI(this.state.selectedIndex);this.closeImageQualityPanel()},sendQualityApplyBI:function(b){var c=this.state.selectedValue;this.getEditorAPI().bi.event(a.bi.events.siteImageQualitySettingsPanel.site_image_quality_settings_panel_apply,{origin:e,preset:g[b]||f,unsharp_amount:c.unsharpMask.amount*100,unsharp_radius:c.unsharpMask.radius*100,unsharp_threshold:c.unsharpMask.threshold*100})},closeImageQualityPanel:function(){var a=this.getEditorAPI();a.panelManager.closePanelByName(this.props.panelName)},isApplyDisabled:function(){var a=this.getGlobalImageQualityData();return this.state.selectedIndex===-1||!this.getGlobalImageQualityData()&&this.state.selectedIndex===h||c.isEqual(a,this.state.selectedValue)},getGlobalImageQualityData:function(){var a=this.getEditorAPI().media.imageQuality.get();return c.isEmpty(a)?null:c.pick(a,["unsharpMask","quality"])},updateGlobalImageQualityData:function(a){var b=this.getEditorAPI();b.media.imageQuality.reset();b.media.imageQuality.update(a);b.wixapps.classics.reloadApp("blog");this.getEditorAPI().history.add("site image quality panel - update quality")},render:d})});define("panels/focusPanels/siteMembersSettingsPanel.rt",["react","lodash","baseUILib","baseUI","panels/frames/focusPanelFrame","util","helpIds"],function(a,b,c,d,e,f,g){"use strict";return function(){return a.createElement(e,{panelName:this.props.panelName,title:f.translate("Pages_Member_Signup_Settings_Title"),ref:"frame",helpId:g.SITE_MEMBERS.SETTINGS,className:"site-members-settings-panel"},a.createElement("div",{className:"content"},a.createElement("span",{className:"description"},f.translate("Pages_Member_Signup_Settings_Description")),a.createElement(c.divider,{long:true}),a.createElement("div",{className:"settings"},a.createElement(d.radioButtons,{label:"Pages_Member_Signup_Permission_Settings_Dropdown_Label",infoText:"Pages_Member_Signup_Permission_Settings_Dropdown_Tooltip",valueLink:this.linkState("autoApproval"),options:this.getAutoApprovalOptions()}),a.createElement(c.divider,{long:true}),a.createElement(d.radioButtons,{label:"Pages_Member_Signup_Display_Settings_Dropdown_Label",infoText:"Pages_Member_Signup_Display_Settings_Dropdown_Tooltip",valueLink:this.linkState("loginDialogFirst"),options:this.getLoginFirstOptions()}))),a.createElement(c.divider,{long:true}),a.createElement("div",{className:"actions"},a.createElement("div",{className:"link-container"},a.createElement(d.symbol,{name:"sparkling-bulb-reg"}),a.createElement("a",{className:"link",onClick:this.openHowToHelpCenter},f.translate("Member_Login_Settings_Learn_How"))),a.createElement(d.button,{label:"Pages_Member_Signup_Settings_Done",onClick:this.applySettings,className:"btn-confirm-primary btn-md"})))}});define("panels/focusPanels/siteMembersSettingsPanel",["react","lodash","core","helpIds","panels/focusPanels/siteMembersSettingsPanel.rt"],function(a,b,c,d,e){"use strict";return a.createClass({displayName:"siteMembersSettingsPanel",mixins:[c.mixins.editorAPIMixin,a.addons.LinkedStateMixin],getInitialState:function(){var a=this.getEditorAPI();return{autoApproval:a.siteMembers.isAutoApproval(),loginDialogFirst:a.siteMembers.isLoginDialogFirst()}},closePanel:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},applySettings:function(){var a=this.getEditorAPI();if(a.siteMembers.isAutoApproval()!==this.state.autoApproval){a.siteMembers.setAutoApproval(this.state.autoApproval)}if(a.siteMembers.isLoginDialogFirst()!==this.state.loginDialogFirst){a.siteMembers.setLoginDialogFirst(this.state.loginDialogFirst)}this.closePanel()},openHowToHelpCenter:function(){this.getEditorAPI().panelManager.openHelpCenter(d.SITE_MEMBERS.HOW_TO)},getAutoApprovalOptions:function(){return[{label:"Pages_Member_Signup_Permission_Settings_Dropdown_Automatic",value:true},{label:"Pages_Member_Signup_Permission_Settings_Dropdown_Manual",value:false}]},getLoginFirstOptions:function(){return[{label:"Pages_Member_Signup_Display_Settings_Dropdown_Signup",value:false},{label:"Pages_Member_Signup_Display_Settings_Dropdown_Login",value:true}]},render:e})});define("panels/focusPanels/newFeaturesVideoPanel.rt",["react","lodash","panels/focusPanels/welcomeVideoPanel","util","baseUI"],function(a,b,c,d,e){"use strict";function f(){this.startNow()}return function(){return a.createElement(c,{ref:"frame",title:d.translate("Notification_Box_New_Editor_Features_Title"),subtitle:d.translate("Notification_Box_New_Editor_Features_Subtitle"),linkedVideoData:this.linkedVideoData(),panelName:this.props.panelName,onCloseByX:this.sendBIEventWhenClosedByX,onCloseByESC:this.sendBIEventWhenClosedByESC,shouldNotCloseOnBlur:true},a.createElement("div",{className:"buttons"},a.createElement(e.button,{label:"Intro_video_new_user_button",onClick:f.bind(this)})))}});define("panels/focusPanels/newFeaturesVideoPanel",["react","lodash","core","util","panels/focusPanels/newFeaturesVideoPanel.rt"],function(a,b,c,d,e){"use strict";var f=c.bi;var g;return a.createClass({displayName:"newFeaturesVideoPanel",mixins:[c.mixins.editorAPIMixin],componentDidMount:function(){g=Date.now()},startNow:function(){this.sendPanelClosedBIEvent("startNow");this.refs.frame.close()},getContentClass:function(){return"only-new"},linkedVideoData:function(){var a=d.translate("Notification_Box__video_url_EN");return a},sendBIEventWhenClosedByX:function(){this.sendPanelClosedBIEvent("xButton")},sendBIEventWhenClosedByESC:function(){this.sendPanelClosedBIEvent("ESC")},sendPanelClosedBIEvent:function(a){var b=this.getEditorAPI();var c=f.events.newFeaturesVideoPanel.NEW_FEATURES_INTRO_VIDEO_CLOSE;var e={site_id:b.generalInfo.getSiteId(),duration:Date.now()-g,origin:a,video_url:d.translate("Notification_Box__video_url_EN")};b.bi.event(c,e)},render:e})});define("panels/focusPanels/focusPanels",["panels/focusPanels/welcomeVideoPanel","panels/focusPanels/exampleFocusPanel","panels/focusPanels/blogManagerPanel","panels/focusPanels/shoutOutTemplatesPanel","panels/focusPanels/aviaryPanel","panels/focusPanels/organizeImagesPanel","panels/focusPanels/outOfGridMobilePanel","panels/focusPanels/outOfGridDesktopPanel","panels/focusPanels/outOfContainerGridPanel","panels/focusPanels/dragToHeaderPanel","panels/focusPanels/spotifySearchFocusPanel","panels/focusPanels/iTunsLinkMaker","panels/focusPanels/feedbackPanel","panels/focusPanels/getTrafficPanel","panels/focusPanels/promotionModalPanel","panels/focusPanels/sizeRestrictionPanel","panels/focusPanels/newEditorWelcomeScreenPanel","panels/focusPanels/editorMigrationFailedPanel","panels/focusPanels/newUserIntroVideoPanel","panels/focusPanels/welcomeVideoNoFrame","panels/focusPanels/newEditorListWelcomeScreenPanel","panels/focusPanels/createNewTextBoxPanel","panels/focusPanels/popupTemplate","panels/focusPanels/siteImageOptimizationPanel","panels/focusPanels/siteMembersSettingsPanel","panels/focusPanels/newFeaturesVideoPanel"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){"use strict";return{welcomeVideoPanel:a,exampleFocusPanel:b,blogManagerPanel:c,shoutOutTemplatesPanel:d,aviaryPanel:e,organizeImagesPanel:f,outOfGridMobilePanel:g,outOfGridDesktopPanel:h,outOfContainerGridPanel:i,dragToHeaderPanel:j,spotifySearchFocusPanel:k,iTunsLinkMaker:l,feedbackPanel:m,getTrafficPanel:n,promotionModalPanel:o,sizeRestrictionPanel:p,newEditorWelcomeScreenPanel:q,editorMigrationFailedPanel:r,newUserIntroVideoPanel:s,welcomeVideoNoFrame:t,newEditorListWelcomeScreenPanel:u,createNewTextBoxPanel:v,popupTemplate:w,siteImageOptimizationPanel:x,siteMembersSettingsPanel:y,newFeaturesVideoPanel:z}});define("panels/messagePanels/deleteLastPageMessage/deleteLastPageMessage.rt",["react","lodash","panels/frames/messagePanelFrame","util","baseUI"],function(a,b,c,d,e){"use strict";return function(){return a.createElement(c,{panelName:this.props.panelName,editorAPI:this.getEditorAPI(),confirmLabel:"Pages_Settings_Delete_Last_Page_Message_Confirmation",className:"delete-page-confirmation",panelTitle:d.translate("Pages_Settings_Delete_Last_Page_Message_Title")},a.createElement("div",{className:"icon"},a.createElement(e.symbol,{name:"plaster"})),a.createElement("div",{},a.createElement("p",{},d.translate("Pages_Settings_Delete_Last_Page_Message")),a.createElement("p",{},d.translate("Pages_Settings_Delete_Last_Page_Message2")),a.createElement("p",{},d.translate("Pages_Settings_Delete_Last_Page_Message3"),"\n            ",a.createElement("a",{
key:"page-settings-tab-privacy-member-url",href:"https://www.wix.com/support/html5/",target:"_blank"},a.createElement(e.button,{label:"Pages_Settings_Delete_Last_Page_Message_Link",className:"btn-text"})),".\n        ")))}});define("panels/messagePanels/deleteLastPageMessage/deleteLastPageMessage",["react","core","lodash","panels/messagePanels/deleteLastPageMessage/deleteLastPageMessage.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"deleteLastPageMessage",mixins:[b.mixins.editorAPIMixin],render:d})});define("panels/messagePanels/deletePageMessage/deletePageMessage.rt",["react","lodash","panels/frames/messagePanelFrame","util","baseUI"],function(a,b,c,d,e){"use strict";return function(){return a.createElement(c,{panelName:this.props.panelName,onConfirm:this.props.onConfirm,confirmLabel:"Pages_Settings_Delete_Page_Delete",cancelLabel:"Pages_Settings_Delete_Page_Cancel",className:"important delete-page-message",panelTitle:d.translate(this.props.isPopup?"Pages_Settings_Delete_Popup_Title":"Pages_Settings_Delete_Page_Title")},a.createElement("div",{className:"delete-page-message"},a.createElement("div",{className:"icon"},a.createElement(e.symbol,{name:"deleteGeneralIcon"})),a.createElement("div",{className:"message"},d.translate(this.props.isPopup?"Pages_Settings_Delete_Popup_Message":"Pages_Settings_Delete_Page_Message")+" "+this.props.pageTitle+d.translate("Pages_Settings_Delete_Page_Message_End"))))}});define("panels/messagePanels/deletePageMessage/deletePageMessage",["react","lodash","panels/messagePanels/deletePageMessage/deletePageMessage.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"deletePageMessage",render:c})});define("panels/messagePanels/exampleMessagePanel.rt",["react","lodash","panels/frames/messagePanelFrame"],function(a,b,c){"use strict";return function(){return a.createElement(c,{panelName:this.props.panelName,width:"500",height:"500",onConfirm:this.onConfirm,confirmLabel:"OK",title:"Hello"},a.createElement("div",{},"content here"))}});define("panels/messagePanels/exampleMessagePanel",["react","lodash","panels/messagePanels/exampleMessagePanel.rt","pLoader!santa:utils"],function(a,b,c,d){"use strict";return a.createClass({displayName:"exampleMessage",onConfirm:function(){d.log.info("onConfirm called")},render:c})});define("panels/messagePanels/siteRevisionsPanel.rt",["react","lodash","baseUI","util","panels/frames/messagePanelFrame"],function(a,b,c,d,e){"use strict";return function(){return a.createElement(e,{ref:"frame",panelName:this.props.panelName,panelTitle:d.translate("TOPBAR_SITE_HISTORY_MSG_TITLE"),confirmLabel:"TOPBAR_SITE_HISTORY_MSG_BUTTON",onConfirm:this.onConfirm,className:"site-revisions-panel",onCancel:this.onCloseFrame},a.createElement("div",{className:"content-wrapper"},a.createElement("div",{className:"image-container"},a.createElement(c.symbol,{name:"siteHistoryClipart"})),a.createElement("div",{className:"description-container"},a.createElement("p",{},d.translate("TOPBAR_SITE_HISTORY_MSG_BODY1")),a.createElement("p",{},d.translate("TOPBAR_SITE_HISTORY_MSG_BODY2")))))}});define("panels/messagePanels/siteRevisionsPanel",["react","panels/messagePanels/siteRevisionsPanel.rt"],function(a,b){"use strict";return a.createClass({displayName:"siteRevisionsPanel",mixins:[a.addons.LinkedStateMixin],onConfirm:function(){if(this.props.onButtonClick){this.props.onButtonClick(true)}},onCloseFrame:function(){if(this.props.onButtonClick){this.props.onButtonClick(false)}},render:b})});define("panels/messagePanels/switchToOldEditorConfirmationPanel.rt",["react","lodash","util","baseUI","panels/frames/messagePanelFrame"],function(a,b,c,d,e){"use strict";function f(){this.linkClick()}return function(){return a.createElement(e,{ref:"frame",panelName:this.props.panelName,className:"switch-to-old-editor",panelTitle:c.translate(this.props.title),confirmLabel:"Notification_Box__ToOldEditor_Button_ToOldEditor",onConfirm:this.handleBackToOld,cancelLabel:"Notification_Box__ToOldEditor_Button_Cancel",onCancel:this.close},a.createElement("div",{className:"content-wrapper"},a.createElement("div",{className:"logo"},a.createElement(d.symbol,{name:"switchToOldEditorPanel"})),a.createElement("div",{className:"text"},a.createElement("div",{className:"message"},c.translate("Notification_Box__ToOldEditor_Text1")),a.createElement("div",{className:"message"},a.createElement("p",{},c.translate("Notification_Box__ToOldEditor_Text2"),"\n                    ",a.createElement("a",{onClick:f.bind(this)},c.translate("Notification_Box__ToOldEditor_link")))))))}});define("panels/messagePanels/switchToOldEditorConfirmationPanel",["react","lodash","core","util","panels/messagePanels/switchToOldEditorConfirmationPanel.rt"],function(a,b,c,d,e){"use strict";var f="https://{$lang}.wix.com/support/html5/new-wix-editor-june-2015/using-your-editor/kb/suggestions-and-feedback-new-wix-editor-2015";return a.createClass({displayName:"switchToOldEditorConfirmationPanel",mixins:[c.mixins.editorAPIMixin],propTypes:{title:a.PropTypes.string.isRequired,messageBody:a.PropTypes.string.isRequired},handleBackToOld:function(){d.cookie.setUserPetriOverrideCookie("SantaEditorUserOverride","old");window.onbeforeunload=null;window.location.reload(true)},close:function(){this.refs.frame.close()},linkClick:function(){if(window){var a=this.getEditorAPI().getLanguageCode();var b=f.replace("{$lang}",a==="en"?"www":a);window.open(b)}},render:e})});define("panels/messagePanels/concurrentUsers/concurrentUserPanel.rt",["react","lodash","util","symbols","panels/frames/confirmationPanelFrame"],function(a,b,c,d,e){"use strict";function f(b,d){return a.createElement("li",{},a.createElement("span",{className:"number"},d+1,"."),a.createElement("span",{className:"description"},c.translate(b)))}return function(){return a.createElement(e,{panelName:this.props.panelName,className:"concurrent-user-panel",onConfirm:this.onOk,confirmLabel:this.text().ok,shouldHideCancelButton:true,type:this.props.isFirstUser?"normal":"important",panelTitle:c.translate(this.text().title)},a.createElement("div",{className:"panel-inner"},a.createElement("div",{className:"concurrent-users-panel-img"},a.createElement(d.symbol,{name:this.props.isFirstUser?this.symbols.firstUser:this.symbols.secondUser})),a.createElement("div",{className:"textual-content"},a.createElement("div",{className:"sub-title"},a.createElement("span",{className:"concurrent-user"},this.getConcurrentUserToDisplay()),"\n          ",c.translate(this.text().description),"\n        "),a.createElement.apply(this,["ul",{className:"recommendation-list"},b.map(this.getRecommendations(),f.bind(this))]))))}});define("panels/messagePanels/concurrentUsers/concurrentUserPanel",["react","lodash","core","util","panels/messagePanels/concurrentUsers/concurrentUserPanel.rt"],function(a,b,c,d,e){"use strict";var f=["CONCURRENT_EDITING_SOMEBODY_JOINED_OPT_1","CONCURRENT_EDITING_SOMEBODY_JOINED_OPT_2"];var g=["CONCURRENT_EDITING_ALREADY_OPEN_OPT_1","CONCURRENT_EDITING_ALREADY_OPEN_OPT_2"];var h={first:{title:"CONCURRENT_EDITING_SOMEBODY_JOINED_TITLE",description:"CONCURRENT_EDITING_SOMEBODY_JOINED_DESCRIPTION",ok:"CONCURRENT_EDITING_SOMEBODY_JOINED_OK_BUTTON"},second:{title:"CONCURRENT_EDITING_ALREADY_OPEN_TITLE",description:"CONCURRENT_EDITING_ALREADY_OPEN_DESCRIPTION",ok:"CONCURRENT_EDITING_ALREADY_OPEN_OK_BUTTON"}};var i=0;return a.createClass({displayName:"ConcurrentUserPanel",mixins:[c.mixins.editorAPIMixin],symbols:{firstUser:"concurrentUsersPopupsBlue",secondUser:"concurrentUsersPopupsRed"},propTypes:{isFirstUser:a.PropTypes.bool.isRequired,concurrentUsers:a.PropTypes.arrayOf(a.PropTypes.string).isRequired,concurrentUserToDisplay:a.PropTypes.string},componentDidMount:function(){if(i===0){i=1}else{i=2}},text:function(){if(this.props.isFirstUser){return h.first}return h.second},getRecommendations:function(){if(this.props.isFirstUser){return f}return g},getConcurrentUserToDisplay:function(){var a=this.props.concurrentUserToDisplay||b.first(this.props.concurrentUsers);if(a==="wixStaff"){a=d.translate("CONCURRENT_EDITING_SOMEBODY_JOINED_DESCRIPTION_WIX_STAFF")}return a},onOk:function(){var a=c.bi.events.concurrentUsers.CONCURRENT_USERS_POPUP_OK_CLICK;var b={user:this.props.isFirstUser?"first":"second",count:this.props.concurrentUsers.length,is_first:i===1};this.getEditorAPI().bi.event(a,b)},render:e})});define("panels/messagePanels/messagePanels",["panels/messagePanels/deleteLastPageMessage/deleteLastPageMessage","panels/messagePanels/deletePageMessage/deletePageMessage","panels/messagePanels/exampleMessagePanel","panels/messagePanels/siteRevisionsPanel","panels/messagePanels/switchToOldEditorConfirmationPanel","panels/messagePanels/concurrentUsers/concurrentUserPanel"],function(a,b,c,d,e,f){"use strict";return{deleteLastPageMessage:a,deletePageMessage:b,exampleMessage:c,siteRevisionsPanel:d,switchToOldEditorConfirmationPanel:e,concurrentUserPanel:f}});define("panels/toolPanels/pagesSelector/pageItem.rt",["react","lodash","baseUI","symbols","core"],function(a,b,c,d,e){"use strict";function f(){var f=this.props.dataSource;var g=this.getEditorAPI();var h=this.validatePage();return a.createElement("div",{className:b(this.getItemClassNames(f)).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" ")},a.createElement(c.tooltip,{disabled:h.valid,shouldTranslate:false,value:h.message},a.createElement("label",{className:"item-label"},f.pageData?a.createElement(c.toggle,{name:"checkbox",labelAfterSymbol:true,key:"toggle",disabled:!h.valid,className:"pages-selector-checkbox",value:this.isSelected(),onChange:this.handleToggleChanged}):null,a.createElement("span",{className:"page-name"},f.label,"\n                ",a.createElement("span",{className:"page-info"},f.pageData&&g.pages.isHomePage(f.pageData.id)?a.createElement(d.symbol,{name:"pageItemHomeIcon",key:"isHome"}):null,f.pageData&&e.utils.tpaTypeUtils.isTPA(f.pageData)&&!e.utils.tpaTypeUtils.isTPASpecialPage(g,f.pageData)?a.createElement(d.symbol,{name:"actionButtonSpecialPages",key:"isTpaPage"}):null,f.pageData&&e.utils.blogTypeUtils.isBlogSectionPage(g,f.pageData)?a.createElement(d.symbol,{name:"actionButtonBlogPages",key:"isBlogPage"}):null,f.type.isLink?a.createElement(d.symbol,{name:"pageItemLinkIcon",key:"isLink"}):null,f.type.isDropdown?a.createElement(d.symbol,{name:"pageItemDropdownIcon",key:"isDropDown"}):null,!f.isVisible?a.createElement(d.symbol,{name:"pageItemHideIcon",key:"isHidden"}):null)))))}return function(){return f.apply(this,[])}});define("panels/toolPanels/pagesSelector/pageItem",["react","core","lodash","panels/toolPanels/pagesSelector/pageItem.rt"],function(a,b,c,d){"use strict";return a.createClass({mixins:[b.mixins.editorAPIMixin,a.addons.LinkedStateMixin],displayName:"pageSelectorPageItem",propTypes:{isSubMenu:a.PropTypes.bool,isSubMenuLast:a.PropTypes.bool,validatePage:a.PropTypes.func,selectedPageIds:a.PropTypes.array.isRequired,dataSource:a.PropTypes.object.isRequired,toggleSelection:a.PropTypes.func},handleToggleChanged:function(a){if(this.props.toggleSelection){this.props.toggleSelection(this.getPageId(),a)}},getItemClassNames:function(a){var b=this.validatePage().valid;return{"pages-selector-item":true,"current-page":false,"item-hidden":!a.isVisible,"item-disabled":!b,"item-first-level":!this.props.isSubMenu,"item-second-level":this.props.isSubMenu,"item-second-level-last":this.props.isSubMenuLast,"item-is-page":a.type.isPage}},isSelected:function(){return c.includes(this.props.selectedPageIds,this.getPageId())},validatePage:function(){var a=this.getPageId();var b=[this.props.validatePage||c.noop,c.constant({valid:true})];return c.reduce(b,function(b,c){return b||c(a,this)},undefined,this)},getPageId:function(){return this.props.dataSource.pageData&&this.props.dataSource.pageData.id},render:d})});define("panels/toolPanels/pagesSelector/treeNode.rt",["react","lodash"],function(a,b){"use strict";function c(){var c=this.getTreeViewClass();var d=this.props.nodeContent;var e=this.getChildren().length;var f=this.hasChildren();return a.createElement("li",{"data-numofchildren":e,className:b({"has-children":this.hasChildren(),"pages-tree-node":true}).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" ")},a.createElement(d,this.passNodeContentProps(this.props.dataSource)),a.createElement(c,b.assign({},{isCollapsed:this.state.collapsed},this.passNodeProps())))}return function(){return c.apply(this,[])}});define("panels/toolPanels/pagesSelector/pagesSelectorPanel.rt",["react","lodash","util","baseUI","baseUILib","symbols","popups","panels/toolPanels/pagesSelector/pageItem","panels/toolPanels/pagesSelector/treeNode.rt","panels/frames/toolPanelFrame"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a,c){var d=b.assign({},a,c);if(a.hasOwnProperty("style")){d.style=b.defaults(d.style,a.style)}if(a.hasOwnProperty("className")&&c.hasOwnProperty("className")){d.className=c.className+" "+a.className}return d}function l(c){var e=this.getEditorAPI();return a.createElement("div",{className:"pages-selector-scrollbox"},a.createElement(d.treeView,{className:"pages-tree ",dataSource:e.mainMenu.getMenuItemsTreeForPagesFixed(),editorAPI:e,nodeContent:h,nodeTemplate:i,validatePage:b.partial(this.validatePage,c),selectedPageIds:c.selectedPageIds,toggleSelection:this.toggleOpenOnPage,isRoot:true}))}function m(){var f=g.mappers.pagesSelectorPanel(this.getEditorAPI());return a.createElement(j,k({ref:"frame",top:this.props.top,left:this.props.left,key:"pages-selector-panel",keyboardShortcuts:this.getKeyboardShortcuts(),className:"pages-selector-panel",headerTitle:c.translate("Popups_Settings_Pages_Panel_Header")},b.omit(this.props,"children")),f.selectAll.visible?a.createElement("div",{className:"description-block",key:"selectAll_description"},"\n        ",c.translate("Popups_Settings_Pages_Panel_Text"),"\n    "):null,f.selectAll.visible?a.createElement("div",{className:"select-all-block",key:"selectAll_control"},a.createElement(d.toggle,{name:"checkbox",disabled:f.selectAll.disabled,labelAfterSymbol:true,className:"pages-selector-checkbox",value:f.selectAll.checked,indeterminate:f.selectAll.indeterminate,onChange:this.toggleOpenOnAllPages,label:"Popups_Settings_Pages_All_Toggle"})):null,a.createElement(e.customScroll,{},l.apply(this,[f])))}return function(){return this.getEditorAPI().pages.popupPages.getCurrentPopup()?m.apply(this,[]):null}});define("panels/toolPanels/pagesSelector/pagesSelectorPanel",["react","lodash","util","core","popups","panels/mixins/limitInitialPositionToStageMixin","panels/toolPanels/pagesSelector/pagesSelectorPanel.rt"],function(a,b,c,d,e,f,g){"use strict";return a.createClass({displayName:"pagesSelectorPanel",mixins:[d.mixins.editorAPIMixin,c.draggableMixin,c.translationMixin,f],toggleOpenOnPage:function(a,b){var c=this.getEditorAPI();if(b){e.actions.openBehaviors.assignOpenBehaviorToPage(c,a)}else{e.actions.openBehaviors.removeOpenBehaviorFromPage(c,a)}},toggleOpenOnAllPages:function(a){var b=this.getEditorAPI();if(a){e.actions.openBehaviors.assignOpenBehaviorToAllPages(b)}else{e.actions.openBehaviors.removeOpenBehaviorFromAllPages(b)}},validatePage:function(a,c){if(b.has(a.occupiedPages,c)){return{valid:false,message:this.translateTemplate("Popups_Settings_Triggers_Page_Has_Popup_Tooltip",{POPUP_NAME:'"'+a.occupiedPages[c]+'"'},this.getEditorAPI())}}},getKeyboardShortcuts:function(){var a={},b=d.constants.KEYBOARD_SPECIAL_KEY.value;a[b+" + z"]=this.getEditorAPI().history.undo;a[[b+" + y",b+" + shift + z"].join(",")]=this.getEditorAPI().history.redo;return a},render:g})});define("panels/toolPanels/exampleToolPanel.rt",["react","lodash","panels/frames/toolPanelFrame"],function(a,b,c){"use strict";return function(){return a.createElement(c,{panelName:this.props.panelName,headerTitle:"Tools Panel",width:"500",height:"200",top:this.props.top,left:this.props.left},a.createElement("div",{},"content here"))}});define("panels/toolPanels/exampleToolPanel",["react","lodash","panels/toolPanels/exampleToolPanel.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"exampleToolPanel",getDefaultProps:function(){return{top:"200px",left:"300px"}},render:c})});define("panels/toolPanels/linkPanel/linkPanel.rt",["react","lodash","panels/frames/toolPanelFrame","baseUI","baseUILib","util","symbols","experiment"],function(a,b,c,d,e,f,g,h){"use strict";function i(b,c,e,f){return a.createElement(d.dropDown.option,{className:e.level?"level"+e.level:"",key:e.id,value:e.id},e.title,this.getCurrentPageThisTranslate(e.id))}function j(b,c,e,f){return a.createElement(d.dropDown.option,{shouldTranslate:false,key:e.value,value:e.value},e.label)}function k(b,c,e,f){return a.createElement(d.dropDown.option,{shouldTranslate:false,className:e.level?"level"+e.level:"",key:e.id,value:e.id,searchText:e.title},e.title,this.getCurrentPageThisTranslate(e.id))}function l(b,c,e,f){return a.createElement(d.dropDown.option,{shouldTranslate:false,key:e.url,value:e.url,searchText:e.title},e.title)}function m(b,c,e,f,g){return a.createElement(d.dropDown.option,{className:f.level?"level"+f.level:"",key:f.id,value:f.id,shouldTranslate:false,searchText:f.title},f.title,this.getCurrentPageThisTranslate(f.id))}function n(b,c,e,f,g){return a.createElement(d.dropDown.option,{shouldTranslate:false,key:f.url,value:f.url,searchText:f.title},f.title)}function o(b,c,e,f,g){return a.createElement(d.dropDown.option,{shouldTranslate:false,key:f.value,value:f.value,searchText:f.label},f.label)}function p(c,e){var f=this.getPagesWithAnchors();return a.createElement(d.tabs.tab,{name:"AnchorLink",className:"anchor",key:"anchorLinkTab"},b.isEmpty(f)?a.createElement("div",{key:"noAnchorsWrapper"},a.createElement("div",{className:"symbol-container"},a.createElement(g.symbol,{name:"noLink"})),a.createElement("h3",{},this.translateIfNeeded("LINK_PANEL_NO_ANCHOR_TITLE")),a.createElement("p",{},this.translateIfNeeded("LINK_PANEL_NO_ANCHOR_TEXT"))):null,!b.isEmpty(f)?a.createElement.apply(this,[d.dropDown.combobox,{label:this.props.pageTabPageDropDownTitle?this.props.pageTabPageDropDownTitle:"LINK_PANEL_PAGE_DROP_DOWN_LABEL",valueLink:this.linkToPage(),key:"pagesDropDownAnchorTab"},b.map(this.getPagesWithAnchors(),m.bind(this,c,e,f))]):null,!b.isEmpty(f)&&this.isDynamicPage(this.state.page.id)?a.createElement.apply(this,[d.dropDown.combobox,{label:"LINK_PANEL_PAGE_INNER_ROUTES_DROP_DOWN_LABEL",disabled:!this.shouldShowInnerRoutesDropDown(),key:"innerRouteDropDown",valueLink:this.linkToInnerRoute()},b.map(this.getInnerRoutesDropDown(),n.bind(this,c,e,f))]):null,!b.isEmpty(f)?a.createElement.apply(this,[d.dropDown.combobox,{label:"LINK_PANEL_PAGE_ANCHOR_DROP_DOWN_LABEL",key:"anchorDropDown",disabled:!Boolean(this.state.link)||!Boolean(this.hasAnchors())||this.isDynamicPage(this.state.page.id)&&!this.shouldShowInnerRoutesDropDown(),valueLink:this.linkToAnchor()},b.map(this.getDropDownOptions(),o.bind(this,c,e,f))]):null,!b.isEmpty(f)&&this.isDynamicPage(this.state.page.id)&&!this.hasInnerRoutes()?a.createElement(d.tooltip,{value:this.getNoItemPageToolTip(),key:"noItemToolTip",interactive:true,alignment:d.uiConstants.TOOLTIP.ALIGNMENT.TOP,width:"300px"},a.createElement(d.button,{className:"btn-text",label:"PAGE_SETTINGS_HOW_TO_ADD_INNER_ROUTE"})):null,this.shouldShowInnerRoutesDropDown()?a.createElement(d.tooltip,{value:this.getAnchorTooltipValue(),key:"toolTipAnchor",interactive:true,alignment:d.uiConstants.TOOLTIP.ALIGNMENT.TOP,width:"300px"},a.createElement(d.button,{className:"btn-text",label:"Anchor_Settings_How_Link_Text"})):null)}function q(b,c,e,f){return a.createElement(d.dropDown.option,{key:e.value,value:e.value},e.title)}function r(a,b,c){this.setState({isValid:c})}function s(a,b,c){this.setState({isValid:c})}function t(a,b,c){this.setState({isValid:c})}function u(a,b,c){this.setState({isValid:c})}function v(b,c,e,f,g){return a.createElement(d.dropDown.option,{shouldTranslate:false,key:f.id,value:"#"+f.id},f.title)}function w(c,h){var i=this.props.data.popups;return a.createElement(d.tabs.tab,{name:"PopupLink",key:"popupLinkTab",className:"popup"},!i.length?a.createElement("div",{key:"popups-not-exist"},a.createElement("div",{className:"symbol-container"},a.createElement(g.symbol,{name:"noPopup"})),a.createElement("h3",{},this.translateIfNeeded("LINK_PANEL_TAB_POP-UP_TITLE")),a.createElement("p",{},this.translateIfNeeded("LINK_PANEL_TAB_POP-UP_TEXT")),a.createElement(d.button,{className:"btn-text",label:"LINK_PANEL_TAB_ADD_NEW_POP-UP_LINK",onClick:this.goToAddPanelPopup})):null,i.length?a.createElement("div",{key:"popups-exist",className:"popup-list"},a.createElement.apply(this,[d.dropDown.select,{label:"LINK_PANEL_TAB_POP-UP_DROP_DOWN_LABEL",valueLink:this.linkTo("pageId")},b.map(i,v.bind(this,c,h,i))]),a.createElement(e.divider,{long:true,className:"popup-divider"}),a.createElement("div",{className:"popup-footer"},a.createElement("div",{className:"popup-footer-content"},a.createElement("span",{className:"popup-want-to-add-link"},f.translate("LINK_PANEL_TAB_ADD_NEW_POP-UP_TEXT")),a.createElement(d.button,{className:"btn-text",label:"LINK_PANEL_TAB_ADD_NEW_POP-UP_LINK",onClick:this.goToAddPanelPopup})))):null)}function x(a,b,c){this.setState({isValid:c})}function y(a,b,c){this.setState({isValid:c})}function z(b,c,e,f){return a.createElement(d.dropDown.option,{key:e.value,value:e.value},e.label)}function A(){var e=this.isSectionVisible("PageLink");var m=this.isSectionVisible("NoLink");return a.createElement(c,{helpId:"650e4ba4-4aa8-4484-957a-cc9db36be6d9",panelName:this.props.panelName,selectedComponentType:this.props.bi.selectedComponentType,headerTitle:f.translate("LINK_PANEL_HEADER_PANE_LABEL"),ref:"frame",onClose:this.close.bind(this,this.props.onCancelCallback),className:"link-panel"},a.createElement(d.tabs.holder,{valueLink:this.linkSelectedTab(),className:"left radio"},a.createElement(d.tabs.header,{},this.isSectionVisible("NoLink")?a.createElement(d.tabs.label,{htmlFor:"NoLink",key:"noLinkTabLabel"},this.translateIfNeeded("LINK_PANEL_TAB_NONE")):null,this.isSectionVisible("PageLink")&&!h.isOpen("dpages")?a.createElement(d.tabs.label,{htmlFor:"PageLink",key:"pageLinkTabLabel"},this.translateIfNeeded(this.props.pageTabTitle?this.props.pageTabTitle:"LINK_PANEL_TAB_SITE_PAGE")):null,this.isSectionVisible("PageLink")&&h.isOpen("dpages")?a.createElement(d.tabs.label,{htmlFor:"PageLink",key:"pageLinkTabLabel"},this.translateIfNeeded("LINK_PANEL_TAB_PAGE")):null,h.isOpen("dpages")?a.createElement(d.tabs.label,{htmlFor:"AnchorLink",key:"anchorLinkTabLabel"},this.translateIfNeeded("LINK_PANEL_TAB_ANCHOR")):null,this.isSectionVisible("ExternalLink")?a.createElement(d.tabs.label,{htmlFor:"ExternalLink",key:"externalLinkTabLabel"},this.translateIfNeeded("LINK_PANEL_TAB_WEB_ADDRESS")):null,this.isSectionVisible("EmailLink")?a.createElement(d.tabs.label,{htmlFor:"EmailLink",key:"emailLinkTabLabel"},this.translateIfNeeded("LINK_PANEL_TAB_EMAIL")):null,h.isOpen("phoneLink")&&this.isSectionVisible("PhoneLink")?a.createElement(d.tabs.label,{htmlFor:"PhoneLink",key:"phoneLinkTabLabel"},this.translateIfNeeded("LINK_PANEL_TAB_PHONE")):null,this.isSectionVisible("DocumentLink")?a.createElement(d.tabs.label,{htmlFor:"DocumentLink",key:"docLinkTabLabel"},this.translateIfNeeded("LINK_PANEL_TAB_DOCUMENT")):null,h.isOpen("popups")&&this.isSectionVisible("EdgeAnchorLinks")?a.createElement(d.tabs.label,{htmlFor:"EdgeAnchorLinks",key:"edgeAnchorLinksLabel"},this.translateIfNeeded("LINK_PANEL_TAB_TOPandBOTTOM")):null,h.isOpen("popups")?a.createElement(d.tabs.label,{htmlFor:"PopupLink",key:"popupLinkTabLabel"},this.translateIfNeeded("LINK_PANEL_TAB_POP-UP")):null,!h.isOpen("popups")&&this.isSectionVisible("TopAnchorLink")?a.createElement(d.tabs.label,{htmlFor:"TopAnchorLink",key:"topAnchorLinkTabLabel"},this.translateIfNeeded("LINK_PANEL_TAB_Top_Page")):null,!h.isOpen("popups")&&this.isSectionVisible("BottomAnchorLink")?a.createElement(d.tabs.label,{htmlFor:"BottomAnchorLink",key:"bottomAnchorLinkTabLabel"},this.translateIfNeeded("LINK_PANEL_TAB_Bottom_Page")):null,h.isOpen("wixstaff")&&this.isSectionVisible("LoginToWixLink")?a.createElement(d.tabs.label,{htmlFor:"LoginToWixLink",key:"homePageLoginTabLabel"},this.translateIfNeeded("LINK_PANEL_HOME_PAGE_LOGIN")):null),a.createElement(d.tabs.content,{},m?a.createElement(d.tabs.tab,{name:"NoLink",className:"none",key:"NoLinkTab"},a.createElement("div",{className:"symbol-container"},a.createElement(g.symbol,{name:"noLink"})),a.createElement("h3",{},this.translateIfNeeded("LINK_PANEL_PAGE_DROP_DOWN_Title")),a.createElement("p",{},this.translateIfNeeded("LINK_PANEL_PAGE_DROP_DOWN_Text"))):null,!h.isOpen("dpages")?a.createElement(d.tabs.tab,{name:"PageLink",className:"page",key:"pageLinkTab"},a.createElement.apply(this,[d.dropDown.select,{label:this.props.pageTabPageDropDownTitle?this.props.pageTabPageDropDownTitle:"LINK_PANEL_PAGE_DROP_DOWN_LABEL",valueLink:this.linkToPage()},b.map(this.pagesList,i.bind(this,e,m))]),a.createElement.apply(this,[d.dropDown.select,{label:"LINK_PANEL_PAGE_ANCHOR_DROP_DOWN_LABEL",disabled:!Boolean(this.state.link)||!Boolean(this.state.link.pageId)||!Boolean(this.hasAnchors()),valueLink:this.linkToAnchor()},b.map(this.getDropDownOptions(),j.bind(this,e,m))]),a.createElement(d.tooltip,{value:this.getAnchorTooltipValue(),interactive:true,alignment:d.uiConstants.TOOLTIP.ALIGNMENT.TOP,width:"300px"},a.createElement(d.button,{className:"btn-text",label:"Anchor_Settings_How_Link_Text"}))):null,h.isOpen("dpages")&&this.isPagesDropDownReady()?a.createElement(d.tabs.tab,{name:"PageLink",className:"page",key:"pageLinkTab"},a.createElement.apply(this,[d.dropDown.combobox,{label:this.props.pageTabPageDropDownTitle?this.props.pageTabPageDropDownTitle:"LINK_PANEL_PAGE_DROP_DOWN_LABEL",valueLink:this.linkToPage()},b.map(this.pagesList,k.bind(this,e,m))]),this.shouldShowInnerRoutesDropDown()?a.createElement.apply(this,[d.dropDown.combobox,{label:"LINK_PANEL_PAGE_INNER_ROUTES_DROP_DOWN_LABEL",key:"innerRouteDropDown",valueLink:this.linkToInnerRoute()},b.map(this.state.routerInnerRoutes||[],l.bind(this,e,m))]):null,this.isDynamicPage(this.state.page.id)&&!this.hasInnerRoutes()?a.createElement(d.tooltip,{value:this.getNoItemPageToolTip(),key:"noItemToolTip",interactive:true,alignment:d.uiConstants.TOOLTIP.ALIGNMENT.TOP,width:"300px"},a.createElement(d.button,{className:"btn-text",label:"PAGE_SETTINGS_HOW_TO_ADD_INNER_ROUTE"})):null):null,h.isOpen("dpages")&&this.isPagesDropDownReady()?p.apply(this,[e,m]):null,a.createElement(d.tabs.tab,{name:"ExternalLink",className:"web"},h.isOpen("dpages")?a.createElement.apply(this,[d.dropDown.select,{label:"PLATFORM_LINK_MENU_URL_TEXT1",valueLink:this.linkToWebAddressSource(),key:"webSourceDropDown"},b.map(this.getUrlSources(),q.bind(this,e,m))]):null,a.createElement(d.textInput,{ref:"webAddress",key:"webAddress",label:"LINK_PANEL_WEB_ADDRESS_INPUT_LABEL",placeholder:"LINK_PANEL_WEB_ADDRESS_DEFAUL",valueLink:this.linkTo("url"),validator:this.getValidationFunction(),invalidMessage:"Validation_V2_URL",focus:true,onChangeInValidationStatus:r.bind(this,e,m)}),a.createElement(d.radioButtons,{label:"LINK_PANEL_WEB_ADDRESS_OPTIONS_LABEL",options:[{label:"LINK_PANEL_WEB_ADDRESS_OPTION1",value:"_blank"},{label:"LINK_PANEL_WEB_ADDRESS_OPTION2",value:"_self"}],valueLink:this.linkTo("target")})),a.createElement(d.tabs.tab,{name:"EmailLink",className:"email"},a.createElement(d.textInput,{ref:"emailAddress",key:"emailAddress",label:"LINK_PANEL_EMAIL_INPUT_LABEL",placeholder:"LINK_PANEL_EMAIL_INPUT_DEFAULT",valueLink:this.linkTo("recipient"),validator:function(a){return f.validate.email(a)&&f.validate.notEmpty(a)},invalidMessage:"Validation_V1_Email",focus:true,onChangeInValidationStatus:s.bind(this,e,m)}),a.createElement(d.textInput,{label:"LINK_PANEL_EMAIL_SUBJUCT",placeholder:"LINK_PANEL_EMAIL_SUBJECT_DEFAULT",valueLink:this.linkTo("subject"),validator:f.validate.noHTMLTags,invalidMessage:"Validation_V21_InvalidInput(<>)",onChangeInValidationStatus:t.bind(this,e,m)})),a.createElement(d.tabs.tab,{name:"PhoneLink",className:"phone"},a.createElement(d.textInput,{ref:"phoneNumber",key:"phoneNumber",label:"LINK_PANEL_PHONE_INPUT_LABEL",placeholder:"LINK_PANEL_PHONE_INPUT_DEFAULT",valueLink:this.linkTo("phoneNumber"),validator:f.validate.phone,invalidMessage:"Validation_V1_Phone",focus:true,infoText:"LINK_PANEL_PHONE_DESCRIPTION_TOOLTIP",onChangeInValidationStatus:u.bind(this,e,m)}),a.createElement("p",{className:"extra-info"},this.translateIfNeeded("LINK_PANEL_PHONE_DESCRIPTION"),"\n                    ",a.createElement(d.button,{className:"btn-text inline-link-button",label:"LINK_PANEL_PHONE_DESCRIPTION_LINK",onClick:this.openLearnMoreOnPhoneLink}))),a.createElement(d.tabs.tab,{name:"DocumentLink",className:"document"},a.createElement("label",{},this.translateIfNeeded("LINK_PANEL_DOCUMENT_LABEL")),a.createElement(d.changeMediaInput,{buttonLabelWithItems:"LINK_PANEL_DOCUMENT_BUTTON",buttonLabelWithoutItems:"LINK_PANEL_DOCUMENT_BUTTON",selectionType:"single",value:this.state.link?this.state.link.name:"",onChange:this.documentChanged})),h.isOpen("popups")?a.createElement(d.tabs.tab,{key:"edge-anchors",name:"EdgeAnchorLinks",className:"edge-anchors"},a.createElement(d.thumbnailsWithIcons,{label:"LINK_PANEL_TAB_TOPandBOTTOM_LABEL",options:this.getEdgeAnchors(),valueLink:this.linkToAnchor()})):null,h.isOpen("popups")?w.apply(this,[e,m]):null,!h.isOpen("popups")?a.createElement(d.tabs.tab,{key:"top-anchor",name:"TopAnchorLink",className:"top-anchor-link"},a.createElement(g.symbol,{name:"link-panel-top-clipart"}),a.createElement("h3",{},f.translate("LINK_PANEL_Top_Page_Title")),a.createElement("p",{className:"firstSentence"},f.translate("LINK_PANEL_Top_Page_Text_1")),a.createElement("p",{className:"secondSentence"},f.translate("LINK_PANEL_Top_Page_Text_2"))):null,!h.isOpen("popups")?a.createElement(d.tabs.tab,{key:"bottom-anchor",name:"BottomAnchorLink",className:"bottom-anchor-link"},a.createElement(g.symbol,{name:"link-panel-bottom-clipart"}),a.createElement("h3",{},f.translate("LINK_PANEL_Bottom_Page_Title")),a.createElement("p",{className:"firstSentence"},f.translate("LINK_PANEL_Bottom_Page_Text_1")),a.createElement("p",{className:"secondSentence"},f.translate("LINK_PANEL_Bottom_Page_Text_2"))):null,h.isOpen("wixstaff")?a.createElement(d.tabs.tab,{name:"LoginToWixLink",className:"home-page-link",key:"homePageLoginTab"},a.createElement(d.textInput,{ref:"postLogin",key:"postLogin",label:"LINK_PANEL_POST_LOGIN_INPUT",valueLink:this.linkToAndTrim("postLoginUrl"),validator:f.validate.fullUrl,invalidMessage:"Validation_V2_URL",onChangeInValidationStatus:x.bind(this,e,m)}),a.createElement(d.textInput,{ref:"postSignup",key:"postSignup",label:"LINK_PANEL_POST_SIGNUP_INPUT",valueLink:this.linkToAndTrim("postSignupUrl"),validator:f.validate.fullUrl,invalidMessage:"Validation_V2_URL",onChangeInValidationStatus:y.bind(this,e,m)}),a.createElement.apply(this,[d.dropDown.select,{label:"LINK_PANEL_VIEW_DROPDOWN",valueLink:this.linkTo("dialog")},b.map([{label:"LINK_PANEL_VIEW_SHOW_LOGIN",value:"showLogin"},{label:"LINK_PANEL_VIEW_LOGIN",value:"login"},{label:"LINK_PANEL_VIEW_SIGNUP",value:"createUser"}],z.bind(this,e,m))]),a.createElement(d.toggle,{ref:"sendMail",key:"sendMail",label:"LINK_PANEL_SEND_MAIL_TOGGLE",valueLink:this.linkLoginToWixLinkSendEmailProperty()}),a.createElement(d.textInput,{ref:"welcomeEmail",key:"welcomeEmail",label:"LINK_PANEL_WELCOME_EMAIL_INPUT",valueLink:this.linkTo("mailTemplate")}),a.createElement(d.textInput,{ref:"color",key:"color",label:"LINK_PANEL_USER_COLOR_INPUT",valueLink:this.linkTo("userColor")}),a.createElement(d.textInput,{ref:"name",key:"name",label:"LINK_PANEL_BUTTON_NAME",valueLink:this.linkTo("loginCompName")})):null)),a.createElement("footer",{},a.createElement(d.button,{label:"LINK_PANEL_CANCEL_BUTTON",ref:"cancelButton",onClick:this.close.bind(this,this.props.onCancelCallback),className:"btn-confirm-secondary"}),a.createElement(d.button,{label:"LINK_PANEL_DONE_BUTTON",
ref:"okButton",onClick:this.done,className:"btn-confirm-primary",disabled:this.isOkDisabled()})))}return function(){return A.apply(this,[])}});define("panels/toolPanels/linkPanel/linkPanel",["react","core","baseUI","lodash","util","panels/panelManager/panelManagerFactory","panels/toolPanels/linkPanel/linkPanel.rt","experiment"],function(a,b,c,d,e,f,g,h){"use strict";var i={RELATIVE_URL:"relativeURL",EXTERNAL_URL:"externalUrl"};function j(a,b){if(a.pageId){var c=d.has(a.pageId,"id")?a.pageId.id:a.pageId.replace("#","");if(d.some(b,{id:c})){return{type:"PageLink",pageId:a.pageId}}}return null}function k(a,b){if(a&&!/^\s*\w+:\/\//.test(a)){return b+"://"+a.trim()}return a}function l(a,b){return a.type!=="ExternalLink"||b.webAddress.isValueValid()}function m(a,b){return a.type!=="EmailLink"||b.emailAddress.isValueValid()}function n(a){return a.type!=="PhoneLink"||a.phoneNumber}function o(a){return a.type!=="PageLink"||a.pageId}function p(a){return a.type!=="DynamicPageLink"||!d.isEmpty(a.routerId)&&!d.isEmpty(a.innerRoute)}function q(a){return a.type!=="PageLink"||a.pageId}function r(a){return a.type!=="AnchorLink"||a.pageId&&a.anchorDataId}function s(a,b){if(a.anchorDataId==="SCROLL_TO_TOP"||a.anchorDataId==="SCROLL_TO_BOTTOM"){return true}var c=d.has(a.anchorDataId,"id")?"#"+d.get(a.anchorDataId,"id"):a.anchorDataId;return d.some(b,{anchorDataId:c})}function t(a){return a.type!=="DocumentLink"||a.docId}function u(a,b){if(h.isOpen("dpages")){return l(a,b)&&m(a,b)&&n(a,b)&&o(a)&&r(a)&&t(a)&&q(a)&&p(a)}if(h.isOpen("popups")){return l(a,b)&&m(a,b)&&n(a,b)&&o(a)&&r(a)&&t(a)&&q(a)}if(h.isOpen("phoneLink")){return l(a,b)&&m(a,b)&&n(a,b)&&o(a)&&r(a)&&t(a)}return l(a,b)&&m(a,b)&&o(a)&&r(a)&&t(a)}function v(a,b){var c;if(a){if(d.has(a,"id")){a=a.id}if(a.charAt(0)==="#"){a=a.substr(1)}for(c=0;c<b.length;c++){var e=b[c];if(a===e.id){e.pageId="#"+a;return e}}}return{pageId:""}}function w(a,b){return v(a,b).repeaterPage}function x(a){return a==="SCROLL_TO_TOP"}function y(a){return a==="SCROLL_TO_BOTTOM"}function z(a,b){return Boolean(v(a.pageId,b).pageId)}function A(a){var c="";if(a.type==="AnchorLink"){if(d.includes(["SCROLL_TO_BOTTOM","SCROLL_TO_TOP"],a.anchorDataId)){c=a.anchorDataId==="SCROLL_TO_TOP"?"top":"bottom"}else{c="anchor"}}this.getEditorAPI().bi.event(b.bi.events.linkPanel.link_panel_done_click,{category:this.state.selectedTab,anchor_where_on_page:c})}function B(a,b){var c=d.clone(this.state.link);c[a]=b;this.setState({link:c})}var C={displayName:"linkPanel",propTypes:{data:a.PropTypes.shape({pages:a.PropTypes.arrayOf(a.PropTypes.shape({id:a.PropTypes.string,title:a.PropTypes.string})),popups:a.PropTypes.arrayOf(a.PropTypes.shape({id:a.PropTypes.string,title:a.PropTypes.string})),menuItems:a.PropTypes.arrayOf(a.PropTypes.shape({title:a.PropTypes.string,items:a.PropTypes.array,link:a.PropTypes.shape({pageId:a.PropTypes.string,type:a.PropTypes.string})})),anchors:a.PropTypes.arrayOf(a.PropTypes.shape({id:a.PropTypes.string,name:a.PropTypes.string,pageId:a.PropTypes.string})),currentPageId:a.PropTypes.string}),bi:a.PropTypes.shape({selectedComponentType:a.PropTypes.string}),link:a.PropTypes.object,createDefaultData:a.PropTypes.func.isRequired,currentPage:a.PropTypes.string,callback:a.PropTypes.func,onCancelCallback:a.PropTypes.func,visibleSections:a.PropTypes.object,defaultLinkType:a.PropTypes.string},mixins:[a.addons.LinkedStateMixin,e.translationMixin,b.mixins.editorAPIMixin],render:g,getInitialState:function(){var a=this.props.link||null;this.gotPageIdFromInnerRoute=!(a&&h.isOpen("dpages")&&a.type==="DynamicPageLink");var b=this.getEditorAPI();if(a&&a.type==="AnchorLink"&&!s(a,this.props.data.anchors)){a=j(a,this.props.data.pages)}var c;if(a&&a.type==="DynamicPageLink"&&!s(a,this.props.data.anchors)){a.anchorDataId=null}this.pagesList=this.cachePagesList(this.props.data.menuItems);if(!a){var e=this.getDefaultLink();a=e.link;c=e.page}if(a&&(a.type==="PageLink"||a.type==="AnchorLink")){var f=d.isString(a.pageId)?a.pageId:"#"+d.get(a.pageId,"id");var g="#"+b.siteSegments.getSiteStructureId();var i=f!==g?f:this.props.data.currentPageId;c=v(i,this.props.data.pages)}else if(!c){c=this.props.createDefaultData("PageLink")}if(h.isOpen("dpages")){this.routers=b.routers.get.all();return{selectedTab:this.getDefaultSelectedTab(a),link:a,page:c,routerInnerRoutes:null,webAdressSource:this.getDefaultWebAdressSource(a),isClosing:false,isValid:true}}return{selectedTab:this.getDefaultSelectedTab(a),link:a,page:c,isClosing:false,isValid:true}},componentDidMount:function(){if(this.state.link&&h.isOpen("dpages")&&this.state.link.type==="DynamicPageLink"&&this.state.link.innerRoute){this.getPageFromInnerRoute()}},getPageFromInnerRoute:function(){var a=this.getEditorAPI();a.routers.getPageFromInnerRoute(this.state.link.routerId,this.state.link.innerRoute,function(a){this.gotPageIdFromInnerRoute=true;if(a){var b=v(a,this.props.data.pages);this.setState({page:b},function(){if(this.state.selectedTab==="PageLink"){this.getDefaultDataForPageLinkTab(a)}else{this.getDefaultDataForPageAnchorLinkTabWithDynamicPages(a)}})}else{var c=this.getDefaultLink();this.setState({selectedTab:this.getDefaultSelectedTab(c.link),link:c.link,page:c.page})}}.bind(this))},isPagesDropDownReady:function(){return this.state.link&&this.state.link.type==="DynamicPageLink"?this.state.link&&this.state.link.type==="DynamicPageLink"&&this.gotPageIdFromInnerRoute:true},getDefaultLink:function(){var a=v(this.pagesList[0].id,this.props.data.pages);if(this.props.defaultLinkType){return{link:this.props.createDefaultData(this.props.defaultLinkType),page:a}}if(h.isOpen("dpages")){if(this.shouldHidePageLinkPossibilty()){var b=this.getDefaultDataForAnchorTab();if(b){return b}return{link:this.props.createDefaultData("ExternalLink"),page:a}}return{link:this.getDefaultDataForPageLinkTab(this.pagesList[0].id),page:a}}return{link:this.getDefaultDataForPageAnchorLinkTab(this.pagesList[0].id),page:a}},needToGetInnerRoutes:function(a){return a.link&&this.state.link&&(this.state.link.type!=="DynamicPageLink"&&a.link.type==="DynamicPageLink"&&!a.routerInnerRoutes||this.state.link.type==="DynamicPageLink"&&a.link.type==="DynamicPageLink"&&(!a.routerInnerRoutes||this.state.link.routerId!==a.link.routerId)||this.state.link.type==="DynamicPageLink"&&a.link.type==="DynamicPageLink"&&(!a.routerInnerRoutes||this.state.page.id!==a.page.id))},componentWillUpdate:function(a,b){if(h.isOpen("dpages")&&this.needToGetInnerRoutes(b)){this.getRouterInnerRoutes(b)}},componentWillReceiveProps:function(a){this.pagesList=this.cachePagesList(a.data.menuItems)},setIsValidLink:function(){var a=this.state.link;var b=this.refs;var c=a&&u(a,b);var d=!a||c;if(this.state.isValid!==d){this.setState({isValid:d})}},componentDidUpdate:function(){var a=this.state.link;var b=this.refs;var c=a&&u(a,b);if(this.state.isClosing){if(this.shouldHidePageLinkPossibilty()&&(!a||!u(a,b))){this.close();return}if(!c){a=null}this.save(a);this.close()}else{this.setIsValidLink()}},getDefaultProps:function(){return{title:"Link Panel",panelName:"Link Panel",bi:{selectedComponentType:""}}},getDefaultSelectedTab:function(a){var b;var c=a?a.type:null;if(h.isOpen("dpages")){b=["PageLink",undefined,null];if(d.includes(b,c)||c==="DynamicPageLink"&&!a.anchorDataId){c="PageLink"}if(c==="AnchorLink"||c==="DynamicPageLink"&&a.anchorDataId){c="AnchorLink"}}else{b=["PageLink","AnchorLink",undefined,null];if(d.includes(b,c)){c="PageLink"}}if(h.isOpen("popups")){if(a){if(x(a.anchorDataId)||y(a.anchorDataId)){c="EdgeAnchorLinks"}else if(c==="PageLink"&&z(a,this.props.data.popups)){c="PopupLink"}}}else{if(a&&x(a.anchorDataId)){c="TopAnchorLink"}if(a&&y(a.anchorDataId)){c="BottomAnchorLink"}}return c},linkSelectedTab:function(){return{value:this.state.selectedTab,requestChange:function(a){var b={selectedTab:a};var c;if(this.state.selectedTab!==a){var d;if(h.isOpen("dpages")&&this.state.routerInnerRoutes){b.routerInnerRoutes=null}if(h.isOpen("popups")){if(a==="EdgeAnchorLinks"){d=this.getAnchorLink("SCROLL_TO_TOP");if(d.page){b.page=d.page}b.link=d.link}else if(a==="PopupLink"){var e=this.props.data.popups;b.link=this.props.createDefaultData("PageLink");if(e.length>0){b.link.pageId="#"+e[0].id}}else{b.link=this.props.createDefaultData(a);if(a==="PageLink"){b.link=h.isOpen("dpages")?this.getDefaultDataForPageLinkTab(this.pagesList[0].id):this.getDefaultDataForPageAnchorLinkTab(this.pagesList[0].id);b.page=v(this.pagesList[0].id,this.props.data.pages)}if(h.isOpen("dpages")&&a==="AnchorLink"){c=this.getDefaultDataForAnchorTab();if(c){b.link=c.link;b.page=c.page}}}}else{if(a==="TopAnchorLink"||a==="BottomAnchorLink"){if(a==="TopAnchorLink"){d=this.getAnchorLink("SCROLL_TO_TOP")}else{d=this.getAnchorLink("SCROLL_TO_BOTTOM")}if(d.page){b.page=d.page}b.link=d.link}else{b.link=this.props.createDefaultData(a);if(a==="PageLink"){b.link=h.isOpen("dpages")?this.getDefaultDataForPageLinkTab(this.pagesList[0].id):this.getDefaultDataForPageAnchorLinkTab(this.pagesList[0].id);b.page=v(this.pagesList[0].id,this.props.data.pages)}if(h.isOpen("dpages")&&a==="AnchorLink"){c=this.getDefaultDataForAnchorTab();if(c){b.link=c.link;b.page=c.page}}}}this.setState(b)}}.bind(this)}},getDefaultDataForPageLinkTab:function(a){var b=this.getRouterDataForPageIfExist(a);if(b){return{routerId:b.routerId,type:"DynamicPageLink"}}return{type:"PageLink",pageId:a}},getDefaultDataForAnchorTab:function(){var a=this.getPagesWithAnchors();if(!a||d.isEmpty(a)){return null}return{link:this.getDefaultDataForPageAnchorLinkTabWithDynamicPages(a[0].id),page:v(a[0].id,this.props.data.pages)}},getDefaultDataForPageAnchorLinkTab:function(a){var b;var c=this.getAnchorOptions(this.props.data.anchors,a.substring(1));if(!this.shouldHidePageLinkPossibilty()){b={type:"PageLink",pageId:a}}else if(c.length>0){b={type:"AnchorLink",anchorDataId:c[0].anchorDataId,pageId:a,anchorName:c[0].anchorName}}return b},getDefaultDataForPageAnchorLinkTabWithDynamicPages:function(a){var b=this.getAnchorOptions(this.props.data.anchors,a.substring(1));var c=this.getRouterDataForPageIfExist(a);if(b.length>0){if(c){return{type:"DynamicPageLink",routerId:c.routerId,anchorDataId:b[0].anchorDataId}}return{type:"AnchorLink",pageId:a,anchorDataId:b[0].anchorDataId,anchorName:b[0].anchorName}}},linkToAndTrim:function(a){var b=this.state.link;return{value:b?b[a]:"",requestChange:d.flow(d.trim,B.bind(this,a))}},linkTo:function(a){var b=this.state.link;return{value:b?b[a]:"",requestChange:B.bind(this,a)}},linkLoginToWixLinkSendEmailProperty:function(){var a=this.state.link;return{value:a?a.sendMail:"",requestChange:function(b){a.sendMail=b;a.metaData={schemaVersion:"2.0",isPreset:true,isHidden:false};this.setState({link:a})}.bind(this)}},save:function(a){if(a&&a.type==="ExternalLink"&&(!this.state.webAdressSource||this.state.webAdressSource===i.EXTERNAL_URL)){a.url=k(a.url,"http")}if(this.props.callback){this.props.callback(a)}if(h.isOpen("popups")&&a){A.call(this,a)}},close:function(a){if(a){a(this.state.link)}this.refs.frame.close()},done:function(){this.logLinkCreationBI();this.setState({isClosing:true})},linkToWebAddressSource:function(){return{value:this.state.webAdressSource,requestChange:function(a){this.setState({webAdressSource:a})}.bind(this)}},getDefaultWebAdressSource:function(a){if(a&&a.type==="ExternalLink"&&a.url){return a.url.charAt(0)==="/"?i.RELATIVE_URL:i.EXTERNAL_URL}return i.EXTERNAL_URL},getValidationFunction:function(){if(h.isOpen("dpages")&&this.state.webAdressSource===i.RELATIVE_URL){return e.validate.relativeUrl}return e.validate.url},linkToPage:function(){return{value:this.state.page.pageId,requestChange:function(a){if(h.isOpen("dpages")){this.setState({routerInnerRoutes:null,link:this.state.selectedTab==="PageLink"?this.getDefaultDataForPageLinkTab(a):this.getDefaultDataForPageAnchorLinkTabWithDynamicPages(a),page:v(a,this.props.data.pages)})}else{this.setState({link:this.getDefaultDataForPageAnchorLinkTab(a),page:v(a,this.props.data.pages)})}}.bind(this)}},getRouterInnerRoutes:function(a){this.getEditorAPI().routers.getRouterInnerRoutes(a.link.routerId,a.page.id,function(b){var c=!d.isEmpty(b)?b[0].url:[];if(a.link.innerRoute&&d.find(b,{url:a.link.innerRoute})){c=a.link.innerRoute}if(d.isEmpty(b)){this.setState({routerInnerRoutes:!d.isEmpty(b)?b:[]},function(){this.setIsValidLink()}.bind(this))}else{this.setState({routerInnerRoutes:!d.isEmpty(b)?b:[],link:{type:"DynamicPageLink",routerId:a.link.routerId,anchorDataId:a.link.anchorDataId,innerRoute:c}},function(){this.setIsValidLink()}.bind(this))}}.bind(this))},linkToInnerRoute:function(){return{value:this.state.link.innerRoute,requestChange:function(a){var b={type:"DynamicPageLink",routerId:this.state.link.routerId,innerRoute:a};if(this.state.link.anchorDataId){b.anchorDataId=this.state.link.anchorDataId}this.setState({link:b})}.bind(this)}},hasInnerRoutes:function(){return!!this.state.routerInnerRoutes&&!d.isEmpty(this.state.routerInnerRoutes)},getRouterDataForPageIfExist:function(a){var b=this.getEditorAPI();return b.routers.getRouterDataForPageIfExist(a)},isDynamicPage:function(a){return!!this.getRouterDataForPageIfExist(a)},shouldShowInnerRoutesDropDown:function(){return this.isDynamicPage(this.state.page.id)&&this.hasInnerRoutes()},getUrlSources:function(){return[{value:i.EXTERNAL_URL,title:"LINK_PANEL_WEB_ADRESS_EXTERNAL_URL_LABEL"},{value:i.RELATIVE_URL,title:"PLATFORM_LINK_MENU_URL_DROPDOWN_DEFAULT"}]},getInnerRoutesDropDown:function(){return this.state.routerInnerRoutes&&!d.isEmpty(this.state.routerInnerRoutes)?this.state.routerInnerRoutes:[{value:"NO_INNER_ROUTES",title:e.translate("LINK_PANEL_NO_INNER_ROUTES")}]},getCurrentPageThisTranslate:function(a){if(a==="#"+this.props.data.currentPageId){return" "+e.translate("LINK_PANEL_PAGE_THIS")}return""},linkToAnchor:function(){var a=d.has(this.state.link,"anchorDataId.id")?"#"+this.state.link.anchorDataId.id:d.get(this.state.link,"anchorDataId");return{value:a||"SCROLL_TO_TOP",requestChange:function(a){var b=this.getAnchorLink(a);var c={link:b.link};if(b.page){c.page=b.page}this.setState(c)}.bind(this)}},getAnchorLink:function(a){var b=this.getEditorAPI();var c={};if(a==="TOP_OF_SELECTED_PAGE"){var d=this.state.page.pageId;c={link:h.isOpen("dpages")?this.getDefaultDataForPageAnchorLinkTabWithDynamicPages(d):this.getDefaultDataForPageAnchorLinkTab(d),page:v(d,this.props.data.pages)}}else{var f=this.props.data.anchors;var g;var i=v(this.state.page.pageId,this.props.data.pages);if(h.isOpen("dpages")&&i.routerId){c={link:{type:"DynamicPageLink",anchorDataId:a,routerId:this.state.link.routerId,innerRoute:this.state.link.innerRoute}}}else{var j={type:"AnchorLink",anchorDataId:a,pageId:this.state.page.pageId};var k="#"+b.siteSegments.getSiteStructureId();if(x(a)){j.anchorName=e.translate("LINK_PANEL_PAGE_ANCHOR_SCROLL_TO_TOP_NAME");j.pageId=k}else if(y(a)){j.anchorName=e.translate("LINK_PANEL_PAGE_ANCHOR_SCROLL_TO_BOTTOM_NAME");j.pageId=k}else{for(g=0;g<f.length;g++){var l=f[g];if(l.anchorDataId===a){j.anchorName=l.anchorName;break}}}c.link=j}}return c},cachePagesList:function(a,b){b=b||0;var c=0;var e=[];a.forEach(function(a){var f=a.link||{};var g=a.items;var h=f.type==="PageLink";var i=d.has(f.pageId,"id")?f.pageId.id:f.pageId;if(h&&!w(i,this.props.data.pages)){var j={id:i,type:f.type,title:a.label,level:b};c=b+1;e.push(j)}else{c=b}if(g&&g.length){e=e.concat(this.cachePagesList(g,c))}},this);return e},getAnchorOptions:function(a,b){var c=[];a.forEach(function(a){var d=a.pageId.charAt(0)==="#"?a.pageId.substring(1):a.pageId;if(d===b){c.push(a)}});c.sort(function(a,b){return a.y-b.y});return c},documentChanged:function(a){var b=a[0];this.setState({link:{type:"DocumentLink",docId:b.fileName,name:b.title}})},isSectionVisible:function(a){var b=this.props.visibleSections;return!b||b[a]!==false},shouldHidePageLinkPossibilty:function(){return this.props.hidePageLinks},hasAnchors:function(a){var b=a||this.state.page.id;if(!b){return false}b=b.charAt(0)==="#"?b.substring(1):b;return this.getAnchorOptions(this.props.data.anchors,b).length!==0},getPagesWithAnchors:function(){return d.filter(this.pagesList,function(a){return this.hasAnchors(a.id)},this)},openLearnMoreOnAnchor:function(){var a={panel_name:this.props.panelName,origin:b.constants.BI.HELP.ORIGIN.PANEL,learn_more:true};var c="0a1de6d7-3f69-4d30-8ddc-7aa99bd12edc";f.getManager().openHelpCenter(c,null,null,a)},openLearnMoreOnAddingInnerRoutes:function(){var a={panel_name:this.props.panelName,origin:b.constants.BI.HELP.ORIGIN.PANEL,learn_more:true};var c="0a1de6d7-3f69-4d30-8ddc-7aa99bd12edc";f.getManager().openHelpCenter(c,null,null,a)},openLearnMoreOnPhoneLink:function(){var a={panel_name:this.props.panelName,origin:b.constants.BI.HELP.ORIGIN.PANEL,learn_more:true};var c="269ee4ca-ac26-40a4-b982-b120e84c75d4";f.getManager().openHelpCenter(c,null,null,a)},getDropDownOptions:function(){var a=[];if(!this.shouldHidePageLinkPossibilty()&&!h.isOpen("dpages")){a.push({value:"TOP_OF_SELECTED_PAGE",label:e.translate("LINK_PANEL_ANCHOR_TOP")})}var b=this.getAnchorOptions(this.props.data.anchors,this.state.page.id);if(b.length>0){d.forEach(b,function(b){a.push({value:b.anchorDataId,label:b.anchorName})})}if(this.shouldHidePageLinkPossibilty()&&!this.hasAnchors()&&!h.isOpen("dpages")){a.push({value:"none",label:e.translate("LINK_PANEL_NO_ANCHORS_LABEL")})}return a},getNoItemPageToolTip:function(){return{classPath:"baseUI.popoverTemplates.imageAndTextTooltip",props:{image:"linkPanelAnchorTooltip",title:"link_panel_dont_have_inner_routes_title",text:"link_panel_dont_have_inner_routes_text",learnMoreText:"link_panel_dont_have_inner_routes_learn_more",linkAction:this.openLearnMoreOnAddingInnerRoutes,imageContainerStyle:{backgroundColor:"#5fcef5"}}}},getAnchorTooltipValue:function(){return{classPath:"baseUI.popoverTemplates.imageAndTextTooltip",props:{image:"linkPanelAnchorTooltip",title:"Anchor_Settings_tooltip_title",text:"Anchor_Settings_tooltip_text",learnMoreText:"mobile_refreshlayout_link",linkAction:this.openLearnMoreOnAnchor,imageContainerStyle:{backgroundColor:"#5fcef5"}}}},isOkDisabled:function(){return!this.state.isValid},getAnchorType:function(a){switch(a){case"SCROLL_TO_TOP":return"page-top";case"SCROLL_TO_BOTTOM":return"page-bottom";default:return"anchor"}},logLinkCreationBI:function(){var a=this.state.link;if(!a){return}var c={site_id:this.getEditorAPI().generalInfo.getSiteId(),component_type:d.get(this.props,"bi.selectedComponentType","")};switch(a&&a.type){case"PageLink":d.assign(c,{field_type:"page",data:""});break;case"AnchorLink":d.assign(c,{field_type:this.getAnchorType(a.anchorDataId),data:""});break;case"ExternalLink":d.assign(c,{field_type:"url",data:a.url});break;case"EmailLink":d.assign(c,{field_type:"mail",data:a.recipient});break;case"PhoneLink":d.assign(c,{field_type:"phone",data:a.phoneNumber});break;case"DocumentLink":d.assign(c,{field_type:"document",data:""});break;default:return}this.getEditorAPI().bi.event(b.bi.events.linkPanel.LINK_PANEL_ADD_CLICK_TO_ACTION,c)}};if(h.isOpen("popups")){C.getEdgeAnchors=function(){return[{title:"LINK_PANEL_TAB_TOPandBOTTOM_ TOP",value:"SCROLL_TO_TOP",symbolName:"anchorTop"},{title:"LINK_PANEL_TAB_TOPandBOTTOM_ BOTTOM",value:"SCROLL_TO_BOTTOM",symbolName:"anchorBottom"}]};C.goToAddPanelPopup=function(){var a=this.getEditorAPI();a.getUserPreferences().session.set("addPanelCategoryIdOnClose","popup");a.leftBar.openAddPanel()}}return a.createClass(C)});define("panels/toolPanels/colorPicker/constants",[],function(){"use strict";return{NO_COLOR:"noColor"}});define("panels/toolPanels/colorPicker/siteCustomColors.rt",["react","lodash","baseUI","panels/toolPanels/colorPicker/constants"],function(a,b,c,d){"use strict";function e(a,c){var d=b.assign({},a,c);if(a.hasOwnProperty("style")){d.style=b.defaults(d.style,a.style)}if(a.hasOwnProperty("className")&&c.hasOwnProperty("className")){d.className=c.className+" "+a.className}return d}function f(a,b,c){this.props.onPreview(b)}function g(a,b,c){this.props.onPreview(a)}function h(a,b,c){this.selectColor(b,c)}function i(c,d,e){return a.createElement("label",{className:"color-option",key:"colorOption-"+e,onMouseEnter:f.bind(this,c,d,e),onMouseLeave:g.bind(this,c,d,e)},a.createElement("input",{type:"radio",name:this.getRadioGroupId(),value:d,checked:e===this.state.selectedIndex,onChange:h.bind(this,c,d,e)}),a.createElement("div",{className:b(this.getColorOptionClasses(d)).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" "),style:{backgroundColor:d}}))}function j(b,c,d){return a.createElement("div",{key:"emptyColorOptions",className:"empty-color-option"})}function k(){var d=this.getValueFromProps();return a.createElement.apply(this,["div",e({className:"site-custom-colors"},this.filteredProps()),this.props.isEditable?a.createElement("label",{key:"addColorButton",ref:"addColorButton",className:"color-option first-color-in-row"},a.createElement("div",{className:"add-color-button",onClick:this.addCustomColor},a.createElement(c.symbol,{name:"add-custom-color-plus"}))):null,b.map(this.getFilteredColors(),i.bind(this,d)),b.isEmpty(this.getFilteredColors())?b.map(b.range(this.NUM_OF_EMPTY_SLOTS),j.bind(this,d)):null])}return function(){return k.apply(this,[])}});define("panels/toolPanels/colorPicker/siteCustomColors",["react","lodash","core","util","baseUI","panels/toolPanels/colorPicker/siteCustomColors.rt"],function(a,b,c,d,e,f){"use strict";var g=["#000000","#FFFFFF"];function h(a){return a.get(c.constants.USER_PREFS.THEME.COLORS.CUSTOM.USER_ADDED)||[]}return a.createClass({displayName:"siteCustomColors",mixins:[c.mixins.editorAPIMixin,e.radioButtonsMixin],propTypes:{customColors:a.PropTypes.arrayOf(a.PropTypes.string).isRequired,sessionStorage:a.PropTypes.object,isEditable:a.PropTypes.bool,onPreview:a.PropTypes.func,openAddColorPanel:a.PropTypes.func},NUM_OF_EMPTY_SLOTS:36,getInitialState:function(){return{selectedIndex:this.getSelectedColorIndex(this.getValueFromProps(),h(this.props.sessionStorage))}},getFilteredColors:function(a){a=a||h(this.props.sessionStorage);var c=b.difference(this.props.customColors,g,a);return g.concat(a,c)},selectColor:function(a,b){this.getEditorAPI().bi.event(c.bi.events.colorPicker.CUSTOM_COLOR_SELECT,{});this.setState({selectedIndex:b},this.callOnChangeIfExists(a))},getSelectedColorIndex:function(a,b){return this.getFilteredColors(b||h(this.props.sessionStorage)).indexOf(a)},getColorBrightnessClass:function(a){var b=d.colors.hexToRgb(a);var c=d.colors.rgbToHsb(b);if(c.brightness>=80&&c.saturation<50){return"bright"}return"dark"},getColorOptionClasses:function(a){var b={"color-displayer":true,"white-option":d.colors.getDistanceToWhite(a)<3};b[this.getColorBrightnessClass(a)+"-color"]=true;return b},componentWillReceiveProps:function(a){var b=this.getValueFromProps();var c=this.getValueFromProps(a);if(b!==c){this.setState({selectedIndex:this.getSelectedColorIndex(c)})}},addCustomColor:function(){this.getEditorAPI().bi.event(c.bi.events.colorPicker.ADD_COLOR_BUTTON_CLICKED,{});this.props.openAddColorPanel()},render:f})});define("panels/toolPanels/colorPicker/colorPickerPanel.rt",["react","lodash","util","baseUI","baseUILib","panels/frames/toolPanelFrame","panels/toolPanels/colorPicker/siteCustomColors","symbols"],function(a,b,c,d,e,f,g,h){"use strict";function i(a){this.startDrag(a,this.getDragLimits(this.refs.frame.getContentWrapperElement()),this.refs.frame.getContentWrapperElement())}function j(a,b){this.openChooseRootColorPanel(a,b)}function k(c,d){return a.createElement("div",{className:b(this.getRootColorBoxClasses(c)).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" "),key:"rootColor-"+d},a.createElement("div",{className:"root-color-arrow",style:{borderBottomColor:c}}),a.createElement("div",{className:"root-color-circle",style:{backgroundColor:c},onClick:j.bind(this,c,d)},a.createElement(h.symbol,{name:"recycle"+this.getColorBrightness(c)})))}function l(){this.openHelpCenter(this.EDIT_PALETTE_LEARN_MORE_HELP_ID)}return function(){return a.createElement(f,{ref:"frame",panelName:this.props.panelName,isSingleInstance:true,className:"color-picker-panel",isBlockingLayerFullScreen:this.props.isBlockingLayerFullScreen,shouldBlockOuterScroll:this.props.shouldBlockOuterScroll,top:this.props.top,left:this.props.left,contentClass:"color-picker-panel-content-wrapper"},a.createElement("div",{className:"main-content"},a.createElement("div",{className:"panel-section color-picker-header",onMouseDown:i.bind(this)},a.createElement("div",{className:"color-picker-header-content"},this.state.content===this.Content.CHOOSE_COLOR?a.createElement("span",{key:"color-picker-title"},"\n                ",c.translate("ColorPicker_MainPanel_Header"),"\n            "):null,this.state.content===this.Content.CHANGE_PALETTE?a.createElement(d.button,{key:"color-picker-title-back",className:"btn-back",label:"design_panel_back_button_label",icon:"arrowLeftSmall",onClick:this.handleBackEditingPaletteClicked}):null),a.createElement("span",{className:"close-panel-button",onClick:this.close},a.createElement(h.symbol,{name:"headerCloseButton"}))),this.state.content===this.Content.CHOOSE_COLOR?a.createElement("div",{key:"color-picker-content-color",className:"choose-color-content"},a.createElement("div",{className:"panel-section site-colors-section"},a.createElement("div",{className:"section-left"},c.translate("ColorPicker_MainPanel_SitePalette")),a.createElement("div",{className:"section-gap"}),this.props.palettePresets?a.createElement("div",{key:"color-picker-edit-palette-button",className:"section-right"},a.createElement("a",{onClick:this.switchContent.bind(this,this.Content.CHANGE_PALETTE)},"\n                        ",c.translate("ColorPicker_MainPanel_ChangeSiteColors"),"\n                    ")):null),a.createElement(d.paletteDisplayer,{palette:this.getPaletteColors(),isSelectable:true,onPreview:this.previewColor,valueLink:{value:this.getColorInHex(this.state.selectedColor),requestChange:this.selectColor}}),a.createElement("div",{className:"panel-section custom-colors-title-section"},"\n                ",c.translate("ColorPicker_MainPanel_MoreColors"),"\n            "),a.createElement(e.customScroll,{},a.createElement(g,{className:"custom-colors-section",customColors:this.siteCustomColors,isEditable:true,onPreview:this.previewColor,paletteColors:this.state.paletteColors,sessionStorage:this.props.sessionStorage,openAddColorPanel:this.openAddColorPanel,valueLink:{value:this.getColorInHex(this.state.selectedColor),requestChange:this.selectColor}})),a.createElement("div",{className:"panel-section footer"},a.createElement("div",{className:"section-left"},a.createElement("span",{},"+"),a.createElement("a",{onClick:this.addColorLinkClicked},"\n                        ",c.translate("ColorPicker_MainPanel_AddColor"),"\n                    ")),a.createElement("div",{className:"section-right"},"\n                    ",this.isThemeColor(this.state.colorToPreview)?this.getPaletteColors()[this.state.colorToPreview]:this.state.colorToPreview,"\n                "))):null,this.state.content===this.Content.CHANGE_PALETTE?a.createElement("div",{key:"color-picker-content-palettes",className:"content-change-palette"},a.createElement("div",{className:"panel-section change-palette-section"},c.translate("ColorPicker_ChangeEditPalette_Title"),"\n            "),a.createElement(d.paletteDisplayer,{palette:this.getPaletteColors(),isSelectable:true,valueLink:{value:null,requestChange:this.openChangePaletteColor}}),a.createElement.apply(this,["div",{className:"root-colors-wrapper"},b.map(this.getRootColors(),k.bind(this))]),a.createElement("div",{className:"help-text"},a.createElement("span",{},c.translate("ColorPicker_ChangeEditPalette_HelpText")),a.createElement("a",{onClick:l.bind(this)},c.translate("ColorPicker_ChangeEditPalette_LearnMore"))),a.createElement("div",{className:"footer"},a.createElement(d.button,{className:"cancel-button btn-md btn-confirm-secondary",label:"ColorPicker_ChangeEditPalette_CancelButton",onClick:this.handleCancelEditingPaletteClicked}),a.createElement(d.button,{className:"confirm-button btn-md",label:"ColorPicker_ChangeEditPalette_DoneButton",onClick:this.handleDoneEditingPaletteClicked}))):null),this.state.content===this.Content.CHANGE_PALETTE?a.createElement("div",{className:"secondary-content palette-list-section",key:"colorPickerPaletteListSection"},a.createElement("div",{className:"palette-list-title"},c.translate("ColorPicker_ChangeEditPalette_PalettesStrip")),a.createElement("div",{className:"palette-list-comp-wrapper"},a.createElement(e.customScroll,{heightRelativeToParent:"100%"},a.createElement(d.palettesList,{palettes:this.getPaletteList(),valueLink:{value:this.state.selectedPalette,requestChange:this.setSelectedPalette},onPreview:this.handlePaletteListPreview,className:"change-palette-palette-list"})))):null)}});define("panels/toolPanels/colorPicker/colorPickerPanel",["reactDOM","react","lodash","jquery","core","util","panels/toolPanels/colorPicker/constants","panels/mixins/limitInitialPositionToStageMixin","panels/mixins/reportBiEventOnUiChangeMixin","panels/panelManager/panelManagerFactory","panels/mixins/panelDragLimitsMixin","panels/toolPanels/colorPicker/colorPickerPanel.rt","experiment"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";var n={color_13:["color_11","color_12","color_13","color_14","color_15"],color_18:["color_16","color_17","color_18","color_19","color_20"],color_23:["color_21","color_22","color_23","color_24","color_25"],color_28:["color_26","color_27","color_28","color_29","color_30"],color_33:["color_31","color_32","color_33","color_34","color_35"]};function o(a){if(!a){return null}if(a.indexOf("{color")===0){a=a.replace("{","").replace("}","")}if(a==="transparent"){return g.NO_COLOR}if(a.indexOf("#")!==0&&a.indexOf("color")!==0&&a!==g.NO_COLOR){return a.indexOf("r")===0?a:"rgba("+a+")"}return a}function p(a){return{top:a.top-d(window.document).scrollTop()+15+"px",left:a.left-d(window.document).scrollLeft()+204+"px"}}function q(a){return{top:a.top-d(window.document).scrollTop()+115+"px",left:a.left+d(window.document).scrollLeft()+48+"px"}}return b.createClass({displayName:"colorPickerPanel",mixins:[e.mixins.editorAPIMixin,f.valueLinkMixin,f.draggableMixin,h,k,i],propTypes:{siteCustomColors:b.PropTypes.array.isRequired,displayNoColor:b.PropTypes.bool,sessionStorage:b.PropTypes.object,previewOnHover:b.PropTypes.bool,history:b.PropTypes.object,palettePresets:b.PropTypes.array,updateSitePalette:b.PropTypes.func,top:b.PropTypes.oneOfType([b.PropTypes.string,b.PropTypes.number]),left:b.PropTypes.oneOfType([b.PropTypes.string,b.PropTypes.number]),isBlockingLayerFullScreen:b.PropTypes.bool,shouldBlockOuterScroll:b.PropTypes.bool},Content:{CHOOSE_COLOR:"CHOOSE_COLOR",CHANGE_PALETTE:"CHANGE_PALETTE"},getDefaultProps:function(){return{previewOnHover:true}},componentWillReceiveProps:function(){this.setState({paletteColors:this.getEditorAPI().theme.colors.getAll()})},getPaletteColors:function(){var a=this.state.paletteColors;return c.omit(a,"paletteName","paletteTags")},getColorFromProps:function(){return o(this.getValueFromProps())},getInitialState:function(){var a=this.getColorInHex(this.getColorFromProps());var b={selectedColor:a,colorToPreview:a,selectedPalette:this.getEditorAPI().theme.colors.getAll(),content:this.Content.CHOOSE_COLOR};this.initialPalette=b.selectedPalette;this.siteCustomColors=this.getCustomColorsInOrderAndSaveOrder();return b},getCustomColorsInOrderAndSaveOrder:function(){var a=this.props.sessionStorage;var b=a.get(e.constants.USER_PREFS.THEME.COLORS.CUSTOM.COMPS_ADDED);var d=this.props.siteCustomColors;var f;if(b){var g=c.intersection(b,d);var h=c.difference(d,b);f=g.concat(h)}else{f=d}a.set(e.constants.USER_PREFS.THEME.COLORS.CUSTOM.COMPS_ADDED,f);return f},getColorBrightness:function(a){var b=f.colors.hexToRgb(a);var c=f.colors.rgbToHsb(b);if(c.brightness>=80&&c.saturation<50){return"Dark"}return"Bright"},isThemeColor:function(a){return c.includes(a,"color_")},getColorInHex:function(a){var b=f.colors.rgbToHex;
a=o(a);if(c.includes(a,"rgba")){return b(f.colors.rgbaStringToObject(a))}else if(c.includes(a,"rgb")){return b(f.colors.rgbStringToObject(a))}return a},getColorInOriginalFormat:function(a){var b=this.getColorFromProps();b=o(b);var d=f.colors.hexToRgb;if(a===g.NO_COLOR){return a}var e=this.isThemeColor(a)?this.getPaletteColors()[a]:a;if(c.includes(b,"rgba")){var h=d(e);h.alpha=f.colors.rgbaStringToObject(b).alpha;return f.colors.rgbaObjectToString(h)}else if(c.includes(b,"rgb")){return f.colors.rgbObjectToString(d(e))}return a},areColorsEqual:function(a,b){if(c.includes(a,"color")&&c.includes(b,"color")){return a===b}return this.getColorInHex(a)===this.getColorInHex(b)},EDIT_PALETTE_LEARN_MORE_HELP_ID:"7b56b01e-1104-485d-8bcc-9690f8c9592a",getRootColors:function(){return c.pick(this.getPaletteColors(),c.keys(n))},getRootColorBoxClasses:function(a){return{"root-color-box":true,"white-color":f.colors.getDistanceToWhite(a)<3}},getPaletteList:function(){return c.map(this.props.palettePresets,function(a){return c.omit(a,"paletteName","paletteTags")})},openChangePaletteColor:function(a){var b=this;var d=this.refs.frame.getPanelFramePosition();var e=p(d);var f=this.getPaletteColors()[a];var g={valueLink:{value:f,requestChange:function(d){var e=c.clone(b.state.selectedPalette);e[a]=d;b.setSelectedPalette(e)}},siteCustomColors:this.siteCustomColors,paletteColors:this.state.paletteColors,sessionStorage:this.props.sessionStorage,top:e.top,left:e.left,onPreview:function(d){var e=c.clone(b.state.selectedPalette);e[a]=d;b.setPaletteToDocument(e)},onCancel:this.setPaletteToDocument.bind(this,c.clone(this.state.selectedPalette))};j.getManager().openPanel("panels.toolPanels.colorPicker.addColorPanel",g,true)},selectColor:function(a,b){if(a!==this.state.selectedColor){var c=this;this.setState({selectedColor:a},function(){c.handleChange(a);c.addColorHistoryEntryIfNeeded()})}else if(b){this.close()}},previewColor:function(a){if(m.isOpen("colorPickerChangeColorOnClickExp")){return}if(this.isMounted()){this.setState({colorToPreview:a})}if(this.props.previewOnHover){this.handleChange(a,true)}},handleChange:function(a,b){this.callOnChangeIfExists(this.getColorInOriginalFormat(a),b)},setSelectedPalette:function(a){if(this.isMounted()){this.setState({selectedPalette:a},this.setPaletteToDocument.bind(this,a))}else{this.setPaletteToDocument(a)}},setPaletteToDocument:function(a){this.props.updateSitePalette(a)},computeNewPaletteFromRootColor:function(a,b){var d=this.getPaletteColors();var e=f.colors.createGradientColorsFromRoot(b,d,n[a]);return c.assign(d,e)},setSelectedPaletteFromRootColor:function(a,b){var c=this;var d=this.computeNewPaletteFromRootColor(a,b);if(this.isMounted()){this.setState({selectedPalette:d},c.setPaletteToDocument.bind(this,d))}else{c.setPaletteToDocument(d)}},setPaletteToDocumentFromRootColor:function(a,b){var c=this.computeNewPaletteFromRootColor(a,b);this.setPaletteToDocument(c)},addCustomColor:function(a){var b=c.cloneDeep(this.props.sessionStorage.get(e.constants.USER_PREFS.THEME.COLORS.CUSTOM.USER_ADDED));b.unshift(a);this.props.sessionStorage.set(e.constants.USER_PREFS.THEME.COLORS.CUSTOM.USER_ADDED,b);this.selectColor(a)},openAddColorPanel:function(){var a=this.refs.frame.getPanelFramePosition();var b=q(a);j.getManager().openPanel("panels.toolPanels.colorPicker.addColorPanel",{valueLink:{value:this.state.selectedColor,requestChange:this.addCustomColor},paletteColors:this.state.paletteColors,onPreview:c.debounce(this.previewColor,100),top:b.top,left:b.left,onCancel:this.previewColor.bind(this,this.state.selectedColor)},true)},addColorLinkClicked:function(){this.getEditorAPI().bi.event(e.bi.events.colorPicker.ADD_COLOR_LINK_CLICKED,{});this.openAddColorPanel()},openChooseRootColorPanel:function(a,b){var d=this.refs.frame.getPanelFramePosition();var e=p(d);j.getManager().openPanel("panels.toolPanels.colorPicker.addColorPanel",{valueLink:{value:a,requestChange:this.setSelectedPaletteFromRootColor.bind(this,b)},siteCustomColors:this.siteCustomColors,paletteColors:this.state.paletteColors,sessionStorage:this.props.sessionStorage,top:e.top,left:e.left,onPreview:c.debounce(this.setPaletteToDocumentFromRootColor.bind(this,b),100),onCancel:this.setPaletteToDocument.bind(this,c.clone(this.state.selectedPalette))},true)},handlePaletteListPreview:function(a){if(!m.isOpen("colorPickerChangePaletteOnClickExp")){this.setPaletteToDocument(a)}},handleDoneEditingPaletteClicked:function(){this.addPaletteHistoryEntryIfNeeded();this.initialPalette=this.state.selectedPalette;this.setPaletteToDocument(this.state.selectedPalette);this.close()},handleCancelEditingPaletteClicked:function(){this.setSelectedPalette(this.initialPalette);this.close()},handleBackEditingPaletteClicked:function(){this.setSelectedPalette(this.initialPalette);this.switchContent(this.Content.CHOOSE_COLOR)},arePalettesEqual:function(a,b){var d=c.intersection(c.keys(a),c.keys(b));return c.isEqual(c.pick(a,d),c.pick(b,d))},addPaletteHistoryEntryIfNeeded:function(){if(this.props.history){if(!this.arePalettesEqual(this.state.selectedPalette,this.initialPalette)){this.props.history.add("palette colors updated")}}},addColorHistoryEntryIfNeeded:function(){if(this.props.history){if(!this.areColorsEqual(this.state.selectedColor,this.getColorFromProps())){this.props.history.add("new color chosen - "+this.state.selectedColor)}}},switchContent:function(a){if(a===this.Content.CHANGE_PALETTE){this.getEditorAPI().bi.event(e.bi.events.colorPicker.CHANGE_SITE_COLORS_LINK_CLICKED,{})}this.setState({content:a})},resetPaletteIfPanelClosedWithoutPaletteConfirmation:function(){if(this.state.content===this.Content.CHANGE_PALETTE){this.setPaletteToDocument(this.initialPalette)}},resetPreviewColor:function(){if(this.state.colorToPreview!==this.state.selectedColor){this.previewColor(this.state.selectedColor)}},adjustPanelPosition:function(){var b=10;var c=204;var f=210;var g=c+f+b;var h=d(a.findDOMNode(this.refs.frame.getContentWrapperElement()));var i=h.offset();var j=e.utils.stageUtils.getStageLayout();var k=i.left;var l=j.right-g;var m=i.top;var n=d(window.document).scrollTop()+(j.bottom-h.height());h.offset({top:Math.min(m,n),left:Math.min(k,l)})},componentDidUpdate:function(a,b){if(this.state.content===this.Content.CHANGE_PALETTE&&this.props.top!==a.top||this.props.left!==a.left){var c=p(this.refs.frame.getPanelFramePosition());j.getManager().updatePanelProps("panels.toolPanels.colorPicker.addColorPanel",{top:c.top,left:c.left})}if(this.state.content===this.Content.CHANGE_PALETTE&&b.content!==this.state.content){this.adjustPanelPosition()}},componentWillUnmount:function(){if(this.props.onClose){this.props.onClose()}this.resetPaletteIfPanelClosedWithoutPaletteConfirmation();this.resetPreviewColor()},close:function(){if(this.state.content===this.Content.CHOOSE_COLOR){this.getEditorAPI().bi.event(e.bi.events.colorPicker.MAIN_PANEL_CLOSED,{})}else if(this.state.content===this.Content.CHANGE_PALETTE){this.getEditorAPI().bi.event(e.bi.events.colorPicker.CHANGE_SITE_COLOR_CLOSED,{})}this.refs.frame.close()},openHelpCenter:function(a){var b={component:this.getEditorAPI().selection.getSelectedComponentType(),learn_more:true,origin:e.constants.BI.HELP.ORIGIN.PANEL,panel_name:this.props.panelName};j.getManager().openHelpCenter(a,null,null,b)},render:l})});define("panels/toolPanels/colorPicker/addColorContent.rt",["react","lodash","util","baseUI","baseUILib","panels/toolPanels/colorPicker/siteCustomColors"],function(a,b,c,d,e,f){"use strict";return function(){return a.createElement("div",{className:"add-color-content"},a.createElement("div",{},a.createElement(d.colorSpace,{value:this.state.selectedColor,onChange:this.onHsbColorChanged})),a.createElement("div",{className:"color-indicator"},a.createElement("span",{className:"color-sample initial-color",onMouseDown:this.resetToInitialColor,style:{backgroundColor:this.resolveColor(this.initialColor)}}),a.createElement("span",{className:"color-sample current-color",style:{backgroundColor:c.colors.hsbToHex(this.state.selectedColor)}})),a.createElement("div",{className:"color-format"},a.createElement(d.colorFormat,{value:this.state.selectedColor,onChange:this.onHsbColorChanged,onChangeInValidationStatus:this.onChangeInValidationStatus})),this.props.siteCustomColors?a.createElement("div",{key:"addColorCustomColorsSeperator",className:"custom-colors-separator"}):null,this.props.siteCustomColors?a.createElement("div",{key:"customColorsSectionTitle",className:"custom-colors-section-title"},"\n        ",c.translate("ColorPicker_MainPanel_MoreColors"),"\n    "):null,a.createElement(e.customScroll,{},this.props.siteCustomColors?a.createElement("div",{key:"customColorsSection",className:"custom-colors-section"},a.createElement(f,{className:"custom-colors",onPreview:this.previewColor,customColors:this.props.siteCustomColors,paletteColors:this.props.paletteColors,sessionStorage:this.props.sessionStorage,value:c.colors.hsbToHex(this.state.selectedColor),onChange:this.onCustomColorSelected})):null),a.createElement("div",{className:"footer"},a.createElement(d.button,{className:"cancel-button btn-md btn-confirm-secondary",label:"ColorPicker_ColorSpace_CancelButton",onClick:this.handleCancel}),a.createElement(d.button,{className:"confirm-button btn-md",label:"ColorPicker_ColorSpace_AddButton",onClick:this.callOnChangeAndClose,disabled:!this.state.isValid})))}});define("panels/toolPanels/colorPicker/addColorContent",["react","lodash","core","util","panels/toolPanels/colorPicker/constants","panels/toolPanels/colorPicker/addColorContent.rt"],function(a,b,c,d,e,f){"use strict";return a.createClass({displayName:"addColorContent",propTypes:{valueLink:a.PropTypes.shape({value:a.PropTypes.string,requestChange:a.PropTypes.func}).isRequired,paletteColors:a.PropTypes.object.isRequired,closeHandler:a.PropTypes.func.isRequired,onPreview:a.PropTypes.func.isRequired,onCancel:a.PropTypes.func.isRequired,sessionStorage:a.PropTypes.object,siteCustomColors:a.PropTypes.arrayOf(a.PropTypes.string)},mixins:[d.valueLinkMixin],getInitialState:function(){this.initialColor=this.getValueFromProps();var a=this.resolveColor(this.initialColor);var b=d.colors.hexToHsbExact(a);return{selectedColor:b,isValid:true}},resolveColor:function(a){if(b.includes(a,"color")){return this.props.paletteColors[a]}else if(!a||a===e.NO_COLOR){return"#ffffff"}return a},onHsbColorChanged:function(a){this.setState({selectedColor:a},function(){var b=d.colors.hsbToHex(a);this.props.onPreview(b)})},onCustomColorSelected:function(a){this.setState({selectedColor:d.colors.hexToHsbExact(a)},function(){this.props.onPreview(a)})},resetToInitialColor:function(){var a=this.resolveColor(this.initialColor);this.setState({selectedColor:d.colors.hexToHsbExact(a)},function(){this.props.onPreview(this.initialColor)})},previewColor:function(a){this.props.onPreview(a)},componentWillUnmount:function(){if(!this.wasConfirmClicked){this.props.onCancel()}},callOnChangeAndClose:function(){this.callOnChangeIfExists(d.colors.hsbToHex(this.state.selectedColor));this.wasConfirmClicked=true;this.close()},onChangeInValidationStatus:function(a){if(this.isMounted()){this.setState({isValid:a})}},handleCancel:function(){this.props.onCancel();this.close()},close:function(){this.props.closeHandler()},render:f})});define("panels/toolPanels/colorPicker/addColorPanel.rt",["react","lodash","panels/frames/toolPanelFrame","util","panels/toolPanels/colorPicker/addColorContent"],function(a,b,c,d,e){"use strict";return function(){return a.createElement(c,{ref:"frame",className:"custom-color-picker-panel",panelName:this.props.panelName,title:this.props.title,top:this.props.top,left:this.props.left},a.createElement(e,{siteCustomColors:this.props.siteCustomColors,paletteColors:this.props.paletteColors,sessionStorage:this.props.sessionStorage,valueLink:this.props.valueLink,onPreview:this.props.onPreview,onCancel:this.props.onCancel,closeHandler:this.close}))}});define("panels/toolPanels/colorPicker/addColorPanel",["react","lodash","core","panels/mixins/limitInitialPositionToStageMixin","panels/toolPanels/colorPicker/addColorPanel.rt"],function(a,b,c,d,e){"use strict";return a.createClass({displayName:"addColorPanel",mixins:[c.mixins.editorAPIMixin,d],propTypes:{valueLink:a.PropTypes.shape({value:a.PropTypes.string,requestChange:a.PropTypes.func}).isRequired,paletteColors:a.PropTypes.object.isRequired,sessionStorage:a.PropTypes.object,top:a.PropTypes.string,left:a.PropTypes.string,onPreview:a.PropTypes.func.isRequired,onCancel:a.PropTypes.func.isRequired,siteCustomColors:a.PropTypes.arrayOf(a.PropTypes.string)},close:function(){this.getEditorAPI().bi.event(c.bi.events.colorPicker.ADD_COLOR_PANEL_CLOSED,{});this.refs.frame.close()},render:e})});define("panels/toolPanels/colorPicker/colorPicker",["panels/toolPanels/colorPicker/colorPickerPanel","panels/toolPanels/colorPicker/addColorPanel","panels/toolPanels/colorPicker/addColorContent"],function(a,b,c){"use strict";return{colorPickerPanel:a,addColorPanel:b,addColorContent:c}});define("panels/toolPanels/languageSupport/languageSupport.rt",["react","lodash","panels/frames/toolPanelFrame","baseUI"],function(a,b,c,d){"use strict";function e(a,b,c){this.update(b,c)}function f(c,f){return a.createElement("div",{className:b({"language-option":true,disabled:c.disabled}).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" "),key:c.label},a.createElement(d.tooltip,{value:c.tooltip,disabled:!c.tooltip,styleType:d.uiConstants.TOOLTIP.STYLE_TYPE.SMALL},a.createElement("span",{},a.createElement(d.toggle,{name:"checkbox",labelAfterSymbol:true,label:c.label,disabled:c.disabled,value:c.value,onChange:e.bind(this,c,f)}))),!c.disabled?a.createElement("span",{className:"example-img",key:"example-img"},a.createElement("span",{style:c.style})):null)}return function(){return a.createElement.apply(this,[c,{panelName:this.props.panelName,headerTitle:this.translateIfNeeded("add_languages_header_label"),isSingleInstance:true,helpId:"147f770b-8d82-48b9-aea8-2f07d94c0743",ref:"frame",className:"language-support-panel",top:this.props.top,left:this.props.left,contentClass:"language-support-panel-content-wrapper"},a.createElement("div",{className:"label"},this.translateIfNeeded("add_languages_text")),b.map(this.state.charsItems,f.bind(this)),a.createElement("footer",{},a.createElement("div",{className:"copy-right-text"},a.createElement("span",{},this.translateIfNeeded("add_languages_copyright_text"),a.createElement("a",{className:"copy-right-link",onClick:this.openCopyright},this.translateIfNeeded("add_languages_copyright_text_link")))),a.createElement(d.button,{label:"add_languages_save_button",onClick:this.setLanguages,className:"btn-confirm-primary"}))])}});define("panels/toolPanels/languageSupport/languageSupport",["react","baseUI","lodash","core","util","panels/mixins/reportBiEventOnUiChangeMixin","panels/toolPanels/languageSupport/languageSupport.rt"],function(a,b,c,d,e,f,g){"use strict";var h=[{characterSet:"latin",position:"0px 0px",label:"add_languages_english",tooltip:"add_languages_english_tooltip",disabled:true},{characterSet:"latin-ext",position:"-15px -46px",label:"add_languages_eastern_european",tooltip:"add_languages_eastern_european_tooltip"},{characterSet:"cyrillic",position:"-15px -19px",label:"add_languages_cyrillic",tooltip:"add_languages_cyrillic_tooltip"},{characterSet:"japanese",position:"-15px -123px",label:"add_languages_japanese"},{characterSet:"korean",position:"-15px -96px",label:"add_languages_korean"},{characterSet:"arabic",position:"-15px -150px",label:"add_languages_arabic"},{characterSet:"hebrew",position:"-15px -70px",label:"add_languages_hebrew"}];return a.createClass({displayName:"languageSupport",mixins:[e.translationMixin,d.mixins.editorAPIMixin,f],render:g,getBackground:function(){return"url("+e.media.getMediaUrl("textEditor/langs.v1.png")+")"},getInitialState:function(){return{charsItems:this.getCharacterSetsArray()}},setLanguages:function(){this.getEditorAPI().bi.event(d.bi.events.textControls.text_languages_support_dialog_save_click);var a=[];c.forEach(this.state.charsItems,function(b){if(b.value){a.push(b.characterSet)}});this.getEditorAPI().theme.fonts.updateCharacterSet(a);this.close()},close:function(){this.refs.frame.close()},update:function(a,b){var d=c.clone(this.state.charsItems);var e=c.clone(d[a]);e.value=b;d[a]=e;this.setState({charsItems:d})},getCharactersSets:function(){return this.getEditorAPI().theme.fonts.getCharacterSet()},openHelpPanelFrame:function(){this.getEditorAPI().bi.event(d.bi.events.textControls.text_languages_support_learn_more_click);this.refs.frame.openHelpCenter("147f770b-8d82-48b9-aea8-2f07d94c0743")},getCharacterSetsArray:function(){var a=h;var b=[];var d=this.getCharactersSets();var e=this.getBackground();c.forEach(a,function(a){var f={label:a.label,characterSet:a.characterSet,tooltip:a.tooltip,value:c.includes(d,a.characterSet),disabled:a.disabled,style:{backgroundImage:e,backgroundPosition:a.position,height:"18px",width:"72px",display:"inline-block"}};b.push(f)});return b},openCopyright:function(){var a=e.translate("add_languages_copyright_link");if(window){window.open(a,"_blank")}}})});define("panels/toolPanels/mobileActionBarSubPanel/mobileActionBarSubPanel.rt",["react","lodash","panels/frames/toolPanelFrame","baseUI","baseUILib","util"],function(a,b,c,d,e,f){"use strict";function g(b,c){return a.createElement("li",{key:b.id,className:"social-link-item"},a.createElement(d.tooltip,{value:this.getSocialLinkTooltip(b.id)},a.createElement("span",{},a.createElement(d.symbol,{className:b.symbol+" symbol",name:b.symbol}))),a.createElement(d.textInput,{validator:this.validateUrlWithEmptyState,invalidMessage:"mobile_action_bar_social_error_message",placeholder:this.getSocialLinkPlaceholder(b.id),valueLink:this.getValueLink(b.id)}))}return function(){return a.createElement(c,{ref:"frame",headerTitle:f.translate("mobile_action_bar_social_title"),panelName:this.props.panelName,isSingleInstance:true,className:"actionbar-sub-panel",isBlockingLayerFullScreen:this.props.isBlockingLayerFullScreen,shouldBlockOuterScroll:this.props.shouldBlockOuterScroll,top:this.props.top,left:this.props.left,contentClass:"actionbar-sub-panel-content-wrapper"},a.createElement(e.customScroll,{ref:"customScroll",heightRelativeToParent:"100%",addScrolledClass:true},a.createElement.apply(this,["ul",{},b.map(this.getSocialLinks(),g.bind(this))])))}});define("panels/toolPanels/mobileActionBarSubPanel/mobileActionBarSubPanel",["react","lodash","core","util","panels/toolPanels/mobileActionBarSubPanel/mobileActionBarSubPanel.rt"],function(a,b,c,d,e){"use strict";return a.createClass({displayName:"mobileActionBarSubPanel",mixins:[c.mixins.editorAPIMixin],render:e,getSocialLinks:function(){return[{id:"blogger",symbol:"mba_social_panel_google_blogger"},{id:"facebook",symbol:"mba_social_panel_facebook"},{id:"flickr",symbol:"mba_social_panel_youtube_flickr"},{id:"google_plus",symbol:"mba_social_panel_google_plus"},{id:"linkedin",symbol:"mba_social_panel_google_linkdin"},{id:"pinterest",symbol:"mba_social_panel_pinterest"},{id:"tumblr",symbol:"mba_social_panel_google_tumblr"},{id:"twitter",symbol:"mba_social_panel_twitter"},{id:"vimeo",symbol:"mba_social_panel_youtube_vimeo"},{id:"youtube",symbol:"mba_social_panel_youtube"}]},getSocialLinkPlaceholder:function(a){a=a==="google_plus"?"google":a;return"mobile_action_bar_"+a+"_placeholder"},getValueLink:function(a){var c=this.getEditorAPI().mobile.actionBar.actions,d=c.get().socialLinks;return{value:d[a],requestChange:function(a,e){var f={},g=false;d[a]=e;f.socialLinks=d;g=b(d).values().compact().value().length>0;c.update(f);c.enable({socialLinks:g})}.bind(this,a)}},getSocialLinkTooltip:function(a){a=a==="google_plus"?"google":a;return"mobile_action_bar_"+a+"_tooltip"},validateUrlWithEmptyState:function(a){return d.validate.url(a)||a===""}})});define("panels/toolPanels/fontsManager/fontItem.rt",["react","lodash","baseUI","symbols","util","uiConstants"],function(a,b,c,d,e,f){"use strict";function g(a,c){var d=b.assign({},a,c);if(a.hasOwnProperty("style")){d.style=b.defaults(d.style,a.style)}if(a.hasOwnProperty("className")&&c.hasOwnProperty("className")){d.className=c.className+" "+a.className}return d}return function(){return a.createElement("div",{className:"font-item "+(this.shouldShowActions()?"with-actions ":"")+" "+(this.shouldShowCancel()?"cancelable":"")+" "+(this.props.status&&!this.props.fontFamily?"queue":"list")+" "+(this.props.errorCode?"error":"")+" "+(this.props.finished?"animated":"")},a.createElement("div",{className:"font-description "+(this.props.fontFamily?"uploaded":"")},a.createElement("span",{className:"font-title display-name "+(this.props.fontFamily?"uploaded":""),style:this.getStyle()},this.props.name),a.createElement("span",{className:"font-title file-name"},this.props.fileName),a.createElement("span",{className:"font-status-msg"},e.translate(this.getStatusMessage()))),a.createElement("div",{className:"indicator"},this.getStatusSymbol()?a.createElement(d.symbol,{name:this.getStatusSymbol(),className:this.props.status||"",key:"status-symbol"}):null),this.props.finished?a.createElement("div",{className:"indicator finished",key:"finished-symbol"},a.createElement(d.symbol,{name:"inputValidationSuccess"})):null,a.createElement("div",{className:"cancel-icon"},a.createElement(d.symbol,{name:"headerCloseButton",onClick:this.props.onCancelClick,className:"cancel-btn"})),a.createElement("div",{className:"actions"},a.createElement(c.tooltip,{value:"Upload_Fonts_Download_Tooltip",styleType:f.TOOLTIP.STYLE_TYPE.SMALL},a.createElement("div",{className:"action-btn-container"},this.props.downloadable?a.createElement("a",g({className:"action-btn download",href:this.props.downloadUrl,onClick:this.props.onDownloadClick,key:"download-btn"},this.getDownloadProps()),a.createElement(d.symbol,{name:"font-download"})):null)),a.createElement(c.tooltip,{value:"Upload_Fonts_Delete_Tooltip",styleType:f.TOOLTIP.STYLE_TYPE.SMALL},a.createElement("div",{className:"action-btn-container"},this.props.removeable?a.createElement("a",{className:"action-btn",onClick:this.props.onRemoveClick,key:"remove-btn"},a.createElement(d.symbol,{name:"font-delete"})):null))))}});define("panels/toolPanels/fontsManager/fontItem",["react","lodash","util","panels/toolPanels/fontsManager/fontItem.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"fontItem",propTypes:{fontFamily:a.PropTypes.string,name:a.PropTypes.string,status:a.PropTypes.string,onDownloadClick:a.PropTypes.func,onRemoveClick:a.PropTypes.func,onCancelClick:a.PropTypes.func,downloadable:a.PropTypes.bool,removeable:a.PropTypes.bool,cancelable:a.PropTypes.bool},getStyle:function(){if(this.props.fontFamily){return{fontFamily:this.props.fontFamily}}return{}},shouldShowActions:function(){return this.props.downloadable||this.props.removeable},shouldShowCancel:function(){return this.props.cancelable&&this.props.status===c.fontsManagerUtils.constants.FONT_STATUS.WAITING},getStatusSymbol:function(){var a={uploading:"font-uploading-loader",waiting:"font-uploading-loader",processing:"font-uploading-loader",succeeded:"inputValidationSuccess",failed:"inputValidationError"};return a[this.props.status]},getDownloadProps:function(){var a={};if(c.browserUtil.isChrome()){a.download=this.props.fileName}else{a.target="_blank"}return a},getStatusMessage:function(){var a="";if(this.props.errorCode){a=c.fontsManagerUtils.getErrorMessage(this.props.errorCode).translate_msg}else{a=c.fontsManagerUtils.constants.FONT_STATUS_MSG[this.props.status]||""}return a},render:d})});define("panels/toolPanels/fontsManager/fontsUploadPanel.rt",["react","lodash","panels/frames/focusPanelFrame","baseUI","baseUILib","symbols","panels/toolPanels/fontsManager/fontItem"],function(a,b,c,d,e,f,g){"use strict";function h(a){a.preventDefault()}function i(a){this.handleUpload(a,false)}function j(a){this.handleUpload(a,true)}function k(a){this.handleUpload(a,false)}function l(a){this.handleUpload(a,true)}function m(c,d){return a.createElement(g,b.assign({},{key:c.name},this.getSizeErrorFontProps(c)))}function n(c,d){return a.createElement(g,b.assign({},{key:c.fontFamily||c.fileName+d},c))}return function(){return a.createElement(c,{ref:"frame",panelName:this.props.panelName,className:"fonts-upload-panel",shouldNotCloseOnBlur:true,onClose:this.handlePanelCloseClick,title:this.translateIfNeeded("UPLOAD_FONTS_Panel_Header"),helpId:"96323a82-c61a-4ac1-90ac-10aecb37cbf8",width:"600",onContextMenu:h.bind(this)},a.createElement("div",{className:"fonts-upload-header"},a.createElement("span",{className:"general-explanation-text"},this.translateIfNeeded("Upload_Fonts_Panel_Header_Text")),a.createElement(d.fileInput,{className:"font-upload-button",label:"Upload_Fonts_Upload_Button",onChange:i.bind(this)})),!this.shouldShowFontsList()?a.createElement(d.filesDrop,{onChange:j.bind(this),key:"empty-fonts-list",className:"empty-msg"},a.createElement("div",{className:"empty-message-container"},a.createElement("div",{className:"empty-symbol-container"},a.createElement(f.symbol,{name:"fonts-manager-clipart"})),a.createElement("span",{className:"empty-text-title"},this.translateIfNeeded("Upload_Fonts_Empty_State_Title")),a.createElement("br",{}),a.createElement("span",{className:"empty-text"},this.translateIfNeeded("Upload_Fonts_Empty_State_Text")),a.createElement(d.fileInput,{className:"font-upload-link",label:"Upload_Fonts_Empty_State_Text_Link",onChange:k.bind(this),onlyText:true}))):null,this.shouldShowFontsList()?a.createElement(d.filesDrop,{key:"fonts-list",hasBorder:false,className:"list",onChange:l.bind(this)},a.createElement(e.customScroll,{ref:"customScroll"},a.createElement.apply(this,["div",{className:"font-list-container"},b.map(this.getSizeErrorFonts(),m.bind(this)),b.map(this.getFontsList(),n.bind(this))]))):null,a.createElement("div",{className:"fonts-upload-footer"},this.shouldShowFooterMsg()?a.createElement("span",{key:"upload-text",className:"footer-msg"},this.translateIfNeeded("Upload_Fonts_Footer_Text")):null,a.createElement(d.button,{className:"default btn-md close-panel",label:this.getButtonLabel(),disabled:this.isUploadInProcess(),onClick:this.handleDoneClick})))}});define("panels/toolPanels/fontsManager/fontsUploadPanel",["react","baseUI","lodash","core","util","panels/toolPanels/fontsManager/fontsUploadPanel.rt","panels/panelManager/panelManagerFactory"],function(a,b,c,d,e,f,g){"use strict";function h(a){return c.transform(a,function(a,b){if(b.status===e.fontsManagerUtils.constants.FONT_STATUS.SUCCEEDED){a[b.id]={finished:true}}},{})}function i(a){c.forEach(a,function(a){c.assign(a,{name:a.source.file.name})});return a}function j(a){return c.map(a,function(a){if(a.status===e.fontsManagerUtils.constants.FONT_STATUS.SUCCEEDED){var b=c.get(a,"serverResponse.data");return c.assign(a,e.fontsManagerUtils.getUploadedFontData(b))}return a})}function k(a){return c(a).thru(i).thru(j).value()}return a.createClass({displayName:"fontsUploadPanel",mixins:[e.translationMixin,d.mixins.editorAPIMixin],render:f,getInitialState:function(){this.fontsManager=this.getEditorAPI().mediaServices.fontsManager;var a=this.fontsManager.getList();var b=k(this.fontsManager.uploader.getUploadQueue());var c=h(b);return{items:a,queue:b,uploadedItems:c,sizeErrorFonts:[],isUploadStarted:false}},handleUpload:function(a,b){var f=b?d.bi.events.fontsUploadPanel.Fonts_Dragged:d.bi.events.fontsUploadPanel.Upload_Fonts_Click;this.getEditorAPI().bi.event(f,{count:a.length});var g=e.fontsManagerUtils.getAllowedSizeFonts(a);var h=c.difference(a,g);this.setState({sizeErrorFonts:h,isUploadStarted:true});var i=this;c.times(h.length,function(){i.sendUploadFailedBi(999999)});this.fontsManager.uploader.upload(g)},onUploadedFontsChange:function(a){if(a){this.setState({items:a})}},onQueueChange:function(a){var b=i(a);this.setState({queue:b})},onFileChange:function(a){var b=this.state.queue;var f=a.currentFileQueueIdx;var g=a.currentFileProgress.status;b[f].status=g;if(g===e.fontsManagerUtils.constants.FONT_STATUS.FAILED){var h=c.get(a,"currentFileProgress.file.serverResponse.data");var i=c.get(h,"error_code");b[f].error_code=i;this.sendUploadFailedBi(i);this.fontsManager.uploader.retryUpload()}if(g===e.fontsManagerUtils.constants.FONT_STATUS.SUCCEEDED){this.getEditorAPI().bi.event(d.bi.events.fontsUploadPanel.Fonts_Uploaded,{});var j=c.get(a,"currentFileProgress.file.serverResponse.data");var k={};k[j.id]={finished:false};this.setState({uploadedItems:c.assign(k,this.state.uploadedItems)});b[f]=c.assign(b[f],e.fontsManagerUtils.getUploadedFontData(j));setTimeout(function(){var a=c.clone(this.state.uploadedItems);a[j.id].finished=true;this.setState({uploadedItems:a})}.bind(this),1e3)}this.setState({queue:b})},sendUploadFailedBi:function(a){var b=e.fontsManagerUtils.getErrorMessage(a).bi_msg;this.getEditorAPI().bi.event(d.bi.events.fontsUploadPanel.Upload_Failed,{message:b})},getFontProps:function(a){var b=!!a.status&&!a.fontFamily;var d="";if(!b){d=e.fontsManagerUtils.constants.FONT_STATUS.FINISHED}else if(b){d=a.status}var f={fileName:a.name,name:a.displayName,fontFamily:a.fontFamily,status:d,errorCode:a.error_code,downloadable:!b,downloadUrl:a.downloadUrl,removeable:!b,finished:a.status===e.fontsManagerUtils.constants.FONT_STATUS.SUCCEEDED||this.isUploadedItem(a),onRemoveClick:c.partial(this.handleRemoveClick,a),onDownloadClick:c.partial(this.handleDownloadClick,a),cancelable:b&&a.canAbort(),onCancelClick:b?c.partial(this.cancelUpload,a):null};return f},isUploadedItem:function(a){return a.id&&!!c.get(this.state.uploadedItems,a.id)},getFontsList:function(){var a=this.getQueueItems().concat(this.getExistingItems());return c.map(a,this.getFontProps)},getSizeErrorFonts:function(){return this.state.sizeErrorFonts},getSizeErrorFontProps:function(a){var b={fileName:a.name,status:e.fontsManagerUtils.constants.FONT_STATUS.FAILED,errorCode:999999};return b},getExistingItems:function(){var a=this.state.queue;return c.reject(this.state.items,function(b){return c.find(a,{id:b.id})})},getQueueItems:function(){return c.reject(this.state.queue,function(a){return a.removed||a.isAborted})},componentDidMount:function(){this.fontsManager.registerObserver(e.fontsManagerUtils.constants.FONT_EVENTS_NAMES.LIST_CHANGED,this.onUploadedFontsChange);this.fontsManager.registerObserver(e.fontsManagerUtils.constants.FONT_EVENTS_NAMES.QUEUE_CHANGED,this.onQueueChange);this.fontsManager.registerObserver(e.fontsManagerUtils.constants.FONT_EVENTS_NAMES.FILE_CHANGED,this.onFileChange)},componentWillUnmount:function(){this.cancelAllUpload();this.fontsManager.unregisterObserver(e.fontsManagerUtils.constants.FONT_EVENTS_NAMES.LIST_CHANGED,this.onUploadedFontsChange);this.fontsManager.unregisterObserver(e.fontsManagerUtils.constants.FONT_EVENTS_NAMES.QUEUE_CHANGED,this.onQueueChange);this.fontsManager.unregisterObserver(e.fontsManagerUtils.constants.FONT_EVENTS_NAMES.FILE_CHANGED,this.onFileChange)},shouldShowFontsList:function(){return!c.isEmpty(this.getExistingItems())||!c.isEmpty(this.getQueueItems())||!c.isEmpty(this.getSizeErrorFonts())},handleRemoveClick:function(a){this.getEditorAPI().bi.event(d.bi.events.fontsUploadPanel.Delete_File,{});this.openDeleteConfirmationPanel(a)},handleDownloadClick:function(){this.getEditorAPI().bi.event(d.bi.events.fontsUploadPanel.Download_File_Click,{})},openDeleteConfirmationPanel:function(a){var b=this;var e=c.partial(this.removeItem,a);function f(){b.getEditorAPI().bi.event(d.bi.events.fontsUploadPanel.Approve_Delete_File,{text:"cancel"})}g.getManager().openPanel("panels.toolPanels.deleteFontMsg",{panelName:"deleteFontConfirmation",onConfirm:e,onCancel:f},true)},removeItem:function(a){this.getEditorAPI().bi.event(d.bi.events.fontsUploadPanel.Approve_Delete_File,{text:"delete"});var b=this.state.queue;var e=c.findIndex(b,a);var f=this.state.uploadedItems;if(e!==-1){b[e].removed=true;if(f[a.id]){f=c.clone(f);delete f[a.id]}this.setState({queue:b,uploadedItems:f})}this.fontsManager.remove([a.id]);
},cancelUpload:function(a){this.getEditorAPI().bi.event(d.bi.events.fontsUploadPanel.Cancel_Upload,{});if(this.fontsManager.uploader.cancelUpload(a)){var b=c.findIndex(this.state.queue,a);var e=this.state.queue;if(b!==-1){e[b].canceled=true;this.setState({queue:e})}}},cancelAllUpload:function(){var a=this;c.forEach(this.state.queue,function(b){a.cancelUpload(b)});this.fontsManager.uploader.clearUploadQueue()},handlePanelCloseClick:function(){if(this.isAnyInQueueProcessing()){this.openCancelConfirmationPanel();return false}return true},openCancelConfirmationPanel:function(){var a=this;g.getManager().openPanel("panels.toolPanels.cancelFontUploadMsg",{panelName:"cancelUploadConfirmation",onConfirm:function b(){a.getEditorAPI().bi.event(d.bi.events.fontsUploadPanel.Approve_Stop_Upload,{});a.closePanel()},onCancel:function a(){return false}},true)},isAnyInQueueProcessing:function(){return c.some(this.state.queue,{status:e.fontsManagerUtils.constants.FONT_STATUS.PROCESSING})},isAnyInQueueWaiting:function(){return c.some(this.state.queue,{status:e.fontsManagerUtils.constants.FONT_STATUS.WAITING})},isAnyInQueueUploading:function(){return c.some(this.state.queue,{status:e.fontsManagerUtils.constants.FONT_STATUS.UPLOADING})},closePanel:function(){this.getEditorAPI().panelManager.closePanelByName(this.props.panelName)},handleDoneClick:function(){this.getEditorAPI().bi.event(d.bi.events.fontsUploadPanel.Closed_Button_Click,{});this.closePanel()},getButtonLabel:function(){var a=this.state.isUploadStarted?"Upload_Fonts_Close_Button_2":"Upload_Fonts_Close_Button_1";return a},isUploadInProcess:function(){return this.isAnyInQueueProcessing()||this.isAnyInQueueWaiting()||this.isAnyInQueueUploading()},shouldShowFooterMsg:function(){return!c.isEmpty(this.state.uploadedItems)&&!this.isUploadInProcess()}})});define("panels/toolPanels/fontsManager/deleteFontMsg.rt",["react","lodash","panels/frames/messagePanelFrame","util"],function(a,b,c,d){"use strict";return function(){return a.createElement(c,{panelName:this.props.panelName,onConfirm:this.props.onConfirm,onCancel:this.props.onCancel,confirmLabel:"Upload_Fonts_Delete_Pop_Up_Button_1",cancelLabel:"Upload_Fonts_Delete_Pop_Up_Button_2",className:"important delete-font-message",panelTitle:d.translate("Upload_Fonts_Delete_Pop_Up_Header")},a.createElement("div",{className:"delete-font-message"},a.createElement("div",{className:"message"},d.translate("Upload_Fonts_Delete_Pop_Up_Text"))))}});define("panels/toolPanels/fontsManager/deleteFontMsg",["react","lodash","panels/mixins/dontShowAgainMixin","panels/toolPanels/fontsManager/deleteFontMsg.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"deleteFontMsg",propTypes:{panelName:a.PropTypes.string.isRequired,onConfirm:a.PropTypes.func.isRequired,onCancel:a.PropTypes.func.isRequired},mixins:[c],render:d})});define("panels/toolPanels/fontsManager/cancelFontUploadMsg.rt",["react","lodash","panels/frames/messagePanelFrame","util"],function(a,b,c,d){"use strict";return function(){return a.createElement(c,{panelName:this.props.panelName,onConfirm:this.props.onConfirm,onCancel:this.props.onCancel,confirmLabel:"Upload_Fonts_Close_Panel_Pop_Up_Button_1",cancelLabel:"Upload_Fonts_Close_Panel_Pop_Up_Button_2",className:"important close-font-message",panelTitle:d.translate("Upload_Fonts_Close_Panel_Pop_Up_Header")},a.createElement("div",{className:"cancel-font-message"},a.createElement("div",{className:"message"},d.translate("Upload_Fonts_Close_Panel_Pop_Up_Text"))))}});define("panels/toolPanels/fontsManager/cancelFontUploadMsg",["react","lodash","panels/toolPanels/fontsManager/cancelFontUploadMsg.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"cancelFontUploadMsg",render:c})});define("panels/toolPanels/grid/gridAddColumnPanel.rt",["react","lodash","util","baseUI","panels/frames/toolPanelFrame"],function(a,b,c,d,e){"use strict";function f(b,c){return a.createElement(d.dropDown.option,{key:b.value,value:b.value},"\n                                ",b.label,"\n                            ")}return function(){return a.createElement(e,{ref:"frame",panelName:"panels.toolPanels.gridAddColumnPanel",className:"grid-add-column-toolbar",top:this.props.top,left:this.props.left},a.createElement("div",{className:"grid-add-column-panel"},a.createElement("div",{className:"panel-header header light",ref:"panelHeader"},a.createElement("span",{className:"panel-title"},c.translate("TABLE_ADD_PANEL_TITLE")),a.createElement("button",{className:"close header-button-dev-toolbar",onClick:this.onCloseButtonClick},a.createElement(d.symbol,{name:"headerCloseButton"}))),a.createElement("div",{className:"header-separator"}),a.createElement("div",{className:"grid-add-column-toolbar-content"},a.createElement(d.textInput,{label:"TABLE_ADD_PANEL_COL_TITLE_LABEL",value:this.state.label,onChange:this.onLabelChange}),a.createElement("hr",{className:"divider-long"}),a.createElement(d.textInput,{label:"TABLE_ADD_PANEL_FIELD_NAME_LABEL",ref:"fieldNameInput",value:this.state.fieldName,validator:this.fieldNameValidator,invalidMessage:"FIELD_NAME_CANNOT_BE_EMPTY",onValidation:this.onFieldNameValidation,onChange:this.onFieldNameChange}),a.createElement("hr",{className:"divider-long"}),a.createElement.apply(this,[d.dropDown.select,{label:"TABLE_ADD_PANEL_TYPE_LABEL",valueLink:this.linkState("type")},b.map(this.typeOptions,f.bind(this))]),a.createElement("hr",{className:"divider-long"}),a.createElement("div",{className:"button-row"},a.createElement(d.button,{disabled:!this.state.isFormValid,className:"button",label:"TABLE_ADD_PANE_DONE_BTN",onClick:this.onAddButtonClick})))))}});define("panels/toolPanels/grid/gridAddColumnPanel",["react","lodash","panels/toolPanels/grid/gridAddColumnPanel.rt","util"],function(a,b,c,d){"use strict";var e=Object.freeze({STRING:"string",DATE:"date",NUMBER:"number",IMAGE:"image",BOOLEAN:"bool",RICH_TEXT:"richText"});return a.createClass({displayName:"gridAddColumnPanel",mixins:[a.addons.LinkedStateMixin],getInitialState:function(){return{label:this.props.labelPrefix+this.props.nextIndex,fieldName:this.props.fieldNamePrefix+this.props.nextIndex,type:e.STRING,fieldNameWasEdited:false,isFormValid:true}},render:c,onCloseButtonClick:function(){this.refs.frame.close()},onAddButtonClick:function(){if(this.state.isFormValid){this.props.addColumnCallback(this.state.label,this.state.fieldName,this.state.type);this.refs.frame.close()}},onLabelChange:function(a){var b={label:a};if(!this.state.fieldNameWasEdited){var c=a.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"");if(c.length!==0){b.fieldName=c}}this.setState(b)},fieldNameValidator:function(a){return a.length>0},onFieldNameChange:function(a){this.setState({fieldName:a,fieldNameWasEdited:true})},onFieldNameValidation:function(a){this.setState({isFormValid:a})},typeOptions:[{value:e.STRING,label:d.translate("TABLE_ADD_PANEL_TYPE_OPT1")},{value:e.IMAGE,label:d.translate("TABLE_ADD_PANEL_TYPE_OPT2")},{value:e.NUMBER,label:d.translate("TABLE_ADD_PANEL_TYPE_OPT3")},{value:e.BOOLEAN,label:d.translate("TABLE_ADD_PANEL_TYPE_OPT4")},{value:e.DATE,label:d.translate("TABLE_ADD_PANEL_TYPE_OPT5")}]})});define("panels/toolPanels/toolPanels",["panels/toolPanels/pagesSelector/pagesSelectorPanel","panels/toolPanels/exampleToolPanel","panels/toolPanels/linkPanel/linkPanel","panels/toolPanels/colorPicker/colorPicker","panels/toolPanels/languageSupport/languageSupport","panels/toolPanels/mobileActionBarSubPanel/mobileActionBarSubPanel","panels/toolPanels/fontsManager/fontsUploadPanel","panels/toolPanels/fontsManager/deleteFontMsg","panels/toolPanels/fontsManager/cancelFontUploadMsg","panels/toolPanels/grid/gridAddColumnPanel"],function(a,b,c,d,e,f,g,h,i,j){"use strict";return{pagesSelectorPanel:a,exampleTool:b,linkPanel:c,languageSupport:e,colorPicker:d,mobileActionBarSubPanel:f,fontsUploadPanel:g,deleteFontMsg:h,cancelFontUploadMsg:i,gridAddColumnPanel:j}});define("panels/commonControls/linkTo/linkToMixin",["lodash","core","baseUI"],function(a,b,c){"use strict";var d=1e3;return{mixins:[c.inputMixin,b.mixins.editorAPIMixin],ValidationStatus:{NONE:"none",SUCCESS:"success",ERROR:"error"},getInitialState:function(){return{validationStatus:this.ValidationStatus.NONE}},openLinkDialogFromPanel:function(){this.openLinkDialog(true)},openLinkDialog:function(a){var b=this.getEditorAPI();b.openLinkPanel({link:this.getValueFromProps(),visibleSections:this.props.visibleSections,callback:this.linkUpdated},!a)},linkUpdated:function(a){this.setState({validationStatus:this.ValidationStatus.SUCCESS});this.callOnChangeIfExists(a);setTimeout(function(){if(this.isMounted()){this.setState({validationStatus:this.ValidationStatus.NONE})}}.bind(this),d)}}});define("panels/commonControls/linkTo/linkTo.rt",["react","lodash","baseUI","experiment"],function(a,b,c,d){"use strict";return function(){return a.createElement(c.labelWithCircleButton,{key:"labelWithCircleButton",className:"input-link-to",isDisabled:this.isDisabled(),label:this.props.label,displayedValue:this.getTranslatedLink(),onClick:this.openLinkDialogFromPanel,buttonIcon:"linkBtnThin",showButton:this.shouldShowButton(),showSuccessSymbol:this.shouldShowSuccessSymbol(),infoIconText:this.props.infoIconText,infoIconTitle:this.props.infoIconTitle})}});define("panels/commonControls/linkTo/linkTo",["react","lodash","core","util","baseUI","panels/commonControls/linkTo/linkToMixin","panels/commonControls/linkTo/linkTo.rt"],function(a,b,c,d,e,f,g){"use strict";return a.createClass({displayName:"linkTo",mixins:[f],propTypes:{label:a.PropTypes.string,placeholder:a.PropTypes.string,showButton:a.PropTypes.bool,infoIconText:a.PropTypes.string,infoIconTitle:a.PropTypes.string},getDefaultProps:function(){return{label:"",placeholder:"Link_To_Control_Label_Placeholder",showButton:true}},shouldShowButton:function(){return this.props.showButton&&this.state.validationStatus===this.ValidationStatus.NONE},shouldShowSuccessSymbol:function(){return this.state.validationStatus===this.ValidationStatus.SUCCESS},getTranslatedLink:function(){var a=d.link.getLinkValueAsString(this.getEditorAPI(),this.getValueFromProps());a=a||d.translate(this.props.placeholder);return a},render:g})});define("panels/commonControls/linkTo/linkToButton.rt",["react","lodash","baseUI"],function(a,b,c){"use strict";function d(a,c){var d=b.assign({},a,c);if(a.hasOwnProperty("style")){d.style=b.defaults(d.style,a.style)}if(a.hasOwnProperty("className")&&c.hasOwnProperty("className")){d.className=c.className+" "+a.className}return d}return function(){return a.createElement(c.button,d({icon:"link",className:"link-to-button",onClick:this.openLinkDialog},this.filteredProps()))}});define("panels/commonControls/linkTo/linkToButton",["react","lodash","panels/commonControls/linkTo/linkToMixin","panels/commonControls/linkTo/linkToButton.rt"],function(a,b,c,d){"use strict";return a.createClass({displayName:"linkToButton",mixins:[c],render:d})});define("panels",["panels/panelManager/panelManagerFactory","panels/frames/frames","panels/mixins/mixins","panels/helpPanels/helpPanels","panels/focusPanels/focusPanels","panels/messagePanels/messagePanels","panels/toolPanels/toolPanels","panels/commonControls/linkTo/linkTo","panels/commonControls/linkTo/linkToButton","panels/commonControls/linkTo/linkToMixin","panels/panelManager/biEvents.json"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";return{panelManager:a.getManager(),frames:b,mixins:c,helpPanels:d,focusPanels:e,messagePanels:f,toolPanels:g,commonControls:{linkTo:h,linkToButton:i},linkToMixin:j,biEvents:k}});