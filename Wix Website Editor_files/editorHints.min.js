define("editorHints/configurations/hintsData.json",[],function(){return{Pages_Navigation:{id:"Pages_Navigation",primaryHintTarget:"Pages_Navigation",hintTargetContainer:"topBar",userProfileProperty:"first_editor_pages_panel_opened",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:["backFromPreview"],closeTriggers:["pagesPanelOpened"],isOneLiner:true,isDesktopOnly:false,customUIConfiguration:{dot:{targetOffsetX:-105,targetOffsetY:-20}}},SwitchEditor:{id:"SwitchEditor",primaryHintTarget:"SwitchEditor",hintTargetContainer:"topBar",userProfileProperty:"first_editor_mode",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:["navigateToPage"],closeTriggers:["editorViewModeClicked"],isOneLiner:true,isDesktopOnly:false,customUIConfiguration:{dot:{targetOffsetX:-6,targetOffsetY:-4}}},XandY:{id:"XandY",primaryHintTarget:"XandY",hintTargetContainer:"toolBar",userProfileProperty:"",prerequisiteActions:{action:"openToolbar"},postActions:{},onTargetContainerAction:{},openTriggers:["mouseDragEnd"],closeTriggers:[],isOneLiner:true,isDesktopOnly:false},AddImage:{id:"AddImage",primaryHintTarget:"AddImage",hintTargetContainer:"addPanel",preHintTarget:"AddPanel",preHintTargetContainer:"leftBar",userProfileProperty:"image_added",prerequisiteActions:{action:"openPanel",actionProps:{panelName:"addPanelInfra.addPanel",panelProps:{category:"image"}}},postActions:{},onTargetContainerAction:{},openTriggers:[],closeTriggers:["addPanelClosed"],isOneLiner:true,isDesktopOnly:true,customUIConfiguration:{dot:{bubbleAlignment:"RIGHT"}}},AddAnything:{id:"AddAnything",primaryHintTarget:"AddPanel",hintTargetContainer:"leftBar",userProfileProperty:"add_panel_open",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:[],closeTriggers:["addPanelOpened"],isOneLiner:true,isDesktopOnly:true,customUIConfiguration:{dot:{bubbleAlignment:"RIGHT"}}},Preview:{id:"Preview",primaryHintTarget:"Preview",hintTargetContainer:"topBar",userProfileProperty:"preview_site",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:[],closeTriggers:["previewClicked"],isOneLiner:true,isDesktopOnly:false,customUIConfiguration:{dot:{targetOffsetY:-19}}},Help:{id:"Help",primaryHintTarget:"Help",hintTargetContainer:"topBar",userProfileProperty:"help_in_editor",prerequisiteActions:{action:"disableTopBarMenuDropDown"},postActions:{action:"enableTopBarMenuDropDown"},onTargetContainerAction:{},openTriggers:[],closeTriggers:["topBarMenuBarHelpDropDownOpened"],isOneLiner:true,isDesktopOnly:false},Undo:{id:"Undo",primaryHintTarget:"Undo",hintTargetContainer:"topBar",userProfileProperty:"undo",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:["componentRemoved"],closeTriggers:["undoClicked"],isOneLiner:true,isDesktopOnly:false},ZoomOut:{id:"ZoomOut",primaryHintTarget:"ZoomOut",hintTargetContainer:"topBar",userProfileProperty:"zoomout",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:[],closeTriggers:["enterZoomOut"],isOneLiner:true,isDesktopOnly:false},FreeImages:{id:"FreeImages",primaryHintTarget:"FreeImages",hintTargetContainer:"addPanel",preHintTarget:"AddPanel",preHintTargetContainer:"leftBar",userProfileProperty:"add_image_free",prerequisiteActions:{action:"openPanel",actionProps:{panelName:"addPanelInfra.addPanel",panelProps:{category:"image"}}},postActions:{},onTargetContainerAction:{action:"switchAddPanelCategory",actionProps:{panelName:"addPanelInfra.addPanel",panelProps:{category:"image"}}},openTriggers:[],closeTriggers:["addPanelClosed"],isOneLiner:true,isDesktopOnly:true,customUIConfiguration:{dot:{bubbleAlignment:"RIGHT"}}},ChangeBackgrounds:{id:"ChangeBackgrounds",primaryHintTarget:"ChangeBackgrounds",hintTargetContainer:"leftBar",userProfileProperty:"background_changed",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:[],closeTriggers:["changeBackgroundsClicked"],isOneLiner:true,isDesktopOnly:false,customUIConfiguration:{dot:{bubbleAlignment:"RIGHT"}}},Text:{id:"Text",primaryHintTarget:"AddText",hintTargetContainer:"addPanel",preHintTarget:"AddPanel",preHintTargetContainer:"leftBar",userProfileProperty:"add_text_comp",prerequisiteActions:{action:"openPanel",actionProps:{panelName:"addPanelInfra.addPanel",panelProps:{category:"text"}}},postActions:{},onTargetContainerAction:{},openTriggers:[],closeTriggers:["addPanelClosed"],isOneLiner:true,isDesktopOnly:true,customUIConfiguration:{dot:{bubbleAlignment:"RIGHT"}}},Galleries:{id:"Galleries",primaryHintTarget:"AddGallery",hintTargetContainer:"addPanel",preHintTarget:"AddPanel",preHintTargetContainer:"leftBar",userProfileProperty:"organize_image",prerequisiteActions:{action:"openPanel",actionProps:{panelName:"addPanelInfra.addPanel",panelProps:{category:"gallery"}}},postActions:{},onTargetContainerAction:{},openTriggers:["imageAdded"],closeTriggers:["addPanelClosed"],isOneLiner:true,isDesktopOnly:true,customUIConfiguration:{dot:{bubbleAlignment:"RIGHT"}}},Buttons:{id:"Buttons",primaryHintTarget:"AddButton",hintTargetContainer:"addPanel",preHintTarget:"AddPanel",preHintTargetContainer:"leftBar",userProfileProperty:"add_button",prerequisiteActions:{action:"openPanel",actionProps:{panelName:"addPanelInfra.addPanel",panelProps:{category:"button"}}},postActions:{},onTargetContainerAction:{},openTriggers:[],closeTriggers:["addPanelClosed"],isOneLiner:true,isDesktopOnly:true,customUIConfiguration:{dot:{bubbleAlignment:"RIGHT"}}},AppMarket:{id:"AppMarket",primaryHintTarget:"AppMarket",hintTargetContainer:"leftBar",userProfileProperty:"open_app_market",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:["pageAdded"],closeTriggers:["appMarketPanelOpened"],isOneLiner:true,isDesktopOnly:true,customUIConfiguration:{dot:{bubbleAlignment:"RIGHT"}}},Publish:{id:"Publish",primaryHintTarget:"Publish",hintTargetContainer:"topBar",userProfileProperty:"publish",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:[],closeTriggers:["publishClicked"],isOneLiner:true,isDesktopOnly:false,customUIConfiguration:{dot:{targetOffsetY:-19}}},RePublish:{id:"RePublish",primaryHintTarget:"Publish",hintTargetContainer:"topBar",userProfileProperty:"publish_second",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:[],closeTriggers:["publishClicked"],isOneLiner:true,isDesktopOnly:false,customUIConfiguration:{dot:{targetOffsetY:-19}}},Premium:{id:"Premium",primaryHintTarget:"Premium",hintTargetContainer:"topBar",userProfileProperty:"upgrade_in_editor",prerequisiteActions:{action:"disableTopBarMenuDropDown"},postActions:{action:"enableTopBarMenuDropDown"},onTargetContainerAction:{},openTriggers:[],closeTriggers:["topBarMenuBarUpgradeDropDownOpened"],isOneLiner:true,isDesktopOnly:false},GetFeedback:{id:"GetFeedback",primaryHintTarget:"GetFeedback",hintTargetContainer:"topBarSiteMenuPanel",preHintTarget:"SiteMenuBar",preHintTargetContainer:"topBar",userProfileProperty:"get_feedback",prerequisiteConditionCallback:{action:"topBarMenuBarItemVisible",actionProps:{menuItemKey:"FEEDBACK"}},prerequisiteActions:{action:"openTopBarMenuDropDown",actionProps:{menuItemIndex:0}},postActions:{action:"enableCloseTopBarMenuDropDown"},onTargetContainerAction:{},openTriggers:[],closeTriggers:["topBarMenuBarSiteDropDownClosed"],isOneLiner:true,isDesktopOnly:false,customUIConfiguration:{dot:{targetOffsetX:-14,targetOffsetY:-5}}},SiteSettings:{id:"SiteSettings",primaryHintTarget:"SiteSettings",hintTargetContainer:"topBarSiteMenuPanel",preHintTarget:"SiteMenuBar",preHintTargetContainer:"topBar",userProfileProperty:"site_settings",prerequisiteActions:{action:"openTopBarMenuDropDown",actionProps:{menuItemIndex:0}},postActions:{action:"enableCloseTopBarMenuDropDown"},onTargetContainerAction:{},openTriggers:[],closeTriggers:["topBarMenuBarSiteDropDownClosed"],isOneLiner:true,isDesktopOnly:false,customUIConfiguration:{dot:{targetOffsetX:-14,targetOffsetY:-5}}},Rulers:{id:"Rulers",primaryHintTarget:"Rulers",hintTargetContainer:"topBarToolsMenuPanel",preHintTarget:"ToolsMenuBar",preHintTargetContainer:"topBar",userProfileProperty:"apply_rulers",prerequisiteConditionCallback:{action:"topBarMenuBarItemVisible",actionProps:{menuItemKey:"RULERS"}},prerequisiteActions:{action:"openTopBarMenuDropDown",actionProps:{menuItemIndex:1}},postActions:{action:"enableCloseTopBarMenuDropDown"},onTargetContainerAction:{},openTriggers:[],closeTriggers:["topBarMenuBarToolsDropDownClosed"],isOneLiner:true,isDesktopOnly:false,customUIConfiguration:{dot:{targetOffsetX:-14,targetOffsetY:-5}}},HideControls:{id:"HideControls",primaryHintTarget:"HideControls",hintTargetContainer:"topBar",userProfileProperty:"hide_controls",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:[],closeTriggers:["hideControls"],isOneLiner:true,isDesktopOnly:true},Pages_NewPage:{id:"Pages_NewPage",primaryHintTarget:"Pages_NewPage",hintTargetContainer:"pagesPanel",preHintTarget:"Pages_Navigation",preHintTargetContainer:"topBar",userProfileProperty:"add_page",prerequisiteActions:{action:"openPanel",actionProps:{panelName:"rEditor.panels.pagesPanel"}},postActions:{},onTargetContainerAction:{},openTriggers:[],closeTriggers:["pagesPanelClosed"],isOneLiner:true,isDesktopOnly:true,customUIConfiguration:{dot:{preTargetOffsetX:-105,preTargetOffsetY:-20,targetOffsetY:-10}}},Pages_Rearrange:{id:"Pages_Rearrange",primaryHintTarget:"Pages_Rearrange",hintTargetContainer:"pagesPanel",userProfileProperty:"rearange_pages",prerequisiteActions:{},prerequisiteConditionCallback:{action:"multiplePages"},postActions:{},onTargetContainerAction:{},openTriggers:["pagesPanelOpened"],closeTriggers:["pagesPanelClosed"],isOneLiner:true,isDesktopOnly:true,customUIConfiguration:{dot:{bubbleAlignment:"BOTTOM"}}},Pages_DropdownMenu:{id:"Pages_DropdownMenu",primaryHintTarget:"Pages_Rearrange",hintTargetContainer:"pagesPanel",userProfileProperty:"subpage",prerequisiteActions:{},prerequisiteConditionCallback:{action:"multiplePages"},postActions:{},onTargetContainerAction:{},openTriggers:["pagesPanelOpened"],closeTriggers:["pagesPanelClosed"],isOneLiner:true,isDesktopOnly:true,customUIConfiguration:{dot:{bubbleAlignment:"BOTTOM"}}},Pages_Settings:{id:"Pages_Settings",primaryHintTarget:"Pages_Settings",hintTargetContainer:"pagesPanel",userProfileProperty:"page_settings",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:["pagesPanelOpened"],closeTriggers:["pagesPanelClosed"],isOneLiner:true,isDesktopOnly:true,customUIConfiguration:{dot:{bubbleAlignment:"RIGHT",targetOffsetX:-5,targetOffsetY:-3}}},MiniNavigation:{id:"MiniNavigation",primaryHintTarget:"MiniNavigation",hintTargetContainer:"innerNavigation",userProfileProperty:"",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:["addPanelOpened"],closeTriggers:["addPanelClosed"],isOneLiner:true,isDesktopOnly:true,customUIConfiguration:{dot:{bubbleAlignment:"RIGHT"}}},ForwardOrBack:{id:"ForwardOrBack",primaryHintTarget:"ForwardOrBack",hintTargetContainer:"rightClickPanel",userProfileProperty:"move_forward_back",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:["rightClickMenuOpen"],closeTriggers:["rightClickMenuClose"],isOneLiner:true,isDesktopOnly:true,customUIConfiguration:{dot:{bubbleAlignment:"LEFT"}}},OverlappingItems:{id:"OverlappingItems",primaryHintTarget:"OverlappingItems",hintTargetContainer:"rightClickPanel",userProfileProperty:"overalpping",prerequisiteActions:{},prerequisiteConditionCallback:{action:"targetDOMNodeExist",actionProps:{dataHintIdAttr:"OverlappingItems"}},postActions:{},onTargetContainerAction:{},openTriggers:["rightClickMenuOpen"],closeTriggers:["rightClickMenuClose"],isOneLiner:true,isDesktopOnly:false,customUIConfiguration:{dot:{bubbleAlignment:"LEFT"}}},SiteHistory:{id:"SiteHistory",primaryHintTarget:"SiteHistory",hintTargetContainer:"topBarSiteMenuPanel",preHintTarget:"SiteMenuBar",preHintTargetContainer:"topBar",userProfileProperty:"site_history",prerequisiteActions:{action:"openTopBarMenuDropDown",actionProps:{menuItemIndex:0}},postActions:{action:"enableCloseTopBarMenuDropDown"},onTargetContainerAction:{},openTriggers:["savePanelClose"],closeTriggers:["topBarMenuBarSiteDropDownClosed"],isOneLiner:true,isDesktopOnly:false,customUIConfiguration:{dot:{targetOffsetX:-14,targetOffsetY:-5}}},ParallexVideoStripPreview:{id:"ParallexVideoStripPreview",primaryHintTarget:"Preview",hintTargetContainer:"topBar",userProfileProperty:"strip_with_video_or_parallex",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:["ParallexStripAddedOrChanged","VideoStripAddedOrChanged"],closeTriggers:["previewClicked"],isOneLiner:true,isDesktopOnly:true,customUIConfiguration:{dot:{targetOffsetY:-19}}},VideoBackgroundStripPreview:{id:"VideoBackgroundStripPreview",primaryHintTarget:"Preview",hintTargetContainer:"topBar",userProfileProperty:"strip_with_video",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:["VideoStripAddedOrChanged"],closeTriggers:["previewClicked"],isOneLiner:true,isDesktopOnly:true,customUIConfiguration:{dot:{targetOffsetY:-19}}},ParallexVideoPreview:{id:"ParallexVideoPreview",primaryHintTarget:"Preview",hintTargetContainer:"topBar",userProfileProperty:"strip_with_parallex",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:["ParallexStripAddedOrChanged"],closeTriggers:["previewClicked"],isOneLiner:true,isDesktopOnly:true,customUIConfiguration:{dot:{targetOffsetY:-19}}},VideoBackgroundPreview:{id:"VideoBackgroundPreview",primaryHintTarget:"Preview",hintTargetContainer:"topBar",userProfileProperty:"video_background",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:["VideoBackgroundAddedOrChanged"],closeTriggers:["previewClicked"],isOneLiner:true,isDesktopOnly:true,customUIConfiguration:{dot:{targetOffsetY:-19}}},MobileEditor_HiddenElements:{id:"MobileEditor_HiddenElements",primaryHintTarget:"MobileEditorHiddenElements",hintTargetContainer:"leftBar",userProfileProperty:"mobile_hide_elements",prerequisiteActions:{},postActions:{},onTargetContainerAction:{},openTriggers:["editorViewModeSwitchedToMobile"],closeTriggers:["hiddenItemsClicked"],isOneLiner:true,isDesktopOnly:false,customUIConfiguration:{dot:{bubbleAlignment:"RIGHT"}}}}});define("editorHints/configurations/hintsConfig.json",[],function(){return{daysBeforeHintCanShownAgain:7,userIdleDurationSec:3,minTimeBetweenHintsSec:{time1:540,time2:1980,time3:1},uiType:{overlay:{uiType:"overlay",configurations:{resetTimeoutTrigger:"hintClosed",closeHintOnOverlayClick:true,enableTargetClick:true,highlightCircleRadius:36,maxTargetWidthForCenterAlign:80,distanceFromTarget:30,marginFromWindow:60,contentWidth:240}},dot:{uiType:"dot",configurations:{resetTimeoutTrigger:"hintShown",dotRadius:5,distanceFromTarget:-2,marginFromWindow:6,bubbleWidth:240,hintBubbleTimeoutSec:10}}},hints:{list1:{userIdleHints:["Undo","Preview","Help","Pages_Navigation","AddAnything","ChangeBackgrounds","AddImage","FreeImages","XandY","Text","Galleries","Buttons","AppMarket","SiteSettings","Publish","Pages_NewPage","Premium","SwitchEditor","HideControls","RePublish","GetFeedback","Rulers","ZoomOut"],actionTriggeredHints:["Pages_Rearrange","Pages_DropdownMenu","Pages_Settings","MiniNavigation","ForwardOrBack","OverlappingItems","MobileEditor_HiddenElements","SiteHistory","ParallexVideoStripPreview","VideoBackgroundPreview"]},list2:{userIdleHints:["AddAnything","ChangeBackgrounds","AddImage","Text","Galleries","Premium"],actionTriggeredHints:["Undo","ParallexVideoStripPreview","VideoBackgroundPreview","Pages_Navigation","XandY","AppMarket","SwitchEditor","Pages_Rearrange","Pages_DropdownMenu","Pages_Settings","MiniNavigation","ForwardOrBack","OverlappingItems","MobileEditor_HiddenElements","SiteHistory"]},list3:{userIdleHints:["Undo","AddImage","Pages_Navigation","Help","HideControls","Preview","SwitchEditor","GetFeedback","Publish"],actionTriggeredHints:["VideoBackgroundStripPreview","ParallexVideoPreview","VideoBackgroundPreview"]},idleList:{userIdleHints:["Undo","Preview","Help","Pages_Navigation","AddAnything","ChangeBackgrounds","AddImage","FreeImages","XandY","Text","Galleries","Buttons","AppMarket","SiteSettings","Publish","Pages_NewPage","Premium","SwitchEditor","HideControls","RePublish","GetFeedback","Rulers","ZoomOut"],actionTriggeredHints:[]},actionList:{userIdleHints:[],actionTriggeredHints:["Undo","ParallexVideoStripPreview","VideoBackgroundPreview","Pages_Navigation","XandY","AppMarket","SwitchEditor","Pages_Rearrange","Pages_DropdownMenu","Pages_Settings","MiniNavigation","ForwardOrBack","OverlappingItems","MobileEditor_HiddenElements","SiteHistory"]}}}});define("editorHints/utils/hintsDataUtil",["lodash","panels","core","experiment","editorHints/configurations/hintsData.json","editorHints/configurations/hintsConfig.json"],function(a,b,c,d,e,f){"use strict";function g(){var b=d.getValue("editorHintsConfigs");if(b){var c=b.match(/config([2-9]|1[0-2]?)$/);if(c){return a.parseInt(c[1])}}}function h(a){var b=~~((a-1)/4)+1;var c="list"+b;return f.hints[c]}function i(a){var b=a%2;var c=b===0?"dot":"overlay";return f.uiType[c]}function j(a){var b=~~((a-1)/2%2)+1;var c="time"+b;return f.minTimeBetweenHintsSec[c]}function k(b,c){var d=b[c];return a.pick(e,d)}function l(b){var c=k(b,"actionTriggeredHints");var d=a(c).map(function(b){return a.map(b.openTriggers,function(a){return{trigger:a,hintData:b}})}).flatten().groupBy("trigger").mapValues(function(b){return a.map(b,"hintData")}).value();d.userIdle=a.values(k(b,"userIdleHints"));return d}return{getCurrentHintsConfiguration:h,getCurrentUiTypeConfiguration:i,getCurrentMinTimeoutBetweenHintsConfiguration:j,getUserIdleDuration:function(){return f.userIdleDurationSec},getDaysBeforeHintCanShownAgain:function(){return f.daysBeforeHintCanShownAgain},getActionToHintsMapping:l,getHintsConfigurationNumber:g}});define("editorHints/utils/constants",["panels","core"],function(a,b){"use strict";var c={ADD_PANEL_OPENED:"addPanelOpened",ADD_PANEL_CLOSED:"addPanelClosed",PAGES_PANEL_CLOSED:"pagesPanelClosed",PAGES_PANEL_OPENED:"pagesPanelOpened",EDITOR_VIEW_MODE_CLICKED:"editorViewModeClicked",APP_MARKET_PANEL_OPENED:"appMarketPanelOpened",HIDE_CONTROLS:"hideControls",SHOW_CONTROLS:"showControls",RIGHT_CLICK_MENU_OPEN:"rightClickMenuOpen",RIGHT_CLICK_MENU_CLOSE:"rightClickMenuClose",PREVIEW_CLICKED:"previewClicked",SAVE_PANEL_CLOSE:"savePanelClose",VIDEO_STRIP_ADDED_OR_CHANGED:"VideoStripAddedOrChanged",PARALLEX_STRIP_ADDED_OR_CHANGED:"ParallexStripAddedOrChanged",VIDEO_BACKGROUND_ADDED_OR_CHANGED:"VideoBackgroundAddedOrChanged",EDITOR_VIEW_MODE_SWITCHED_TO_MOBILE:"editorViewModeSwitchedToMobile",MOUSE_MOVE_START:"mouseMoveStart",MOUSE_MOVE_END:"mouseMoveEnd",MOUSE_DRAG_END:"mouseDragEnd",ENTER_ZOOM_MODE:"enterZoomOut",EXIT_ZOOM_MODE:"exitZoomOut",BACK_FROM_PREVIEW:"backFromPreview",IMAGE_ADDED:"imageAdded",PAGE_ADDED:"pageAdded",NAVIGATE_TO_PAGE:"navigateToPage",COMPONENT_REMOVED:"componentRemoved",UNDO_CLICKED:"undoClicked",CHANGED_BACKGROUNDS_CLICKED:"changeBackgroundsClicked",PUBLISH_CLICKED:"publishClicked",HIDDEN_ITEMS_CLICKED:"hiddenItemsClicked",TOP_BAR_MENU_BAR_DROP_DOWN_OPENED:"topBarMenuBarDropDownOpened",TOP_BAR_MENU_BAR_SITE_DROP_DOWN_OPENED:"topBarMenuBarSiteDropDownOpened",TOP_BAR_MENU_BAR_HELP_DROP_DOWN_OPENED:"topBarMenuBarHelpDropDownOpened",TOP_BAR_MENU_BAR_UPGRADE_DROP_DOWN_OPENED:"topBarMenuBarUpgradeDropDownOpened",TOP_BAR_MENU_BAR_DROP_DOWN_CLOSED:"topBarMenuBarDropDownClosed",TOP_BAR_MENU_BAR_SITE_DROP_DOWN_CLOSED:"topBarMenuBarSiteDropDownClosed",TOP_BAR_MENU_BAR_TOOLS_DROP_DOWN_CLOSED:"topBarMenuBarToolsDropDownClosed",SAVE_REMINDER_DISPLAYED:"saveReminderDisplayed"};var d={TOP_BAR:"topBar",TOOL_BAR:"toolBar",LEFT_BAR:"leftBar",ADD_PANEL:"addPanel",PAGES_PANEL:"pagesPanel",INNER_NAVIGATION:"innerNavigation",RIGHT_CLICK_PANEL:"rightClickPanel",TOP_BAR_SITE_MENU_PANEL:"topBarSiteMenuPanel",TOP_BAR_TOOLS_MENU_PANEL:"topBarToolsMenuPanel"};var e={};e[c.ADD_PANEL_OPENED]=d.ADD_PANEL;e[c.PAGES_PANEL_OPENED]=d.PAGES_PANEL;e[c.RIGHT_CLICK_MENU_OPEN]=d.RIGHT_CLICK_PANEL;var f={CLICK_OVERLAY:"click_overlay",GOT_IT:"got_it",ON_TARGET:"on_target",CLICK_ESC:"esc",HINT_REPLACED:"hint_replaced"};var g={USER_PREFERENCES_HINTS_ENTRY_KEY:"hintsLastShownTime",USER_PREFERENCES_HINTS_COUNT_ENTRY_KEY:"shownHintsCount"};var h=[a.biEvents.PANEL_CLOSED.evid,c.MOUSE_MOVE_END,c.MOUSE_DRAG_END,b.bi.events.topbar.zoombar.zoom_mode_bar_exit_zoom_mode.evid,b.bi.events.editor.hide_tools.show_controls.evid];return{ACTIONS:c,HINTS_CONTAINERS:d,ACTIONS_TO_OPEN_CONTAINERS:e,BI:f,START_USER_IDLE_TIMER_EVENTS:h,USER_PREFERENCES:g,ACTION_TRIGGERED_HINT_MIN_TIME_RATIO:2/3}});define("editorHints/utils/biEventToAction",["lodash","panels","core","editorHints/utils/constants"],function(a,b,c,d){"use strict";function e(){var a=d.ACTIONS;var e={};e[b.biEvents.PANEL_CLOSED.evid]=[{actionId:a.ADD_PANEL_CLOSED,biEventParams:{panel_name:"addPanelInfra.addPanel"}},{actionId:a.PAGES_PANEL_CLOSED,biEventParams:{panel_name:"rEditor.panels.pagesPanel"}},{actionId:a.SAVE_PANEL_CLOSE,biEventParams:{panel_name:"savePublish.panels.save.siteWasSavedPanel"}}];e[b.biEvents.PANEL_OPENED.evid]=[{actionId:a.ADD_PANEL_OPENED,biEventParams:{panel_name:"addPanelInfra.addPanel"}},{actionId:a.PAGES_PANEL_OPENED,biEventParams:{panel_name:"rEditor.panels.pagesPanel"}},{actionId:a.PAGES_PANEL_OPENED,biEventParams:{panel_name:"rEditor.panels.pagesAndPopupsPanel"}},{actionId:a.APP_MARKET_PANEL_OPENED,biEventParams:{panel_name:"tpa.compPanels.appMarketPanel"}},{actionId:a.CHANGED_BACKGROUNDS_CLICKED,biEventParams:{panel_name:"rEditor.panels.backgroundPanel"}},{actionId:a.HIDDEN_ITEMS_CLICKED,biEventParams:{panel_name:"mobileEditor.hiddenItemsPanel"}}];e[c.bi.events.topbar.top_bar_click.evid]=[{actionId:a.EDITOR_VIEW_MODE_CLICKED,biEventParams:{category:"editor_view_mode"}}];e[c.bi.events.editor.hide_tools.hide_controls.evid]=[{actionId:a.HIDE_CONTROLS}];e[c.bi.events.editor.hide_tools.show_controls.evid]=[{actionId:a.SHOW_CONTROLS}];e[c.bi.events.topbar.top_bar_zoom_mode_click.evid]=[{actionId:a.ENTER_ZOOM_MODE}];e[c.bi.events.topbar.zoombar.zoom_mode_bar_exit_zoom_mode.evid]=[{actionId:a.EXIT_ZOOM_MODE}];e[c.bi.events.rightClickMenu.RIGHT_CLICK_MENU_OPEN.evid]=[{actionId:a.RIGHT_CLICK_MENU_OPEN}];e[c.bi.events.rightClickMenu.RIGHT_CLICK_MENU_CLOSE.evid]=[{actionId:a.RIGHT_CLICK_MENU_CLOSE}];e[c.bi.events.preview.PREVIEW_CLICK.evid]=[{actionId:a.PREVIEW_CLICKED}];e[c.bi.events.stripContainerSettings.strip_background_panel_background_changed.evid]=[{actionId:a.PARALLEX_STRIP_ADDED_OR_CHANGED,biEventParams:{bg_scroll_with_site:"BackgroundParallax"}},{actionId:a.VIDEO_STRIP_ADDED_OR_CHANGED,biEventParams:{bg_media_type:"wixvideo"}}];e[c.bi.events.backgroundPanel.panel_background_changed.evid]=[{actionId:a.VIDEO_BACKGROUND_ADDED_OR_CHANGED,biEventParams:{bg_media_type:"wixvideo"}}];e[c.bi.events.topbar.editor_view_mode_switch.evid]=[{actionId:a.EDITOR_VIEW_MODE_SWITCHED_TO_MOBILE,biEventParams:{mode:"mobile"}}];e[c.bi.events.topbar.top_bar_Preview_Page_Back_to_Editor_click.evid]=[{actionId:a.BACK_FROM_PREVIEW}];e[a.MOUSE_DRAG_END]=[{actionId:a.MOUSE_DRAG_END}];e[c.bi.events.addPanel.COMPONENT_ADDED_TO_STAGE.evid]=[{actionId:a.IMAGE_ADDED,biEventParams:{category:"image",component_type:"wysiwyg.viewer.components.WPhoto"}},{actionId:a.PARALLEX_STRIP_ADDED_OR_CHANGED,biEventParams:{category:"strip",section:"add_section_label_strip_container_parallax"}},{actionId:a.VIDEO_STRIP_ADDED_OR_CHANGED,biEventParams:{category:"strip",preset_id:"Strip_Strip_Container_Classic_3"}}];e[c.bi.events.topbar.pages.top_bar_PAGES_Add_pages_expand_menu_selection_click.evid]=[{actionId:a.PAGE_ADDED,biEventParams:{category:"page"}}];e[c.bi.events.topbar.pages.top_bar_PAGES_navigate_to_page.evid]=[{actionId:a.NAVIGATE_TO_PAGE}];e[c.bi.events.editor.component_removed.evid]=[{actionId:a.COMPONENT_REMOVED}];e[c.bi.events.editor.undo_redo_component_change.evid]=[{actionId:a.UNDO_CLICKED,biEventParams:{type:"undo",origin:"topbar"}}];e[c.bi.events.publish.PUBLISH_CLICK.evid]=[{actionId:a.PUBLISH_CLICKED}];e[a.TOP_BAR_MENU_BAR_DROP_DOWN_OPENED]=[{actionId:a.TOP_BAR_MENU_BAR_SITE_DROP_DOWN_OPENED,biEventParams:{index:0}},{actionId:a.TOP_BAR_MENU_BAR_HELP_DROP_DOWN_OPENED,biEventParams:{index:2}},{actionId:a.TOP_BAR_MENU_BAR_UPGRADE_DROP_DOWN_OPENED,biEventParams:{index:3}}];e[a.TOP_BAR_MENU_BAR_DROP_DOWN_CLOSED]=[{actionId:a.TOP_BAR_MENU_BAR_SITE_DROP_DOWN_CLOSED,biEventParams:{index:0}},{actionId:a.TOP_BAR_MENU_BAR_TOOLS_DROP_DOWN_CLOSED,biEventParams:{index:1}}];e[c.bi.events.save.saveReminder.REMINDER_DISPLAYED.evid]=[{actionId:a.SAVE_REMINDER_DISPLAYED,biEventParams:{origin:"pop up message"}}];return e}function f(b,c,d){var e=null;var f=b[c.evid];if(f){var g=a(f).filter(function(b){return a.every(b.biEventParams,function(a,b){return d[b]===a})}).first();if(g){e=g.actionId}}return e}return{createBiEventToActionMapping:e,getActionIdByBiEvent:f}});define("editorHints/utils/userPreferencesUtil",["lodash","editorHints/utils/constants"],function(a,b){"use strict";function c(a,c,d){var e=a.getUserPreferences().global.get(b.USER_PREFERENCES.USER_PREFERENCES_HINTS_ENTRY_KEY)||{};e[c]=d;a.getUserPreferences().global.set(b.USER_PREFERENCES.USER_PREFERENCES_HINTS_ENTRY_KEY,e)}function d(a){var c=a.getUserPreferences().global.get(b.USER_PREFERENCES.USER_PREFERENCES_HINTS_COUNT_ENTRY_KEY)||0;a.getUserPreferences().global.set(b.USER_PREFERENCES.USER_PREFERENCES_HINTS_COUNT_ENTRY_KEY,++c);return c}function e(a,c){var d=a.getUserPreferences().global.get(b.USER_PREFERENCES.USER_PREFERENCES_HINTS_ENTRY_KEY);var e=d&&d[c];return e||null}function f(a){a.getUserPreferences().global.set(b.USER_PREFERENCES.USER_PREFERENCES_HINTS_ENTRY_KEY,{});a.getUserPreferences().global.set(b.USER_PREFERENCES.USER_PREFERENCES_HINTS_COUNT_ENTRY_KEY,0)}function g(a,c){a.getUserPreferences().global.set(b.USER_PREFERENCES.USER_PREFERENCES_HINTS_ENTRY_KEY,c)}return{setShownHintInUserPreferences:c,incAndGetShowHintCountInUserPreferences:d,getHintLastShownTime:e,changeLastShowTimestamp:g,resetUserPreferences:f}});define("editorHints/utils/preAndPostHintActions",["lodash"],function(a){"use strict";function b(a){var b=a.editorAPI;if(!b.toolbar.isToolbarEnabled()){b.toolbar.toggleToolbar()}}function c(b){var c=b.editorAPI;if(!a.some(c.panelManager.getOpenPanels(),{name:b.panelName})){c.panelManager.openPanel(b.panelName,b.panelProps)}else{c.panelManager.updatePanelProps(b.panelName,b.panelProps)}}function d(a){a.editorAPI.panelManager.updatePanelProps(a.panelName,a.panelProps)}function e(a){a.editorAPI.topBarMenuBar.openDropDown(a.menuItemIndex,true)}function f(a){a.editorAPI.topBarMenuBar.enableClose()}function g(a){a.editorAPI.topBarMenuBar.disableDropDown()}function h(a){a.editorAPI.topBarMenuBar.enableDropDown()}function i(b){var c=b.editorAPI.mainMenu.getMenuItemsTreeForMainMenu();var d=a.sum(c,function(b){return 1+a.size(b.items)});return d>1}function j(a){return a.editorAPI.topBarMenuBar.shouldBeVisible(a.menuItemKey)}function k(a){var b=a.targetContainer||window.document;return!!b.querySelector('[data-hint-id="'+a.dataHintIdAttr+'"]')}return{openToolbar:b,openPanel:c,switchAddPanelCategory:d,openTopBarMenuDropDown:e,enableCloseTopBarMenuDropDown:f,disableTopBarMenuDropDown:g,enableTopBarMenuDropDown:h,multiplePages:i,topBarMenuBarItemVisible:j,targetDOMNodeExist:k}});define("editorHints/hintsManager/managerHelper",["lodash","jquery","core","editorHints/utils/constants","editorHints/utils/userPreferencesUtil","editorHints/utils/preAndPostHintActions"],function(a,b,c,d,e,f){"use strict";var g="http://editor.wix.com/_api/wix-bi-profile-server/userprofile";function h(b,c){var d=i(b,c);if(a.isEmpty(d)){b.hintsLock.reset()}else{m(b,d,function(a){if(a){o(b,a)}})}}function i(b,c){return a.filter(c,function(a){var c=b.editorAPI.get();var d=!a.prerequisiteConditionCallback||j(b,a,"prerequisiteConditionCallback");var e=c.isDesktopEditor()||!a.isDesktopOnly;var f=k(b,a);return e&&d&&f})}function j(b,c,d){var e=c[d];if(e&&e.action){var g=b.registeredHintsContainers.get()[c.hintTargetContainer];var h=a.assign({},e.actionProps,{editorAPI:b.editorAPI.get(),targetContainer:g});return f[e.action](h)}}function k(b,c){var d=e.getHintLastShownTime(b.editorAPI.get(),c.id);var f=d?l(b,d):false;return!d||!a.isEmpty(c.userProfileProperty)&&!f}function l(a,b){var c=a.minDaysBeforeHintCanShownAgain.get();var d=24*60*60*1e3;return(a.timestamp.get()-b)/d<c}function m(b,c,d){if(a.isEmpty(c)){b.hintsLock.reset();return}var e=a.first(c);if(a.isEmpty(e.userProfileProperty)){d(e)}else{n(e.userProfileProperty,function(f){if(f){m(b,a.rest(c),d)}else{d(e)}})}}function n(c,d){var e=g+"?fields="+c+"&accept=json";b.ajax(e).complete(function(b,e){if(e==="success"){var f=a.get(b,"responseJSON.payload.fields");var g=a.some(f,function(a){return a.name===c&&a.value!==null});d(g)}else{d(false)}})}function o(a,b){p(a,b);r(a,b);t(a)}function p(a,b){if(q(b,a.uiType.get())){j(a,b,"prerequisiteActions")}}function q(b,c){var d=c!=="overlay"&&b.preHintTarget;return!a.isEmpty(b.prerequisiteActions)&&!d}function r(b,c){var d=b.uiType.get();var e=c.customUIConfiguration?c.customUIConfiguration[d]||{}:{};c.uiConfiguration=a.defaults(e,b.uiConfigurations.get());c.uiType=d;b.currentHintData.set(c)}function s(b){var c=b.currentHintData.get();if(c.hintTargetContainer===c.hintTargetContainer&&!a.isEmpty(c.onTargetContainerAction)){j(b,c,"onTargetContainerAction")}}function t(b){var c=b.currentHintData.get();var d=b.registeredHintsContainers.get();if(c&&u(c,d)){s(b);b.presenter.get().presentHint(c,v.bind(null,b),x.bind(null,b),a.get(d,c.preHintTargetContainer),a.get(d,c.hintTargetContainer))}}function u(b,c){var d=b.uiType==="dot"&&a.has(c,b.preHintTargetContainer);var e=a.has(c,b.hintTargetContainer);return d||e}function v(a,b){var c=a.timestamp.get();w(a,b,c);e.setShownHintInUserPreferences(a.editorAPI.get(),b.id,c);a.lastHintDisplayTime.set(c);var d=a.uiConfigurations.get().resetTimeoutTrigger==="hintShown";if(d){j(a,b,"postActions");z(a)}}function w(a,b,d){var f=a.editorAPI.get();var g=e.incAndGetShowHintCountInUserPreferences(f);var h=a.lastHintDisplayTime.get();var i=h?Math.round((d-h)/6e4):0;f.bi.event(c.bi.events.commonControls.editorHints.hintShown,{count:g,name:b.id,timestamp:i,type:b.uiType})}function x(a,b,c){if(b===a.currentHintData.get()){a.currentHintData.set(null)}var d=a.uiConfigurations.get().resetTimeoutTrigger==="hintClosed";if(d){j(a,b,"postActions");y(a,b,c);z(a)}}function y(a,b,d){a.editorAPI.get().bi.event(c.bi.events.commonControls.editorHints.hintDismissed,{name:b.id,timestamp_ms:a.timestamp.get()-a.lastHintDisplayTime.get(),type:d})}function z(a){a.hintsLock.reset();a.userIdleTimeoutHandler.clearTimeout();a.lastTimerBetweenHintsReset.set(a.timestamp.get())}function A(b,c){var e=b.currentHintData.get();if(e&&(a.includes(e.closeTriggers,c)||c===d.ACTIONS.SAVE_REMINDER_DISPLAYED)){b.presenter.get().hideHint()}}function B(a,b){return a&&a.hintTargetContainer===d.ACTIONS_TO_OPEN_CONTAINERS[b]}function C(a,b,c){var d=a*1e3;var e=c-b;return d-e}function D(a,b){var c=a.preHintTargetContainer===b;var d=a.hintTargetContainer===b;return c||d}function E(b){return a.includes(d.START_USER_IDLE_TIMER_EVENTS,b.evid)}function F(b){return!b.toolsControl.areToolsHidden()&&a.isEmpty(b.panelManager.getOpenPanels())}function G(a,b){a.bi.registerForBIEvents(b);a.hints.registerForMouseEvents(H.bind(null,b),I.bind(null,b));a.topBarMenuBar.registerForDropDownActions(J.bind(null,b),K.bind(null,b))}function H(a){a({evid:d.ACTIONS.MOUSE_MOVE_START})}function I(a,b,c){var e=b&&b==="DRAG"&&c?d.ACTIONS.MOUSE_DRAG_END:d.ACTIONS.MOUSE_MOVE_END;a({evid:e})}function J(a,b){a({evid:d.ACTIONS.TOP_BAR_MENU_BAR_DROP_DOWN_OPENED},{index:b})}function K(a,b){a({evid:d.ACTIONS.TOP_BAR_MENU_BAR_DROP_DOWN_CLOSED},{index:b})}return{showNextApplicableHint:h,
presentHint:t,closeCurrentHintIfNeeded:A,doesContainerToOpenBelongToCurrentHint:B,timeLeftToShowNextHint:C,isCurrentHintContainer:D,shouldStartUserIdleTimerAfterEvent:E,canShowUserIdleHintsOnEditor:F,resetTimeoutForNextHint:z,registerForEvents:G,showHint:o}});define("editorHints/hintsManager/managerState",["lodash"],function(a){"use strict";var b={};var c=false;var d;var e;var f;var g;var h;var i;var j;function k(a,b,c){h=a;i=b;j=c;g=null}function l(){return h}function m(){return i}function n(){return j.uiType}function o(){return j.uiConfigurations}function p(){return j.minTimeBetweenHints}function q(){return j.minDaysBeforeHintCanShownAgain}function r(){return b}function s(a,c){b[a]=c}function t(a){delete b[a]}function u(){return c}function v(){c=true}function w(){c=false}function x(){return d}function y(a){d=a}function z(){return e}function A(a){e=a}function B(){clearTimeout(f)}function C(a,b){f=setTimeout(a,b)}function D(){return g}function E(a){g=a}function F(){return a.now()}return{init:k,editorAPI:{get:l},presenter:{get:m},uiType:{get:n},uiConfigurations:{get:o},minTimeBetweenHints:{get:p},minDaysBeforeHintCanShownAgain:{get:q},registeredHintsContainers:{get:r,add:s,remove:t},hintsLock:{get:u,set:v,reset:w},lastTimerBetweenHintsReset:{get:x,set:y},lastHintDisplayTime:{get:z,set:A},userIdleTimeoutHandler:{clearTimeout:B,setTimeout:C},currentHintData:{get:D,set:E},timestamp:{get:F}}});define("editorHints/hintsManager/hintsManager",["lodash","core","editorHints/configurations/hintsData.json","editorHints/utils/hintsDataUtil","editorHints/utils/biEventToAction","editorHints/utils/userPreferencesUtil","editorHints/utils/constants","editorHints/hintsManager/managerHelper","editorHints/hintsManager/managerState"],function(a,b,c,d,e,f,g,h,i){"use strict";var j;var k=["XandY"];function l(a,b){j=m();i.init(b,a,j);i.lastTimerBetweenHintsReset.set(i.timestamp.get());h.registerForEvents(b,q)}function m(){var a=d.getHintsConfigurationNumber();var b=d.getCurrentMinTimeoutBetweenHintsConfiguration(a);var c=d.getCurrentHintsConfiguration(a);var f=d.getCurrentUiTypeConfiguration(a);var g=e.createBiEventToActionMapping();var h=f.configurations;var i=f.uiType;var j=d.getDaysBeforeHintCanShownAgain();var k=n(c,i);var l=d.getActionToHintsMapping(k);return{actionToHintsMapping:l,biEventToActionMapping:g,uiConfigurations:h,uiType:i,minTimeBetweenHints:b,minDaysBeforeHintCanShownAgain:j}}function n(b,c){if(c==="dot"){var d={};d.actionTriggeredHints=a.difference(b.actionTriggeredHints,k);d.userIdleHints=a.difference(b.userIdleHints,k);return d}return b}function o(a,b){i.registeredHintsContainers.add(a,b);var c=i.currentHintData.get();if(c&&h.isCurrentHintContainer(c,a)){h.presentHint(i)}}function p(a){var b=i.currentHintData.get();i.registeredHintsContainers.remove(a);if(b&&b.hintTargetContainer===a){i.presenter.get().hideHint()}}function q(a,b){s(a);var c=e.getActionIdByBiEvent(j.biEventToActionMapping,a,b);if(c){h.closeCurrentHintIfNeeded(i,c);if(r(c)){i.hintsLock.set();var d=j.actionToHintsMapping[c];h.showNextApplicableHint(i,d)}}}function r(a){var b=i.lastTimerBetweenHintsReset.get();var c=i.minTimeBetweenHints.get();var d=c*g.ACTION_TRIGGERED_HINT_MIN_TIME_RATIO;var e=h.timeLeftToShowNextHint(d,b,i.timestamp.get());var f=h.doesContainerToOpenBelongToCurrentHint(i.currentHintData.get(),a);return!i.hintsLock.get()&&e<0&&!f}function s(a){i.userIdleTimeoutHandler.clearTimeout();if(h.shouldStartUserIdleTimerAfterEvent(a)){i.userIdleTimeoutHandler.setTimeout(t,d.getUserIdleDuration()*1e3)}}function t(){if(h.canShowUserIdleHintsOnEditor(i.editorAPI.get())){var a=h.timeLeftToShowNextHint(i.minTimeBetweenHints.get(),i.lastTimerBetweenHintsReset.get(),i.timestamp.get());if(a<0&&!i.hintsLock.get()){i.hintsLock.set();h.showNextApplicableHint(i,j.actionToHintsMapping.userIdle)}else{var b=a>0?a:d.getUserIdleDuration()*1e3;i.userIdleTimeoutHandler.setTimeout(t,b)}}}function u(){h.resetTimeoutForNextHint(i)}function v(){i.userIdleTimeoutHandler.clearTimeout();i.hintsLock.reset();i.currentHintData.set(null);l(i.presenter.get(),i.editorAPI.get())}function w(a){i.userIdleTimeoutHandler.clearTimeout();if(i.currentHintData.get()){i.presenter.get().hideHint()}var b=c[a];if(b){i.hintsLock.set();h.showHint(i,b)}}function x(){i.userIdleTimeoutHandler.clearTimeout();if(i.currentHintData.get()){i.presenter.get().hideHint()}i.hintsLock.set();h.showNextApplicableHint(i,j.actionToHintsMapping.userIdle)}function y(b){var c={};var e=d.getCurrentHintsConfiguration();var g=a.union(e.actionTriggeredHints,e.userIdleHints);a.forEach(g,function(a){c[a]=b});f.changeLastShowTimestamp(i.editorAPI.get(),c)}return{init:l,onPresenterUnmount:u,registerOrUpdateHint:o,unRegisterHint:p,showHintById:w,showNextIdleHint:x,initHints:v,resetUserPreferences:function(){f.resetUserPreferences(i.editorAPI.get())},changeLastShowTimestampForAllHints:y}});define("editorHints/hintsManager/hintsNotify",["reactDOM","react","lodash","editorHints/hintsManager/hintsManager"],function(a,b,c,d){"use strict";return b.createClass({displayName:"hint",propTypes:{id:b.PropTypes.string.isRequired,children:b.PropTypes.element.isRequired},componentDidMount:function(){d.registerOrUpdateHint(this.props.id,a.findDOMNode(this))},componentDidUpdate:function(){d.registerOrUpdateHint(this.props.id,a.findDOMNode(this))},componentWillUnmount:function(){d.unRegisterHint(this.props.id)},render:function(){return b.Children.only(this.props.children)}})});define("editorHints/presenters/hintContent.rt",["react","lodash","baseUI","util"],function(a,b,c,d){"use strict";return function(){return a.createElement("div",{className:"hint-content-container "+(!this.props.contentDescription?"title-only":""),style:this.props.contentStyle},a.createElement("div",{className:"hint-title title"},d.translate(this.props.contentTitle)),this.props.contentDescription?a.createElement("div",{key:"hint-content-text",className:"hint-description"},d.translate(this.props.contentDescription)):null,a.createElement("footer",{className:"hint-footer"},a.createElement(c.button,{className:"hint-got-it",onClick:this.props.onGotItClick,label:this.props.gotItLabel})))}});define("editorHints/presenters/hintContent",["react","lodash","editorHints/presenters/hintContent.rt"],function(a,b,c){"use strict";return a.createClass({displayName:"hintContent",propTypes:{contentTitle:a.PropTypes.string.isRequired,contentDescription:a.PropTypes.string,gotItLabel:a.PropTypes.string.isRequired,contentStyle:a.PropTypes.object.isRequired,onGotItClick:a.PropTypes.func.isRequired},render:c})});define("editorHints/presenters/overlayHint.rt",["react","lodash","baseUI","editorHints/presenters/hintContent"],function(a,b,c,d){"use strict";function e(b,c,d,e,f,g){var h=this.getScreenDimensions();return a.createElement("path",{className:"hint-highlight-path",d:"M0 0 h"+h.screenWidth+" v"+h.screenHeight+" h-"+h.screenWidth+" z\n             M"+e+" "+f+" a"+b+" "+b+" 0 1 0 0 -0.1 z","fill-rule":"evenodd"})}function f(b,c,d,e,f,g){var h=this.getScreenDimensions();var i=c.left;var j=c.right;var k=c.top;var l=j-i;var m=c.bottom-c.top;return a.createElement("path",{className:"hint-target-wrapper-path",style:{pointerEvents:this.getHintTargetWrapperSvgPathPointerEventsValue()},d:"M0 0 h"+h.screenWidth+" v"+h.screenHeight+" h-"+h.screenWidth+" z\n             M"+i+" "+k+" h"+l+" v"+m+" h-"+l+" z","fill-rule":"evenodd"})}function g(){var b=this.props.uiConfiguration.highlightCircleRadius;var c=this.props.target.getBoundingClientRect();var g=this.getHighlightCircleStartPoints(c);var h=g.startX;var i=g.startY;var j="Editor_Hints_"+this.props.hintId;return a.createElement("div",{className:"hint-overlay-container",onClick:this.handleOnOverlayClick.bind(this,h,i),style:{pointerEvents:this.getContainerPointerEventsValue()}},a.createElement(d,{contentTitle:this.props.isOneLiner?j+"_OneLiner":j+"_Title",contentDescription:this.props.isOneLiner?"":j+"_Description",gotItLabel:j+"_Close",contentStyle:this.getContentStyle(h,i),onGotItClick:this.handleGotItClick}),a.createElement("div",{className:"circle-shadow",style:this.getCircleShadowStyle(h,i)}),a.createElement("svg",{className:"hint-highlight"},e.apply(this,[b,c,g,h,i,j])),a.createElement("svg",{className:"hint-target-wrapper"},f.apply(this,[b,c,g,h,i,j])))}return function(){return g.apply(this,[])}});define("editorHints/presenters/overlayHint",["react","lodash","util","core","editorHints/utils/constants","editorHints/presenters/overlayHint.rt"],function(a,b,c,d,e,f){"use strict";var g=27;function h(a,b,c,d,e){var f={};var g;g=b?window.innerWidth/2:a.contentWidth;f.width=g+"px";if(e+g+c<window.innerWidth){f.left=e<c?c:e+"px"}else{var h=e+d*2;if(h-g<c){var i=window.innerWidth/2-g/2;f.left=i+"px"}else{f.right=window.innerWidth-h+"px"}}return f}function i(a,b,c,d){var e=c+a.distanceFromTarget;var f=d+e;if(window.innerHeight-f<b){return{bottom:window.innerHeight-(d-e)+"px"}}return{top:f+"px"}}return a.createClass({mixins:[d.mixins.editorAPIMixin,c.outerClickMixin],displayName:"overlayHint",propTypes:{target:a.PropTypes.object.isRequired,hintId:a.PropTypes.string.isRequired,uiConfiguration:a.PropTypes.object.isRequired,hideHint:a.PropTypes.func.isRequired,onHintShown:a.PropTypes.func.isRequired,onHideHint:a.PropTypes.func.isRequired,isOneLiner:a.PropTypes.bool.isRequired},componentWillMount:function(){var a=this.getEditorAPI();a.tooltips.disable();a.disableRightClickMenuCloseOnOuterClick();window.document.addEventListener("keydown",this.onKeyDown,true);c.keyboardShortcuts.disable();this.props.onHintShown()},componentWillUnmount:function(){var a=this.getEditorAPI();a.enableRightClickMenuCloseOnOuterClick();a.tooltips.enable();window.document.removeEventListener("keydown",this.onKeyDown,true);c.keyboardShortcuts.enable();this.props.onHideHint(this.closeType||e.BI.HINT_REPLACED)},getScreenDimensions:function(){return{screenWidth:window.innerWidth,screenHeight:window.innerHeight}},getCircleShadowStyle:function(a,b){var c=this.props.uiConfiguration.highlightCircleRadius;var d=2;return{width:(c-d)*2+"px",height:(c-d)*2+"px",top:b-c+"px",left:a+"px",borderWidth:d+"px"}},getHintTargetWrapperSvgPathPointerEventsValue:function(){return this.props.uiConfiguration.enableTargetClick?"visiblefill":"all"},getContainerPointerEventsValue:function(){return this.props.uiConfiguration.enableTargetClick?"none":"auto"},getContentStyle:function(a,c){var d=this.props.uiConfiguration;var e=d.marginFromWindow;var f=d.highlightCircleRadius;var g=i(d,e,f,c);var j=h(d,this.props.isOneLiner,e,f,a);return b.assign(g,j)},getHighlightCircleStartPoints:function(a){var b=a.left;var c=a.right;var d=a.top;var e=a.bottom;var f=this.props.uiConfiguration.highlightCircleRadius;var g=this.props.uiConfiguration.maxTargetWidthForCenterAlign;var h=c-b<=g;return{startX:h?(b+c)/2-f:b,startY:(d+e)/2}},handleOnOverlayClick:function(a,b,c){var d=e.BI.CLICK_OVERLAY;var f=this.props.uiConfiguration.highlightCircleRadius;var g=f*2;var h=c.clientX>a&&c.clientX<a+g;var i=c.clientY>b-f&&c.clientY<b+f;if(h&&i){d=e.BI.ON_TARGET}if(this.props.uiConfiguration.closeHintOnOverlayClick){this.closeType=d;this.props.hideHint()}},handleGotItClick:function(a){a.stopPropagation();this.closeType=e.BI.GOT_IT;this.props.hideHint()},onOuterClick:function(){this.closeType=e.BI.ON_TARGET;this.props.hideHint()},onKeyDown:function(a){if(a.keyCode===g){a.preventDefault();a.stopPropagation();this.closeType=e.BI.CLICK_ESC;this.props.hideHint()}},render:f})});define("editorHints/presenters/dotHint.rt",["react","lodash","baseUI"],function(a,b,c){"use strict";function d(){var d=this.props.preTarget;var e=this.props.target;return a.createElement("div",{key:"dotHintContainer",className:"dot-hint-container"},d?a.createElement("div",{key:"preTargetDot",className:b({dot:true,"dot-animation":this.state.showAnimation}).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" "),style:this.getPreTargetDotContainerPositionsStyle(d)}):null,e?a.createElement("div",{key:"primaryTargetDot",className:b({dot:true,"dot-animation":this.state.showAnimation&&!d}).transform(function(a,b,c){if(b){a.push(c)}},[]).join(" "),style:this.getTargetDotContainerPositionsStyle(e)}):null,this.state.showBubble&&this.props.bubbleTarget?a.createElement(c.bubble,{key:"dotHintContent",value:this.getBubbleValue(),targetNode:this.props.bubbleTarget,width:this.props.uiConfiguration.bubbleWidth+"px",marginsFromWindow:this.props.uiConfiguration.marginFromWindow,alignment:this.getBubbleAlignment()}):null)}return function(){return this.props.preTarget||this.props.target?d.apply(this,[]):null}});define("editorHints/presenters/dotHint",["react","lodash","baseUI","uiConstants","editorHints/presenters/dotHint.rt"],function(a,b,c,d,e){"use strict";return a.createClass({displayName:"dotHint",propTypes:{preTarget:a.PropTypes.object,target:a.PropTypes.object,bubbleTarget:a.PropTypes.object.isRequired,hintId:a.PropTypes.string.isRequired,uiConfiguration:a.PropTypes.object.isRequired,onHideHint:a.PropTypes.func.isRequired,onHintShown:a.PropTypes.func.isRequired,isOneLiner:a.PropTypes.bool.isRequired},getInitialState:function(){return{showBubble:true,showAnimation:true}},onTargetClick:function(){clearTimeout(this.timeoutId);this.setState({showBubble:false,showAnimation:false})},componentWillMount:function(){this.props.bubbleTarget.addEventListener("click",this.onTargetClick);this.timeoutId=setTimeout(this.closeBubble,this.props.uiConfiguration.hintBubbleTimeoutSec*1e3);this.props.onHintShown()},componentWillUnmount:function(){clearTimeout(this.timeoutId);this.props.bubbleTarget.removeEventListener("click",this.onTargetClick);this.props.onHideHint()},getDotContainerPositionsStyle:function(a,b,c){var d=a.getBoundingClientRect();var e=d.right;var f=d.bottom;var g=this.props.uiConfiguration.dotRadius;var h=1;if(a.tagName==="svg"){h=-2}return{left:e+b-g+h+"px",top:f+c-g+h+"px",width:g*2,height:g*2}},getTargetDotContainerPositionsStyle:function(a){var b=this.props.uiConfiguration.targetOffsetX||0;var c=this.props.uiConfiguration.targetOffsetY||0;return this.getDotContainerPositionsStyle(a,b,c)},getPreTargetDotContainerPositionsStyle:function(a){var b=this.props.uiConfiguration.preTargetOffsetX||0;var c=this.props.uiConfiguration.preTargetOffsetY||0;return this.getDotContainerPositionsStyle(a,b,c)},closeBubble:function(){this.setState({showAnimation:false},function(){this.setState({showBubble:false,showAnimation:true})})},getBubbleValue:function(){var b="Editor_Hints_"+this.props.hintId;if(this.props.isOneLiner){return b+"_OneLiner"}var d={title:b+"_Title",text:b+"_Description"};return a.createElement(c.popoverTemplates.titleBodyAndLinkTooltip,d)},getBubbleAlignment:function(){var a=this.props.uiConfiguration.bubbleAlignment;switch(a){case"LEFT":return d.TOOLTIP.ALIGNMENT.LEFT;case"RIGHT":return d.TOOLTIP.ALIGNMENT.RIGHT;case"TOP":return d.TOOLTIP.ALIGNMENT.TOP;case"BOTTOM":return d.TOOLTIP.ALIGNMENT.BOTTOM}},render:e})});define("editorHints/presenters/hintPresenter.rt",["react","lodash","editorHints/presenters/overlayHint","editorHints/presenters/dotHint"],function(a,b,c,d){"use strict";function e(){var b=this.state.hintData;var e=b.uiConfiguration;var f=this.getHintTargets();var g=f.target;var h=f.preTarget;return a.createElement("div",{className:"hint-presenter",key:"hintPresenter"},b.uiType==="overlay"&&g?a.createElement(c,{key:"overlayHint_"+b.id,target:f.innerTarget||g,hintId:b.id,uiConfiguration:e,hideHint:this.hideHint,onHintShown:this.state.onHintShown.bind(null,b),onHideHint:this.state.onHideHint.bind(null,b),isOneLiner:b.isOneLiner}):null,b.uiType==="dot"&&(h||g)?a.createElement(d,{key:"dotHint_"+b.id,preTarget:f.innerPreTarget||h,target:f.innerTarget||g,bubbleTarget:h||g,hintId:b.id,uiConfiguration:e,onHideHint:this.state.onHideHint.bind(null,b),onHintShown:this.state.onHintShown.bind(null,b),isOneLiner:b.isOneLiner}):null)}return function(){return this.state.hintData?e.apply(this,[]):null}});define("editorHints/presenters/hintPresenter",["react","lodash","core","editorHints/hintsManager/hintsManager","editorHints/presenters/hintPresenter.rt"],function(a,b,c,d,e){"use strict";function f(a,b,c){var d='[data-hint-id="'+b+(c?"_"+c:"")+'"]';return a.querySelector(d)}return a.createClass({displayName:"hintPresenter",mixins:[c.mixins.editorAPIMixin],getInitialState:function(){return{hintData:null,onHideHint:null,onHintShown:null,preHintContainerDOMNode:null,hintContainerDOMNode:null}},componentDidMount:function(){d.init(this,this.getEditorAPI())},componentWillUnmount:function(){d.onPresenterUnmount()},presentHint:function(a,b,c,d,e){this.setState({hintData:a,onHintShown:b,onHideHint:c,preHintContainerDOMNode:d,hintContainerDOMNode:e})},getHintTargets:function(){var a=this.state.preHintContainerDOMNode;var b=this.state.hintContainerDOMNode;var c=this.state.hintData.primaryHintTarget;var d=this.state.hintData.preHintTarget;return{preTarget:d&&a?f(a,d):null,innerPreTarget:d&&a?f(a,d,"inner"):null,target:b?f(b,c):null,innerTarget:b?f(b,c,"inner"):null}},hideHint:function(){this.setState({hintData:null,onHideHint:null,onHintShown:null,preHintContainerDOMNode:null,hintContainerDOMNode:null})},render:e})});define("editorHints",["editorHints/hintsManager/hintsManager","editorHints/hintsManager/hintsNotify","editorHints/presenters/hintPresenter","editorHints/utils/constants","editorHints/configurations/hintsData.json"],function(a,b,c,d,e){"use strict";return{manager:a,hintsNotify:b,hintPresenter:c,hintsContainers:d.HINTS_CONTAINERS,hintsData:e}});